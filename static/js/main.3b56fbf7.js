/*! For license information please see main.3b56fbf7.js.LICENSE.txt */
!function(){var e={694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var u in n)r.call(n,u)&&n[u]&&e.push(u)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},892:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",a="minute",o="hour",u="day",s="week",c="month",l="quarter",f="year",h="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},m=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},g={s:m,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),a=n-i<0,o=t.clone().add(r+(a?-1:1),c);return+(-(r+(n-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:f,w:s,d:u,D:h,h:o,m:a,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},k="en",b={};b[k]=y;var w=function(e){return e instanceof E},x=function e(t,n,r){var i;if(!t)return k;if("string"==typeof t){var a=t.toLowerCase();b[a]&&(i=a),n&&(b[a]=n,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var u=t.name;b[u]=t,i=u}return!r&&i&&(k=i),i||!r&&k},_=function(e,t){if(w(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new E(n)},I=g;I.l=x,I.i=w,I.w=function(e,t){return _(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function y(e){this.$L=x(e.locale,null,!0),this.parse(e)}var m=y.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(I.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(p);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return I},m.isValid=function(){return!(this.$d.toString()===d)},m.isSame=function(e,t){var n=_(e);return this.startOf(t)<=n&&n<=this.endOf(t)},m.isAfter=function(e,t){return _(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<_(e)},m.$g=function(e,t,n){return I.u(e)?this[t]:this.set(n,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var n=this,r=!!I.u(t)||t,l=I.p(e),d=function(e,t){var i=I.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(u)},p=function(e,t){return I.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},v=this.$W,y=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(l){case f:return r?d(1,0):d(31,11);case c:return r?d(1,y):d(0,y+1);case s:var k=this.$locale().weekStart||0,b=(v<k?v+7:v)-k;return d(r?m-b:m+(6-b),y);case u:case h:return p(g+"Hours",0);case o:return p(g+"Minutes",1);case a:return p(g+"Seconds",2);case i:return p(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var n,s=I.p(e),l="set"+(this.$u?"UTC":""),d=(n={},n[u]=l+"Date",n[h]=l+"Date",n[c]=l+"Month",n[f]=l+"FullYear",n[o]=l+"Hours",n[a]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[s],p=s===u?this.$D+(t-this.$W):t;if(s===c||s===f){var v=this.clone().set(h,1);v.$d[d](p),v.init(),this.$d=v.set(h,Math.min(this.$D,v.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[I.p(e)]()},m.add=function(r,l){var h,d=this;r=Number(r);var p=I.p(l),v=function(e){var t=_(d);return I.w(t.date(t.date()+Math.round(e*r)),d)};if(p===c)return this.set(c,this.$M+r);if(p===f)return this.set(f,this.$y+r);if(p===u)return v(1);if(p===s)return v(7);var y=(h={},h[a]=t,h[o]=n,h[i]=e,h)[p]||1,m=this.$d.getTime()+r*y;return I.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=I.z(this),a=this.$H,o=this.$m,u=this.$M,s=n.weekdays,c=n.months,l=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].slice(0,a)},f=function(e){return I.s(a%12||12,e,"0")},h=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:u+1,MM:I.s(u+1,2,"0"),MMM:l(n.monthsShort,u,c,3),MMMM:l(c,u),D:this.$D,DD:I.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,s,2),ddd:l(n.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:String(a),HH:I.s(a,2,"0"),h:f(1),hh:f(2),a:h(a,o,!0),A:h(a,o,!1),m:String(o),mm:I.s(o,2,"0"),s:String(this.$s),ss:I.s(this.$s,2,"0"),SSS:I.s(this.$ms,3,"0"),Z:i};return r.replace(v,(function(e,t){return t||p[e]||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,h,d){var p,v=I.p(h),y=_(r),m=(y.utcOffset()-this.utcOffset())*t,g=this-y,k=I.m(this,y);return k=(p={},p[f]=k/12,p[c]=k,p[l]=k/3,p[s]=(g-m)/6048e5,p[u]=(g-m)/864e5,p[o]=g/n,p[a]=g/t,p[i]=g/e,p)[v]||g,d?k:I.a(k)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return b[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=x(e,t,!0);return r&&(n.$L=r),n},m.clone=function(){return I.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},y}(),S=E.prototype;return _.prototype=S,[["$ms",r],["$s",i],["$m",a],["$H",o],["$W",u],["$M",c],["$y",f],["$D",h]].forEach((function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),_.extend=function(e,t){return e.$i||(e(t,E,_),e.$i=!0),_},_.locale=x,_.isDayjs=w,_.unix=function(e){return _(1e3*e)},_.en=b[k],_.Ls=b,_.p={},_}()},808:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,r=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,a={},o=function(e){return(e=+e)+(e>68?1900:2e3)},u=function(e){return function(t){this[e]=+t}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:"+"===t[0]?-n:n}(e)}],c=function(e){var t=a[e];return t&&(t.indexOf?t:t.s.concat(t.f))},l=function(e,t){var n,r=a.meridiem;if(r){for(var i=1;i<=24;i+=1)if(e.indexOf(r(i,0,t))>-1){n=i>12;break}}else n=e===(t?"pm":"PM");return n},f={A:[i,function(e){this.afternoon=l(e,!1)}],a:[i,function(e){this.afternoon=l(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[n,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[r,u("seconds")],ss:[r,u("seconds")],m:[r,u("minutes")],mm:[r,u("minutes")],H:[r,u("hours")],h:[r,u("hours")],HH:[r,u("hours")],hh:[r,u("hours")],D:[r,u("day")],DD:[n,u("day")],Do:[i,function(e){var t=a.ordinal,n=e.match(/\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\[|\]/g,"")===e&&(this.day=r)}],M:[r,u("month")],MM:[n,u("month")],MMM:[i,function(e){var t=c("months"),n=(c("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[i,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,u("year")],YY:[n,function(e){this.year=o(e)}],YYYY:[/\d{4}/,u("year")],Z:s,ZZ:s};function h(n){var r,i;r=n,i=a&&a.formats;for(var o=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var a=r&&r.toUpperCase();return n||i[r]||e[r]||i[a].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))).match(t),u=o.length,s=0;s<u;s+=1){var c=o[s],l=f[c],h=l&&l[0],d=l&&l[1];o[s]=d?{regex:h,parser:d}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},n=0,r=0;n<u;n+=1){var i=o[n];if("string"==typeof i)r+=i.length;else{var a=i.regex,s=i.parser,c=e.slice(r),l=a.exec(c)[0];s.call(t,l),e=e.replace(l,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(o=e.parseTwoDigitYear);var r=t.prototype,i=r.parse;r.parse=function(e){var t=e.date,r=e.utc,o=e.args;this.$u=r;var u=o[1];if("string"==typeof u){var s=!0===o[2],c=!0===o[3],l=s||c,f=o[2];c&&(f=o[2]),a=this.$locale(),!s&&f&&(a=n.Ls[f]),this.$d=function(e,t,n){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var r=h(t)(e),i=r.year,a=r.month,o=r.day,u=r.hours,s=r.minutes,c=r.seconds,l=r.milliseconds,f=r.zone,d=new Date,p=o||(i||a?1:d.getDate()),v=i||d.getFullYear(),y=0;i&&!a||(y=a>0?a-1:d.getMonth());var m=u||0,g=s||0,k=c||0,b=l||0;return f?new Date(Date.UTC(v,y,p,m,g,k,b+60*f.offset*1e3)):n?new Date(Date.UTC(v,y,p,m,g,k,b)):new Date(v,y,p,m,g,k,b)}catch(e){return new Date("")}}(t,u,r),this.init(),f&&!0!==f&&(this.$L=this.locale(f).$L),l&&t!=this.format(u)&&(this.$d=new Date("")),a={}}else if(u instanceof Array)for(var d=u.length,p=1;p<=d;p+=1){o[1]=u[p-1];var v=n.apply(this,o);if(v.isValid()){this.$d=v.$d,this.$L=v.$L,this.init();break}p===d&&(this.$d=new Date(""))}else i.call(this,e)}}}()},929:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}}()},253:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}()},636:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isoWeeksInYear=function(){var e=this.isLeapYear(),t=this.endOf("y").day();return 4===t||e&&5===t?53:52}}}()},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var a,o,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in a=Object(arguments[s]))n.call(a,c)&&(u[c]=a[c]);if(t){o=t(a);for(var l=0;l<o.length;l++)r.call(a,o[l])&&(u[o[l]]=a[o[l]])}}return u}},151:function(e,t,n){var r=n(878);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],b=n[7];u&&(r.push(u),u="");var w=null!=v&&null!=p&&p!==v,x="+"===k||"*"===k,_="?"===k||"*"===k,I=n[2]||l,E=m||g;r.push({name:y||a++,prefix:v||"",delimiter:I,optional:_,repeat:x,partial:w,asterisk:!!b,pattern:E?c(E):b?".*":"[^"+s(I)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},878:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,_=60106,I=60107,E=60108,S=60114,T=60109,C=60110,A=60112,N=60113,D=60120,O=60115,R=60116,P=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;x=j("react.element"),_=j("react.portal"),I=j("react.fragment"),E=j("react.strict_mode"),S=j("react.profiler"),T=j("react.provider"),C=j("react.context"),A=j("react.forward_ref"),N=j("react.suspense"),D=j("react.suspense_list"),O=j("react.memo"),R=j("react.lazy"),P=j("react.block"),j("react.scope"),L=j("react.opaque.id"),M=j("react.debug_trace_mode"),F=j("react.offscreen"),U=j("react.legacy_hidden")}var V,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var K=!1;function G(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function W(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return H(e.type);case P:return H(e._render);case R:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,ve,ye=(ve=function(e,t){if(e.namespaceURI!==fe.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ve(e,t)}))}:ve);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ge={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ke=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ge.hasOwnProperty(e)&&ge[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ge).forEach((function(e){ke.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ge[t]=ge[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ie(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Te=null,Ce=null;function Ae(e){if(e=ni(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),Se(e.stateNode,e.type,t))}}function Ne(e){Te?Ce?Ce.push(e):Ce=[e]:Te=e}function De(){if(Te){var e=Te,t=Ce;if(Ce=Te=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Oe(e,t){return e(t)}function Re(e,t,n,r,i){return e(t,n,r,i)}function Pe(){}var Le=Oe,Me=!1,Fe=!1;function Ue(){null===Te&&null===Ce||(Pe(),De())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(f)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ve){Ve=!1}function qe(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var ze=!1,Ke=null,Ge=!1,We=null,He={onError:function(e){ze=!0,Ke=e}};function Qe(e,t,n,r,i,a,o,u,s){ze=!1,Ke=null,qe.apply(He,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if($e(e)!==e)throw Error(o(188))}function Je(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xe(i),e;if(a===r)return Xe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,at=[],ot=null,ut=null,st=null,ct=new Map,lt=new Map,ft=[],ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":st=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lt.delete(t.pointerId)}}function vt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=dt(t,n,r,i,a),null!==t&&(null!==(t=ni(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ti(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function gt(e,t,n){mt(e)&&n.delete(t)}function kt(){for(it=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==ot&&mt(ot)&&(ot=null),null!==ut&&mt(ut)&&(ut=null),null!==st&&mt(st)&&(st=null),ct.forEach(gt),lt.forEach(gt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,kt)))}function wt(e){function t(t){return bt(t,e)}if(0<at.length){bt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&bt(ot,e),null!==ut&&bt(ut,e),null!==st&&bt(st,e),ct.forEach(t),lt.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)yt(n),null===n.blockedOn&&ft.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _t={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},It={},Et={};function St(e){if(It[e])return It[e];if(!_t[e])return e;var t,n=_t[e];for(t in n)if(n.hasOwnProperty(t)&&t in Et)return It[e]=n[t];return e}f&&(Et=document.createElement("div").style,"AnimationEvent"in window||(delete _t.animationend.animation,delete _t.animationiteration.animation,delete _t.animationstart.animation),"TransitionEvent"in window||delete _t.transitionend.transition);var Tt=St("animationend"),Ct=St("animationiteration"),At=St("animationstart"),Nt=St("transitionend"),Dt=new Map,Ot=new Map,Rt=["abort","abort",Tt,"animationEnd",Ct,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Nt,"transitionEnd","waiting","waiting"];function Pt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Dt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Lt=8;function Mt(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Lt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Mt(s),i=Lt):0!==(u&=a)&&(r=Mt(u),i=Lt)}else 0!==(a=n&~o)?(r=Mt(a),i=Lt):0!==u&&(r=Mt(u),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-zt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Mt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-zt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?jt(10,t):e;case 10:return 0===(e=Vt(192&~t))?jt(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-zt(t)]=n}var zt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Kt(e)/Gt|0)|0},Kt=Math.log,Gt=Math.LN2;var Wt=a.unstable_UserBlockingPriority,Ht=a.unstable_runWithPriority,Qt=!0;function $t(e,t,n,r){Me||Pe();var i=Xt,a=Me;Me=!0;try{Re(i,e,t,n,r)}finally{(Me=a)||Ue()}}function Yt(e,t,n,r){Ht(Wt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if(Qt)if((i=0===(4&t))&&0<at.length&&-1<ht.indexOf(e))e=dt(null,e,t,n,r),at.push(e);else{var a=Jt(e,t,n,r);if(null===a)i&&pt(e,r);else{if(i){if(-1<ht.indexOf(e))return e=dt(a,e,t,n,r),void at.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=vt(ot,e,t,n,r,i),!0;case"dragenter":return ut=vt(ut,e,t,n,r,i),!0;case"mouseover":return st=vt(st,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return ct.set(a,vt(ct.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,lt.set(a,vt(lt.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;pt(e,r)}Pr(e,t,r,null,n)}}}function Jt(e,t,n,r){var i=Ee(r);if(null!==(i=ti(i))){var a=$e(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Ye(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Pr(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function on(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var sn,cn,ln,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=un(fn),dn=i({},fn,{view:0,detail:0}),pn=un(dn),vn=i({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,cn=e.screenY-ln.screenY):cn=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),yn=un(vn),mn=un(i({},vn,{dataTransfer:0})),gn=un(i({},dn,{relatedTarget:0})),kn=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=un(bn),xn=un(i({},fn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return Sn}var Cn=i({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=un(Cn),Nn=un(i({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=un(i({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),On=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=i({},vn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=un(Rn),Ln=[9,13,27,32],Mn=f&&"CompositionEvent"in window,Fn=null;f&&"documentMode"in document&&(Fn=document.documentMode);var Un=f&&"TextEvent"in window&&!Fn,jn=f&&(!Mn||Fn&&8<Fn&&11>=Fn),Vn=String.fromCharCode(32),Bn=!1;function qn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ne(r),0<(t=Mr(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,$n=null;function Yn(e){Cr(e,0)}function Xn(e){if(X(ri(e)))return e}function Jn(e,t){if("change"===e)return t}var Zn=!1;if(f){var er;if(f){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Qn&&(Qn.detachEvent("onpropertychange",ir),$n=Qn=null)}function ir(e){if("value"===e.propertyName&&Xn($n)){var t=[];if(Hn(t,$n,e,Ee(e)),e=Yn,Me)e(t);else{Me=!0;try{Oe(e,t)}finally{Me=!1,Ue()}}}}function ar(e,t,n){"focusin"===e?(rr(),$n=n,(Qn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn($n)}function ur(e,t){if("click"===e)return Xn(t)}function sr(e,t){if("input"===e||"change"===e)return Xn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},lr=Object.prototype.hasOwnProperty;function fr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!lr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function hr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=hr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mr=f&&"documentMode"in document&&11>=document.documentMode,gr=null,kr=null,br=null,wr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==J(r)||("selectionStart"in(r=gr)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&fr(br,r)||(br=r,0<(r=Mr(kr,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}Pt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Pt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Pt(Rt,2);for(var _r="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ir=0;Ir<_r.length;Ir++)Ot.set(_r[Ir],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Er));function Tr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Qe.apply(this,arguments),ze){if(!ze)throw Error(o(198));var l=Ke;ze=!1,Ke=null,Ge||(Ge=!0,We=l)}}(r,t,void 0,e),e.currentTarget=null}function Cr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Tr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Tr(i,u,c),a=s}}}if(Ge)throw e=We,Ge=!1,We=null,e}function Ar(e,t){var n=ai(t),r=e+"__bubble";n.has(r)||(Rr(t,e,2,!1),n.add(r))}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){e[Nr]||(e[Nr]=!0,u.forEach((function(t){Sr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=ai(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Rr(a,e,i,t),o.add(u))}function Rr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Yt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Pr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ti(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return Le(e,t,n)}finally{Fe=!1,Ue()}}((function(){var r=a,i=Ee(n),o=[];e:{var u=Dt.get(e);if(void 0!==u){var s=hn,c=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":s=An;break;case"focusin":c="focus",s=gn;break;case"focusout":c="blur",s=gn;break;case"beforeblur":case"afterblur":s=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Dn;break;case Tt:case Ct:case At:s=kn;break;case Nt:s=On;break;case"scroll":s=pn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Nn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=je(p,h))&&l.push(Lr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ti(c)&&!c[Zr])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ti(c):null)&&(c!==(f=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=yn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Nn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ri(s),d=null==c?u:ri(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ti(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Fr(d))p++;for(d=0,v=h;v;v=Fr(v))d++;for(;0<p-d;)l=Fr(l),p--;for(;0<d-p;)h=Fr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Fr(l),h=Fr(h)}l=null}else l=null;null!==s&&Ur(o,u,s,l,!1),null!==c&&null!==f&&Ur(o,f,c,l,!0)}if("select"===(s=(u=r?ri(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Jn;else if(Wn(u))if(Zn)y=sr;else{y=or;var m=ar}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ur);switch(y&&(y=y(e,r))?Hn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?ri(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(gr=m,kr=r,br=null);break;case"focusout":br=kr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,xr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,i)}var g;if(Mn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Kn?qn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Kn&&(g=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,Kn=!0)),0<(m=Mr(r,k)).length&&(k=new xn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Un?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Vn);case"textInput":return(e=t.data)===Vn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Mn&&qn(e,t)?(e=nn(),tn=en=Zt=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Cr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=je(e,n))&&r.unshift(Lr(e,a,i)),null!=(a=je(e,t))&&r.push(Lr(e,a,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=je(n,a))&&o.unshift(Lr(n,s,u)):i||null!=(s=je(n,a))&&o.push(Lr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function jr(){}var Vr=null,Br=null;function qr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function zr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Kr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function Wr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Hr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $r=0;var Yr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Yr,Jr="__reactProps$"+Yr,Zr="__reactContainer$"+Yr,ei="__reactEvents$"+Yr;function ti(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Xr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Xr]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[Jr]||null}function ai(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],ui=-1;function si(e){return{current:e}}function ci(e){0>ui||(e.current=oi[ui],oi[ui]=null,ui--)}function li(e,t){ui++,oi[ui]=e.current,e.current=t}var fi={},hi=si(fi),di=si(!1),pi=fi;function vi(e,t){var n=e.type.contextTypes;if(!n)return fi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mi(){ci(di),ci(hi)}function gi(e,t,n){if(hi.current!==fi)throw Error(o(168));li(hi,t),li(di,n)}function ki(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,H(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fi,pi=hi.current,li(hi,e),li(di,di.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=ki(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,ci(di),ci(hi),li(hi,e)):ci(di),li(di,n)}var xi=null,_i=null,Ii=a.unstable_runWithPriority,Ei=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ti=a.unstable_shouldYield,Ci=a.unstable_requestPaint,Ai=a.unstable_now,Ni=a.unstable_getCurrentPriorityLevel,Di=a.unstable_ImmediatePriority,Oi=a.unstable_UserBlockingPriority,Ri=a.unstable_NormalPriority,Pi=a.unstable_LowPriority,Li=a.unstable_IdlePriority,Mi={},Fi=void 0!==Ci?Ci:function(){},Ui=null,ji=null,Vi=!1,Bi=Ai(),qi=1e4>Bi?Ai:function(){return Ai()-Bi};function zi(){switch(Ni()){case Di:return 99;case Oi:return 98;case Ri:return 97;case Pi:return 96;case Li:return 95;default:throw Error(o(332))}}function Ki(e){switch(e){case 99:return Di;case 98:return Oi;case 97:return Ri;case 96:return Pi;case 95:return Li;default:throw Error(o(332))}}function Gi(e,t){return e=Ki(e),Ii(e,t)}function Wi(e,t,n){return e=Ki(e),Ei(e,t,n)}function Hi(){if(null!==ji){var e=ji;ji=null,Si(e)}Qi()}function Qi(){if(!Vi&&null!==Ui){Vi=!0;var e=0;try{var t=Ui;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ei(Di,Hi),n}finally{Vi=!1}}}var $i=w.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=si(null),Ji=null,Zi=null,ea=null;function ta(){ea=Zi=Ji=null}function na(e){var t=Xi.current;ci(Xi),e.type._context._currentValue=t}function ra(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ia(e,t){Ji=e,ea=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function aa(e,t){if(ea!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ea=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===Ji)throw Error(o(308));Zi=t,Ji.dependencies={lanes:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var oa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function sa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ca(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function la(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ha(e,t,n,r){var a=e.updateQueue;oa=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:oa=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bu|=u,e.lanes=u,e.memoizedState=h}}function da(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var pa=(new r.Component).refs;function va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ya={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=ca(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),la(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=ca(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),la(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=ca(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),la(e,i),ps(e,r,n)}};function ma(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!fr(n,r)||!fr(i,a))}function ga(e,t,n){var r=!1,i=fi,a=t.contextType;return"object"===typeof a&&null!==a?a=aa(a):(i=yi(t)?pi:hi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?vi(e,i):fi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=pa,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=aa(a):(a=yi(t)?pi:hi.current,i.context=vi(e,a)),ha(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ya.enqueueReplaceState(i,i.state,null),ha(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var wa=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===pa&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function _a(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ia(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ws(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ys(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Hs(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xs(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ys(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Hs(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case _:return(t=Xs(t,e.mode,n)).return=e,t}if(wa(t)||q(t))return(t=Qs(t,e.mode,n,null)).return=e,t;_a(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null}if(wa(n)||q(n))return null!==i?null:f(e,t,n,r,null);_a(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(wa(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);_a(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=xa(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Hs(a.type,a.key,a.props,null,e.mode,s)).ref=xa(e,r,a),s.return=e,e=s)}return u(e);case _:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xs(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Ys(a,e.mode,s)).return=e,e=r),u(e);if(wa(a))return v(e,r,a,s);if(q(a))return y(e,r,a,s);if(l&&_a(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Ea=Ia(!0),Sa=Ia(!1),Ta={},Ca=si(Ta),Aa=si(Ta),Na=si(Ta);function Da(e){if(e===Ta)throw Error(o(174));return e}function Oa(e,t){switch(li(Na,t),li(Aa,e),li(Ca,Ta),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:de(null,"");break;default:t=de(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(Ca),li(Ca,t)}function Ra(){ci(Ca),ci(Aa),ci(Na)}function Pa(e){Da(Na.current);var t=Da(Ca.current),n=de(t,e.type);t!==n&&(li(Aa,e),li(Ca,n))}function La(e){Aa.current===e&&(ci(Ca),ci(Aa))}var Ma=si(0);function Fa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=null,ja=null,Va=!1;function Ba(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function qa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function za(e){if(Va){var t=ja;if(t){var n=t;if(!qa(e,t)){if(!(t=Hr(n.nextSibling))||!qa(e,t))return e.flags=-1025&e.flags|2,Va=!1,void(Ua=e);Ba(Ua,n)}Ua=e,ja=Hr(t.firstChild)}else e.flags=-1025&e.flags|2,Va=!1,Ua=e}}function Ka(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ua=e}function Ga(e){if(e!==Ua)return!1;if(!Va)return Ka(e),Va=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!zr(t,e.memoizedProps))for(t=ja;t;)Ba(e,t),t=Hr(t.nextSibling);if(Ka(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ja=Hr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ja=null}}else ja=Ua?Hr(e.stateNode.nextSibling):null;return!0}function Wa(){ja=Ua=null,Va=!1}var Ha=[];function Qa(){for(var e=0;e<Ha.length;e++)Ha[e]._workInProgressVersionPrimary=null;Ha.length=0}var $a=w.ReactCurrentDispatcher,Ya=w.ReactCurrentBatchConfig,Xa=0,Ja=null,Za=null,eo=null,to=!1,no=!1;function ro(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function ao(e,t,n,r,i,a){if(Xa=a,Ja=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=null===e||null===e.memoizedState?Oo:Ro,e=n(r,i),no){a=0;do{if(no=!1,!(25>a))throw Error(o(301));a+=1,eo=Za=null,t.updateQueue=null,$a.current=Po,e=n(r,i)}while(no)}if($a.current=Do,t=null!==Za&&null!==Za.next,Xa=0,eo=Za=Ja=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?Ja.memoizedState=eo=e:eo=eo.next=e,eo}function uo(){if(null===Za){var e=Ja.alternate;e=null!==e?e.memoizedState:null}else e=Za.next;var t=null===eo?Ja.memoizedState:eo.next;if(null!==t)eo=t,Za=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Za=e).memoizedState,baseState:Za.baseState,baseQueue:Za.baseQueue,queue:Za.queue,next:null},null===eo?Ja.memoizedState=eo=e:eo=eo.next=e}return eo}function so(e,t){return"function"===typeof t?t(e):t}function co(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Za,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Xa&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Ja.lanes|=l,Bu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,cr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);cr(a,t.memoizedState)||(Mo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function fo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=r,Ha.push(t))),e)return n(t._source);throw Ha.push(t),Error(o(350))}function ho(e,t,n,r){var i=Ru;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=$a.current,c=s.useState((function(){return fo(i,t,n)})),l=c[1],f=c[0];c=eo;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Ja;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!cr(u,e)){e=n(t._source),cr(f,e)||(l(e),e=ds(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-zt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),cr(p,n)&&cr(v,t)&&cr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:so,lastRenderedState:f}).dispatch=l=No.bind(null,Ja,e),c.queue=e,c.baseQueue=null,f=fo(i,t,n),c.memoizedState=c.baseState=f),f}function po(e,t,n){return ho(uo(),e,t,n)}function vo(e){var t=oo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:so,lastRenderedState:e}).dispatch=No.bind(null,Ja,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ja.updateQueue)?(t={lastEffect:null},Ja.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function mo(e){return e={current:e},oo().memoizedState=e}function go(){return uo().memoizedState}function ko(e,t,n,r){var i=oo();Ja.flags|=e,i.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==Za){var o=Za.memoizedState;if(a=o.destroy,null!==r&&io(r,o.deps))return void yo(t,n,a,r)}Ja.flags|=e,i.memoizedState=yo(1|t,n,a,r)}function wo(e,t){return ko(516,4,e,t)}function xo(e,t){return bo(516,4,e,t)}function _o(e,t){return bo(4,2,e,t)}function Io(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Eo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Io.bind(null,t,e),n)}function So(){}function To(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=zi();Gi(98>n?98:n,(function(){e(!0)})),Gi(97<n?97:n,(function(){var n=Ya.transition;Ya.transition=1;try{e(!1),t()}finally{Ya.transition=n}}))}function No(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Ja||null!==o&&o===Ja)no=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,cr(s,u))return}catch(c){}ps(e,i,r)}}var Do={readContext:aa,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},Oo={readContext:aa,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:aa,useEffect:wo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ko(4,2,Io.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ko(4,2,e,t)},useMemo:function(e,t){var n=oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=No.bind(null,Ja,e),[r.memoizedState,e]},useRef:mo,useState:vo,useDebugValue:So,useDeferredValue:function(e){var t=vo(e),n=t[0],r=t[1];return wo((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=vo(!1),t=e[0];return mo(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ho(r,e,t,n)},useOpaqueIdentifier:function(){if(Va){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($r++).toString(36))),Error(o(355))})),n=vo(t)[1];return 0===(2&Ja.mode)&&(Ja.flags|=516,yo(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),t}return vo(t="r:"+($r++).toString(36)),t},unstable_isNewReconciler:!1},Ro={readContext:aa,useCallback:To,useContext:aa,useEffect:xo,useImperativeHandle:Eo,useLayoutEffect:_o,useMemo:Co,useReducer:co,useRef:go,useState:function(){return co(so)},useDebugValue:So,useDeferredValue:function(e){var t=co(so),n=t[0],r=t[1];return xo((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=co(so)[0];return[go().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return co(so)[0]},unstable_isNewReconciler:!1},Po={readContext:aa,useCallback:To,useContext:aa,useEffect:xo,useImperativeHandle:Eo,useLayoutEffect:_o,useMemo:Co,useReducer:lo,useRef:go,useState:function(){return lo(so)},useDebugValue:So,useDeferredValue:function(e){var t=lo(so),n=t[0],r=t[1];return xo((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=lo(so)[0];return[go().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return lo(so)[0]},unstable_isNewReconciler:!1},Lo=w.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ea(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var a=t.ref;return ia(t,i),r=ao(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function jo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Gs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:fr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Ws(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,i,a){if(null!==e&&fr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Mo=!0)}return zo(e,t,n,r,a)}function Bo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return Fo(e,t,i,n),t.child}function qo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function zo(e,t,n,r,i){var a=yi(n)?pi:hi.current;return a=vi(t,a),ia(t,i),n=ao(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Ko(e,t,n,r,i){if(yi(n)){var a=!0;bi(t)}else a=!1;if(ia(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ga(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=aa(c):c=vi(t,c=yi(n)?pi:hi.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ka(t,o,r,c),oa=!1;var h=t.memoizedState;o.state=h,ha(t,r,o,i),s=t.memoizedState,u!==r||h!==s||di.current||oa?("function"===typeof l&&(va(t,n,l,r),s=t.memoizedState),(u=oa||ma(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,sa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Yi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=aa(s):s=vi(t,s=yi(n)?pi:hi.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ka(t,o,r,s),oa=!1,h=t.memoizedState,o.state=h,ha(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||di.current||oa?("function"===typeof d&&(va(t,n,d,r),p=t.memoizedState),(c=oa||ma(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Go(e,t,n,r,a,i)}function Go(e,t,n,r,i,a){qo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&wi(t,n,!1),au(e,t,a);r=t.stateNode,Lo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ea(t,e.child,null,a),t.child=Ea(t,null,u,a)):Fo(e,t,u,a),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function Wo(e){var t=e.stateNode;t.pendingContext?gi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gi(0,t.context,!1),Oa(e,t.containerInfo)}var Ho,Qo,$o,Yo,Xo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,a=Ma.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),li(Ma,1&a),null===e?(void 0!==i.fallback&&za(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=$s({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=$s(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Ws(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ws(o,u),null!==e?r=Ws(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ra(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ma.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(li(Ma,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ws(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ws(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Va)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&mi(),null;case 3:return Ra(),ci(di),ci(hi),Qa(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ga(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Qo(t),null;case 5:La(t);var a=Da(Na.current);if(n=t.type,null!==e&&null!=t.stateNode)$o(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Da(Ca.current),Ga(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Xr]=t,r[Jr]=u,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Er.length;e++)Ar(Er[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,u),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Ar("invalid",r);break;case"textarea":se(r,u),Ar("invalid",r)}for(var c in _e(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":Y(r),re(r,u,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe.html&&(e=he(n)),e===fe.html?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Jr]=r,Ho(e,t,!1,!1),t.stateNode=e,c=Ie(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),a=r;break;case"iframe":case"object":case"embed":Ar("load",e),a=r;break;case"video":case"audio":for(a=0;a<Er.length;a++)Ar(Er[a],e);a=r;break;case"source":Ar("error",e),a=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),a=r;break;case"details":Ar("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Ar("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Ar("invalid",e);break;default:a=r}_e(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?we(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&me(e,f):"number"===typeof f&&me(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Ar("scroll",e):null!=f&&b(e,u,f,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=jr)}qr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Da(Na.current),Da(Ca.current),Ga(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return ci(Ma),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ga(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ma.current)?0===Uu&&(Uu=3):(0!==Uu&&3!==Uu||(Uu=4),null===Ru||0===(134217727&Bu)&&0===(134217727&qu)||gs(Ru,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Ra(),Qo(t),null===e&&Dr(t.stateNode.containerInfo),null;case 10:return na(t),null;case 19:if(ci(Ma),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Uu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fa(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return li(Ma,1&Ma.current|2),t.child}e=e.sibling}null!==r.tail&&qi()>Wu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Fa(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Va)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*qi()-r.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=qi(),n.sibling=null,t=Ma.current,li(Ma,u?1&t|2:1&t),n):null;case 23:case 24:return _s(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:yi(e.type)&&mi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ra(),ci(di),ci(hi),Qa(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return La(e),null;case 13:return ci(Ma),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(Ma),null;case 4:return Ra(),null;case 10:return na(e),null;case 23:case 24:return _s(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ho=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qo=function(){},$o=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Da(Ca.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(f in _e(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=ca(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yu||(Yu=!0,Xu=r),lu(0,t)},n}function du(e,t,n){(n=ca(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ju?Ju=new Set([this]):Ju.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vs(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Wr(t.stateNode.containerInfo))}throw Error(o(163))}function mu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&da(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}da(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&qr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(_i&&"function"===typeof _i.onCommitFiberUnmount)try{_i.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){Vs(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vs(t,a)}break;case 5:vu(t);break;case 4:Eu(e,t)}}function bu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function wu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(wu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(me(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||wu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_u(e,n,t):Iu(e,n,t)}function _u(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(_u(e,t,n),e=e.sibling;null!==e;)_u(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Eu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Su(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Jr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ie(e,i),t=Ie(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?we(n,s):"dangerouslySetInnerHTML"===u?ye(n,s):"children"===u?me(n,s):b(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Gu=qi(),gu(t.child,!0)),void Tu(t);case 19:return void Tu(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Tu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Au=Math.ceil,Nu=w.ReactCurrentDispatcher,Du=w.ReactCurrentOwner,Ou=0,Ru=null,Pu=null,Lu=0,Mu=0,Fu=si(0),Uu=0,ju=null,Vu=0,Bu=0,qu=0,zu=0,Ku=null,Gu=0,Wu=1/0;function Hu(){Wu=qi()+500}var Qu,$u=null,Yu=!1,Xu=null,Ju=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Ou)?qi():-1!==us?us:us=qi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===zi()?1:2;if(0===ss&&(ss=Vu),0!==$i.transition){0!==cs&&(cs=null!==Ku?Ku.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=zi(),0!==(4&Ou)&&98===e?e=jt(12,ss):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;qt(e,t,n),e===Ru&&(qu|=t,4===Uu&&gs(e,Lu));var r=zi();1===t?0!==(8&Ou)&&0===(48&Ou)?ks(e):(ys(e,n),0===Ou&&(Hu(),Hi())):(0===(4&Ou)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Ku=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-zt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Mt(c);var f=Lt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ft(e,e===Ru?Lu:0),t=Lt,0===r)null!==n&&(n!==Mi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Si(n)}15===t?(n=ks.bind(null,e),null===Ui?(Ui=[n],ji=Ei(Di,Qi)):Ui.push(n),n=Mi):14===t?n=Wi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Wi(n,ms.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ms(e){if(us=-1,cs=ss=0,0!==(48&Ou))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ft(e,e===Ru?Lu:0);if(0===n)return null;var r=n,i=Ou;Ou|=16;var a=Ss();for(Ru===e&&Lu===r||(Hu(),Is(e,r));;)try{As();break}catch(s){Es(e,s)}if(ta(),Nu.current=a,Ou=i,null!==Pu?r=0:(Ru=null,Lu=0,r=Uu),0!==(Vu&qu))Is(e,0);else if(0!==r){if(2===r&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Wr(e.containerInfo)),0!==(n=Ut(e))&&(r=Ts(e,n))),1===r)throw t=ju,Is(e,0),gs(e,n),ys(e,qi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Os(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Gu+500-qi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Kr(Os.bind(null,e),r);break}Os(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-zt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=qi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Au(n/1960))-n)){e.timeoutHandle=Kr(Os.bind(null,e),n);break}Os(e);break;default:throw Error(o(329))}}return ys(e,qi()),e.callbackNode===t?ms.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Ou))throw Error(o(327));if(Ls(),e===Ru&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ts(e,t);0!==(Vu&qu)&&(n=Ts(e,t=Ft(e,t)))}else n=Ts(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Wr(e.containerInfo)),0!==(t=Ut(e))&&(n=Ts(e,t))),1===n)throw n=ju,Is(e,0),gs(e,t),ys(e,qi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Os(e),ys(e,qi()),null}function bs(e,t){var n=Ou;Ou|=1;try{return e(t)}finally{0===(Ou=n)&&(Hu(),Hi())}}function ws(e,t){var n=Ou;Ou&=-2,Ou|=8;try{return e(t)}finally{0===(Ou=n)&&(Hu(),Hi())}}function xs(e,t){li(Fu,Mu),Mu|=t,Vu|=t}function _s(){Mu=Fu.current,ci(Fu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&mi();break;case 3:Ra(),ci(di),ci(hi),Qa();break;case 5:La(r);break;case 4:Ra();break;case 13:case 19:ci(Ma);break;case 10:na(r);break;case 23:case 24:_s()}n=n.return}Ru=e,Pu=Ws(e.current,null),Lu=Mu=Vu=t,Uu=0,ju=null,zu=qu=Bu=0}function Es(e,t){for(;;){var n=Pu;try{if(ta(),$a.current=Do,to){for(var r=Ja.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}to=!1}if(Xa=0,eo=Za=Ja=null,no=!1,Du.current=null,null===n||null===n.return){Uu=1,ju=t,Pu=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Ma.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=ca(-1,1);g.tag=2,la(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var b=Bs.bind(null,a,c,u);c.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((H(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Uu&&(Uu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,fa(h,hu(0,a,t));break e;case 1:a=s;var w=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Ju||!Ju.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,fa(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Ds(n)}catch(_){t=_,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function Ss(){var e=Nu.current;return Nu.current=Do,null===e?Do:e}function Ts(e,t){var n=Ou;Ou|=16;var r=Ss();for(Ru===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){Es(e,i)}if(ta(),Ou=n,Nu.current=r,null!==Pu)throw Error(o(261));return Ru=null,Lu=0,Uu}function Cs(){for(;null!==Pu;)Ns(Pu)}function As(){for(;null!==Pu&&!Ti();)Ns(Pu)}function Ns(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Ds(e):Pu=t,Du.current=null}function Ds(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Pu=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Pu=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Uu&&(Uu=5)}function Os(e){var t=zi();return Gi(99,Rs.bind(null,e,t)),null}function Rs(e,t){do{Ls()}while(null!==es);if(0!==(48&Ou))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-zt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Ru&&(Pu=Ru=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ou,Ou|=32,Du.current=null,Vr=Qt,yr(u=vr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(S){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;Br={focusedElem:u,selectionRange:s},Qt=!1,ls=null,fs=!1,$u=r;do{try{Ps()}catch(S){if(null===$u)throw Error(o(330));Vs($u,S),$u=$u.nextEffect}}while(null!==$u);ls=null,$u=r;do{try{for(u=e;null!==$u;){var k=$u.flags;if(16&k&&me($u.stateNode,""),128&k){var b=$u.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:xu($u),$u.flags&=-3;break;case 6:xu($u),$u.flags&=-3,Su($u.alternate,$u);break;case 1024:$u.flags&=-1025;break;case 1028:$u.flags&=-1025,Su($u.alternate,$u);break;case 4:Su($u.alternate,$u);break;case 8:Eu(u,s=$u);var x=s.alternate;bu(s),null!==x&&bu(x)}$u=$u.nextEffect}}catch(S){if(null===$u)throw Error(o(330));Vs($u,S),$u=$u.nextEffect}}while(null!==$u);if(w=Br,b=vr(),k=w.focusedElem,u=w.selectionRange,b!==k&&k&&k.ownerDocument&&pr(k.ownerDocument.documentElement,k)){null!==u&&yr(k)&&(b=u.start,void 0===(w=u.end)&&(w=b),"selectionStart"in k?(k.selectionStart=b,k.selectionEnd=Math.min(w,k.value.length)):(w=(b=k.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!w.extend&&x>u&&(s=u,u=x,x=s),s=dr(k,x),a=dr(k,u),s&&a&&(1!==w.rangeCount||w.anchorNode!==s.node||w.anchorOffset!==s.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(s.node,s.offset),w.removeAllRanges(),x>u?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=k;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<b.length;k++)(w=b[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Qt=!!Vr,Br=Vr=null,e.current=n,$u=r;do{try{for(k=e;null!==$u;){var _=$u.flags;if(36&_&&mu(k,$u.alternate,$u),128&_){b=void 0;var I=$u.ref;if(null!==I){var E=$u.stateNode;$u.tag,b=E,"function"===typeof I?I(b):I.current=b}}$u=$u.nextEffect}}catch(S){if(null===$u)throw Error(o(330));Vs($u,S),$u=$u.nextEffect}}while(null!==$u);$u=null,Fi(),Ou=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for($u=r;null!==$u;)t=$u.nextEffect,$u.nextEffect=null,8&$u.flags&&((_=$u).sibling=null,_.stateNode=null),$u=t;if(0===(r=e.pendingLanes)&&(Ju=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,_i&&"function"===typeof _i.onCommitFiberRoot)try{_i.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(S){}if(ys(e,qi()),Yu)throw Yu=!1,e=Xu,Xu=null,e;return 0!==(8&Ou)||Hi(),null}function Ps(){for(;null!==$u;){var e=$u.alternate;fs||null===ls||(0!==(8&$u.flags)?Ze($u,ls)&&(fs=!0):13===$u.tag&&Cu(e,$u)&&Ze($u,ls)&&(fs=!0));var t=$u.flags;0!==(256&t)&&yu(e,$u),0===(512&t)||Zu||(Zu=!0,Wi(97,(function(){return Ls(),null}))),$u=$u.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Gi(e,Us)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Wi(97,(function(){return Ls(),null})))}function Fs(e,t){rs.push(t,e),Zu||(Zu=!0,Wi(97,(function(){return Ls(),null})))}function Us(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Ou))throw Error(o(331));var t=Ou;Ou|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Ou=t,Hi(),!0}function js(e,t,n){la(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(qt(e,1,t),ys(e,t))}function Vs(e,t){if(3===e.tag)js(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){js(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ju||!Ju.has(r))){var i=du(n,e=cu(t,e),1);if(la(n,i),i=hs(),null!==(n=vs(n,1)))qt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ju||!Ju.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Lu&n)===n&&(4===Uu||3===Uu&&(62914560&Lu)===Lu&&500>qi()-Gu?Is(e,0):zu|=n),ys(e,t)}function qs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===zi()?1:2:(0===ss&&(ss=Vu),0===(t=Vt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(qt(e,t,n),ys(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new zs(e,t,n,r)}function Gs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ws(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Gs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case E:u=8,i|=1;break;case S:return(e=Ks(12,n,t,8|i)).elementType=S,e.type=S,e.lanes=a,e;case N:return(e=Ks(13,n,t,i)).type=N,e.elementType=N,e.lanes=a,e;case D:return(e=Ks(19,n,t,i)).elementType=D,e.lanes=a,e;case F:return $s(n,i,a,t);case U:return(e=Ks(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case C:u=9;break e;case A:u=11;break e;case O:u=14;break e;case R:u=16,r=null;break e;case P:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ks(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function $s(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=F,e.lanes=n,e}function Ys(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function Xs(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Js(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(yi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=ki(n,c,s);break e}}n=s}else n=fi;return null===t.context?t.context=n:t.pendingContext=n,(t=ca(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),la(i,t),ps(i,u,a),u}function ec(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nc(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function rc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Js(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[Zr]=n.current,Dr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ac(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=ec(o);u.call(e)}}Zs(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=ec(o);s.call(e)}}ws((function(){Zs(t,o,e,i)}))}return ec(o)}function oc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||di.current)Mo=!0;else{if(0===(n&r)){switch(Mo=!1,t.tag){case 3:Wo(t),Wa();break;case 5:Pa(t);break;case 1:yi(t.type)&&bi(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;li(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(li(Ma,1&Ma.current),null!==(t=au(e,t,n))?t.sibling:null);li(Ma,1&Ma.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),li(Ma,Ma.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return au(e,t,n)}Mo=0!==(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=vi(t,hi.current),ia(t,n),i=ao(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&va(t,r,u,e),i.updater=ya,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Go(null,t,r,!0,a,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Gs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===O)return 14}return 2}(i),e=Yi(i,e),a){case 0:t=zo(null,t,i,e,n);break e;case 1:t=Ko(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,Yi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,zo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Wo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,sa(e,t),ha(t,r,null,n),(r=t.memoizedState.element)===i)Wa(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(ja=Hr(t.stateNode.containerInfo.firstChild),Ua=t,a=Va=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Ha.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Wa();t=t.child}return t;case 5:return Pa(t),null===e&&za(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,zr(r,i)?u=null:null!==a&&zr(r,a)&&(t.flags|=16),qo(e,t),Fo(e,t,u,n),t.child;case 6:return null===e&&za(t),null;case 13:return Jo(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ea(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(li(Xi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=cr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!di.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=ca(-1,n&-n)).tag=2,la(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ra(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,ia(t,n),r=r(i=aa(i,a.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return a=Yi(i=t.type,t.pendingProps),jo(e,t,i,a=Yi(i.type,a),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,bi(t)):e=!1,ia(t,n),ga(t,r,i),ba(t,r,i,n),Go(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},rc.prototype.render=function(e){Zs(e,this._internalRoot,null,null)},rc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zs(null,e,null,(function(){t[Zr]=null}))},et=function(e){13===e.tag&&(ps(e,4,hs()),nc(e,4))},tt=function(e){13===e.tag&&(ps(e,67108864,hs()),nc(e,67108864))},nt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),nc(e,n)}},rt=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=bs,Re=function(e,t,n,r,i){var a=Ou;Ou|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Ou=a)&&(Hu(),Hi())}},Pe=function(){0===(49&Ou)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,qi())}))}Hi()}(),Ls())},Le=function(e,t){var n=Ou;Ou|=2;try{return e(t)}finally{0===(Ou=n)&&(Hu(),Hi())}};var uc={Events:[ni,ri,ii,Ne,De,Ls,{current:!1}]},sc={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cc={bundleType:sc.bundleType,version:sc.version,rendererPackageName:sc.rendererPackageName,rendererConfig:sc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:sc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{xi=lc.inject(cc),_i=lc}catch(ve){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=oc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ou;if(0!==(48&n))return e(t);Ou|=1;try{if(e)return Gi(99,e.bind(null,t))}finally{Ou=n,Hi()}},t.hydrate=function(e,t,n){if(!ic(t))throw Error(o(200));return ac(null,e,t,!0,n)},t.render=function(e,t,n){if(!ic(t))throw Error(o(200));return ac(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(o(40));return!!e._reactRootContainer&&(ws((function(){ac(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=bs,t.unstable_createPortal=function(e,t){return oc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ic(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ac(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},805:function(e,t,n){var r;r=function(e){return function(){var t={"./node_modules/css-mediaquery/index.js":function(e,t){"use strict";t.match=function(e,t){return u(e).some((function(e){var n=e.inverse,r="all"===e.type||t.type===e.type;if(r&&n||!r&&!n)return!1;var i=e.expressions.every((function(e){var n=e.feature,r=e.modifier,i=e.value,a=t[n];if(!a)return!1;switch(n){case"orientation":case"scan":return a.toLowerCase()===i.toLowerCase();case"width":case"height":case"device-width":case"device-height":i=l(i),a=l(a);break;case"resolution":i=c(i),a=c(a);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":i=s(i),a=s(a);break;case"grid":case"color":case"color-index":case"monochrome":i=parseInt(i,10)||1,a=parseInt(a,10)||0}switch(r){case"min":return a>=i;case"max":return a<=i;default:return a===i}}));return i&&!n||!i&&n}))},t.parse=u;var n=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,r=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,i=/^(?:(min|max)-)?(.+)/,a=/(em|rem|px|cm|mm|in|pt|pc)?$/,o=/(dpi|dpcm|dppx)?$/;function u(e){return e.split(",").map((function(e){var t=(e=e.trim()).match(n),a=t[1],o=t[2],u=t[3]||"",s={};return s.inverse=!!a&&"not"===a.toLowerCase(),s.type=o?o.toLowerCase():"all",u=u.match(/\([^\)]+\)/g)||[],s.expressions=u.map((function(e){var t=e.match(r),n=t[1].toLowerCase().match(i);return{modifier:n[1],feature:n[2],value:t[2]}})),s}))}function s(e){var t,n=Number(e);return n||(n=(t=e.match(/^(\d+)\s*\/\s*(\d+)$/))[1]/t[2]),n}function c(e){var t=parseFloat(e);switch(String(e).match(o)[1]){case"dpcm":return t/2.54;case"dppx":return 96*t;default:return t}}function l(e){var t=parseFloat(e);switch(String(e).match(a)[1]){case"em":case"rem":return 16*t;case"cm":return 96*t/2.54;case"mm":return 96*t/2.54/10;case"in":return 96*t;case"pt":return 72*t;case"pc":return 72*t/12;default:return t}}},"./node_modules/hyphenate-style-name/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=/[A-Z]/g,i=/^ms-/,a={};function o(e){return"-"+e.toLowerCase()}var u=function(e){if(a.hasOwnProperty(e))return a[e];var t=e.replace(r,o);return a[e]=i.test(t)?"-"+t:t}},"./node_modules/matchmediaquery/index.js":function(e,t,n){"use strict";var r=n("./node_modules/css-mediaquery/index.js").match,i="undefined"!==typeof window?window.matchMedia:null;function a(e,t,n){var a=this;if(i&&!n){var o=i.call(window,e);this.matches=o.matches,this.media=o.media,o.addListener(u)}else this.matches=r(e,t),this.media=e;function u(e){a.matches=e.matches,a.media=e.media}this.addListener=function(e){o&&o.addListener(e)},this.removeListener=function(e){o&&o.removeListener(e)},this.dispose=function(){o&&o.removeListener(u)}}e.exports=function(e,t,n){return new a(e,t,n)}},"./node_modules/object-assign/index.js":function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var a,o,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in a=Object(arguments[s]))n.call(a,c)&&(u[c]=a[c]);if(t){o=t(a);for(var l=0;l<o.length;l++)r.call(a,o[l])&&(u[o[l]]=a[o[l]])}}return u}},"./node_modules/prop-types/checkPropTypes.js":function(e,t,n){"use strict";var r=function(){},i=n("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),a={},o=n("./node_modules/prop-types/lib/has.js");function u(e,t,n,u,s){for(var c in e)if(o(e,c)){var l;try{if("function"!==typeof e[c]){var f=Error((u||"React class")+": "+n+" type `"+c+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[c]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw f.name="Invariant Violation",f}l=e[c](t,c,u,n,null,i)}catch(d){l=d}if(!l||l instanceof Error||r((u||"React class")+": type specification of "+n+" `"+c+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof l+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),l instanceof Error&&!(l.message in a)){a[l.message]=!0;var h=s?s():"";r("Failed "+n+" type: "+l.message+(null!=h?h:""))}}}r=function(e){var t="Warning: "+e;"undefined"!==typeof console&&console.error(t);try{throw new Error(t)}catch(n){}},u.resetWarningCache=function(){a={}},e.exports=u},"./node_modules/prop-types/factoryWithTypeCheckers.js":function(e,t,n){"use strict";var r=n("./node_modules/react-is/index.js"),i=n("./node_modules/object-assign/index.js"),a=n("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),o=n("./node_modules/prop-types/lib/has.js"),u=n("./node_modules/prop-types/checkPropTypes.js"),s=function(){};function c(){return null}s=function(e){var t="Warning: "+e;"undefined"!==typeof console&&console.error(t);try{throw new Error(t)}catch(n){}},e.exports=function(e,t){var n="function"===typeof Symbol&&Symbol.iterator,l="@@iterator",f="<<anonymous>>",h={array:y("array"),bigint:y("bigint"),bool:y("boolean"),func:y("function"),number:y("number"),object:y("object"),string:y("string"),symbol:y("symbol"),any:v(c),arrayOf:function(e){return v((function(t,n,r,i,o){if("function"!==typeof e)return new p("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var u=t[n];if(!Array.isArray(u))return new p("Invalid "+i+" `"+o+"` of type `"+k(u)+"` supplied to `"+r+"`, expected an array.");for(var s=0;s<u.length;s++){var c=e(u,s,r,i,o+"["+s+"]",a);if(c instanceof Error)return c}return null}))},element:v((function(t,n,r,i,a){var o=t[n];return e(o)?null:new p("Invalid "+i+" `"+a+"` of type `"+k(o)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:v((function(e,t,n,i,a){var o=e[t];return r.isValidElementType(o)?null:new p("Invalid "+i+" `"+a+"` of type `"+k(o)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return v((function(t,n,r,i,a){if(!(t[n]instanceof e)){var o=e.name||f;return new p("Invalid "+i+" `"+a+"` of type `"+((u=t[n]).constructor&&u.constructor.name?u.constructor.name:f)+"` supplied to `"+r+"`, expected instance of `"+o+"`.")}var u;return null}))},node:v((function(e,t,n,r,i){return g(e[t])?null:new p("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return v((function(t,n,r,i,u){if("function"!==typeof e)return new p("Property `"+u+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],c=k(s);if("object"!==c)return new p("Invalid "+i+" `"+u+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var l in s)if(o(s,l)){var f=e(s,l,r,i,u+"."+l,a);if(f instanceof Error)return f}return null}))},oneOf:function(e){return Array.isArray(e)?v((function(t,n,r,i,a){for(var o=t[n],u=0;u<e.length;u++)if(d(o,e[u]))return null;var s=JSON.stringify(e,(function(e,t){return"symbol"===b(t)?String(t):t}));return new p("Invalid "+i+" `"+a+"` of value `"+String(o)+"` supplied to `"+r+"`, expected one of "+s+".")})):(s(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),c)},oneOfType:function(e){if(!Array.isArray(e))return s("Invalid argument supplied to oneOfType, expected an instance of array."),c;for(var t=0;t<e.length;t++){var n=e[t];if("function"!==typeof n)return s("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+w(n)+" at index "+t+"."),c}return v((function(t,n,r,i,u){for(var s=[],c=0;c<e.length;c++){var l=(0,e[c])(t,n,r,i,u,a);if(null==l)return null;l.data&&o(l.data,"expectedType")&&s.push(l.data.expectedType)}return new p("Invalid "+i+" `"+u+"` supplied to `"+r+"`"+(s.length>0?", expected one of type ["+s.join(", ")+"]":"")+".")}))},shape:function(e){return v((function(t,n,r,i,o){var u=t[n],s=k(u);if("object"!==s)return new p("Invalid "+i+" `"+o+"` of type `"+s+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var l=e[c];if("function"!==typeof l)return m(r,i,o,c,b(l));var f=l(u,c,r,i,o+"."+c,a);if(f)return f}return null}))},exact:function(e){return v((function(t,n,r,u,s){var c=t[n],l=k(c);if("object"!==l)return new p("Invalid "+u+" `"+s+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");var f=i({},t[n],e);for(var h in f){var d=e[h];if(o(e,h)&&"function"!==typeof d)return m(r,u,s,h,b(d));if(!d)return new p("Invalid "+u+" `"+s+"` key `"+h+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var v=d(c,h,r,u,s+"."+h,a);if(v)return v}return null}))}};function d(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function p(e,t){this.message=e,this.data=t&&"object"===typeof t?t:{},this.stack=""}function v(e){var n={},r=0;function i(i,o,u,c,l,h,d){if(c=c||f,h=h||u,d!==a){if(t){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}if("undefined"!==typeof console){var y=c+":"+u;!n[y]&&r<3&&(s("You are manually calling a React.PropTypes validation function for the `"+h+"` prop on `"+c+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[y]=!0,r++)}}return null==o[u]?i?null===o[u]?new p("The "+l+" `"+h+"` is marked as required in `"+c+"`, but its value is `null`."):new p("The "+l+" `"+h+"` is marked as required in `"+c+"`, but its value is `undefined`."):null:e(o,u,c,l,h)}var o=i.bind(null,!1);return o.isRequired=i.bind(null,!0),o}function y(e){return v((function(t,n,r,i,a,o){var u=t[n];return k(u)!==e?new p("Invalid "+i+" `"+a+"` of type `"+b(u)+"` supplied to `"+r+"`, expected `"+e+"`.",{expectedType:e}):null}))}function m(e,t,n,r,i){return new p((e||"React class")+": "+t+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+i+"`.")}function g(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(g);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e[l]);if("function"===typeof t)return t}(t);if(!r)return!1;var i,a=r.call(t);if(r!==t.entries){for(;!(i=a.next()).done;)if(!g(i.value))return!1}else for(;!(i=a.next()).done;){var o=i.value;if(o&&!g(o[1]))return!1}return!0;default:return!1}}function k(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"===typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function b(e){if("undefined"===typeof e||null===e)return""+e;var t=k(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function w(e){var t=b(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return p.prototype=Error.prototype,h.checkPropTypes=u,h.resetWarningCache=u.resetWarningCache,h.PropTypes=h,h}},"./node_modules/prop-types/index.js":function(e,t,n){var r=n("./node_modules/react-is/index.js");e.exports=n("./node_modules/prop-types/factoryWithTypeCheckers.js")(r.isElement,!0)},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"./node_modules/prop-types/lib/has.js":function(e){e.exports=Function.call.bind(Object.prototype.hasOwnProperty)},"./node_modules/react-is/cjs/react-is.development.js":function(e,t){"use strict";!function(){var e="function"===typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,u=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,l=e?Symbol.for("react.concurrent_mode"):60111,f=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,d=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,y=e?Symbol.for("react.block"):60121,m=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,k=e?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var d=e.type;switch(d){case c:case l:case i:case o:case a:case h:return d;default:var y=d&&d.$$typeof;switch(y){case s:case f:case v:case p:case u:return y;default:return t}}case r:return t}}}var w=c,x=l,_=s,I=u,E=n,S=f,T=i,C=v,A=p,N=r,D=o,O=a,R=h,P=!1;function L(e){return b(e)===l}t.AsyncMode=w,t.ConcurrentMode=x,t.ContextConsumer=_,t.ContextProvider=I,t.Element=E,t.ForwardRef=S,t.Fragment=T,t.Lazy=C,t.Memo=A,t.Portal=N,t.Profiler=D,t.StrictMode=O,t.Suspense=R,t.isAsyncMode=function(e){return P||(P=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),L(e)||b(e)===c},t.isConcurrentMode=L,t.isContextConsumer=function(e){return b(e)===s},t.isContextProvider=function(e){return b(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return b(e)===f},t.isFragment=function(e){return b(e)===i},t.isLazy=function(e){return b(e)===v},t.isMemo=function(e){return b(e)===p},t.isPortal=function(e){return b(e)===r},t.isProfiler=function(e){return b(e)===o},t.isStrictMode=function(e){return b(e)===a},t.isSuspense=function(e){return b(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===l||e===o||e===a||e===h||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===p||e.$$typeof===u||e.$$typeof===s||e.$$typeof===f||e.$$typeof===m||e.$$typeof===g||e.$$typeof===k||e.$$typeof===y)},t.typeOf=b}()},"./node_modules/react-is/index.js":function(e,t,n){"use strict";e.exports=n("./node_modules/react-is/cjs/react-is.development.js")},"./node_modules/shallow-equal/dist/index.esm.js":function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),i=n.length;if(r.length!==i)return!1;for(var a=0;a<i;a++){var o=n[a];if(e[o]!==t[o]||!Object.prototype.hasOwnProperty.call(t,o))return!1}return!0}function i(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}n.r(t),n.d(t,{shallowEqualArrays:function(){return i},shallowEqualObjects:function(){return r}})},"./src/Component.ts":function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("./src/useMediaQuery.ts"));t.default=function(e){var t=e.children,n=e.device,i=e.onChange,o=r(e,["children","device","onChange"]),u=(0,a.default)(o,n,i);return"function"===typeof t?t(u):u?t:null}},"./src/Context.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n("react").createContext)(void 0);t.default=r},"./src/index.ts":function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Context=t.toQuery=t.useMediaQuery=t.default=void 0;var i=r(n("./src/useMediaQuery.ts"));t.useMediaQuery=i.default;var a=r(n("./src/Component.ts"));t.default=a.default;var o=r(n("./src/toQuery.ts"));t.toQuery=o.default;var u=r(n("./src/Context.ts"));t.Context=u.default},"./src/mediaQuery.ts":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n("./node_modules/prop-types/index.js")),u=o.default.oneOfType([o.default.string,o.default.number]),s={all:o.default.bool,grid:o.default.bool,aural:o.default.bool,braille:o.default.bool,handheld:o.default.bool,print:o.default.bool,projection:o.default.bool,screen:o.default.bool,tty:o.default.bool,tv:o.default.bool,embossed:o.default.bool},c={orientation:o.default.oneOf(["portrait","landscape"]),scan:o.default.oneOf(["progressive","interlace"]),aspectRatio:o.default.string,deviceAspectRatio:o.default.string,height:u,deviceHeight:u,width:u,deviceWidth:u,color:o.default.bool,colorIndex:o.default.bool,monochrome:o.default.bool,resolution:u,type:Object.keys(s)},l=i(c,["type"]),f=r({minAspectRatio:o.default.string,maxAspectRatio:o.default.string,minDeviceAspectRatio:o.default.string,maxDeviceAspectRatio:o.default.string,minHeight:u,maxHeight:u,minDeviceHeight:u,maxDeviceHeight:u,minWidth:u,maxWidth:u,minDeviceWidth:u,maxDeviceWidth:u,minColor:o.default.number,maxColor:o.default.number,minColorIndex:o.default.number,maxColorIndex:o.default.number,minMonochrome:o.default.number,maxMonochrome:o.default.number,minResolution:u,maxResolution:u},l),h=r(r({},s),f);t.default={all:h,types:s,matchers:c,features:f}},"./src/toQuery.ts":function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("./node_modules/hyphenate-style-name/index.js")),a=r(n("./src/mediaQuery.ts"));t.default=function(e){var t=[];return Object.keys(a.default.all).forEach((function(n){var r=e[n];null!=r&&t.push(function(e,t){var n=(0,i.default)(e);return"number"===typeof t&&(t="".concat(t,"px")),!0===t?n:!1===t?"not ".concat(n):"(".concat(n,": ").concat(t,")")}(n,r))})),t.join(" and ")}},"./src/useMediaQuery.ts":function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n("react"),a=r(n("./node_modules/matchmediaquery/index.js")),o=r(n("./node_modules/hyphenate-style-name/index.js")),u=n("./node_modules/shallow-equal/dist/index.esm.js"),s=r(n("./src/toQuery.ts")),c=r(n("./src/Context.ts")),l=function(e){if(e)return Object.keys(e).reduce((function(t,n){return t[(0,o.default)(n)]=e[n],t}),{})},f=function(){var e=(0,i.useRef)(!1);return(0,i.useEffect)((function(){e.current=!0}),[]),e.current},h=function(e){var t=function(){return function(e){return e.query||(0,s.default)(e)}(e)},n=(0,i.useState)(t),r=n[0],a=n[1];return(0,i.useEffect)((function(){var e=t();r!==e&&a(e)}),[e]),r};t.default=function(e,t,n){var r=function(e){var t=(0,i.useContext)(c.default),n=function(){return l(e)||l(t)},r=(0,i.useState)(n),a=r[0],o=r[1];return(0,i.useEffect)((function(){var e=n();(0,u.shallowEqualObjects)(a,e)||o(e)}),[e,t]),a}(t),o=h(e);if(!o)throw new Error("Invalid or missing MediaQuery!");var s=function(e,t){var n=function(){return(0,a.default)(e,t||{},!!t)},r=(0,i.useState)(n),o=r[0],u=r[1],s=f();return(0,i.useEffect)((function(){if(s){var e=n();return u(e),function(){e&&e.dispose()}}}),[e,t]),o}(o,r),d=function(e){var t=(0,i.useState)(e.matches),n=t[0],r=t[1];return(0,i.useEffect)((function(){var t=function(e){r(e.matches)};return e.addListener(t),r(e.matches),function(){e.removeListener(t)}}),[e]),n}(s),p=f();return(0,i.useEffect)((function(){p&&n&&n(d)}),[d]),(0,i.useEffect)((function(){return function(){s&&s.dispose()}}),[]),d}},react:function(t){"use strict";t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}};return t[e].call(a.exports,a,a.exports,r),a.exports}return r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r("./src/index.ts")}()},e.exports=r(n(791))},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:b.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+S(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),T(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+S(u=e[c],c);s+=T(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,n,l=r+S(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function D(){var e=N.current;if(null===e)throw Error(d(321));return e}var O={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?w.postMessage(null):(v=!1,y=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,w.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function _(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],T=[],C=1,A=null,N=3,D=!1,O=!1,R=!1;function P(e){for(var t=_(T);null!==t;){if(null===t.callback)I(T);else{if(!(t.startTime<=e))break;I(T),t.sortIndex=t.expirationTime,x(S,t)}t=_(T)}}function L(e){if(R=!1,P(e),!O)if(null!==_(S))O=!0,n(M);else{var t=_(T);null!==t&&r(L,t.startTime-e)}}function M(e,n){O=!1,R&&(R=!1,i()),D=!0;var a=N;try{for(P(n),A=_(S);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,N=A.priorityLevel;var u=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?A.callback=u:A===_(S)&&I(S),P(n)}else I(S);A=_(S)}if(null!==A)var s=!0;else{var c=_(T);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{A=null,N=a,D=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||D||(O=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return _(S)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(T,e),null===_(S)&&e===_(T)&&(R?i():R=!0,r(L,o-u))):(e.sortIndex=s,x(S,e),O||D||(O=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/80years/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return dt},SDK_VERSION:function(){return En},_DEFAULT_ENTRY_NAME:function(){return hn},_addComponent:function(){return yn},_addOrOverwriteComponent:function(){return mn},_apps:function(){return pn},_clearComponents:function(){return wn},_components:function(){return vn},_getProvider:function(){return kn},_registerComponent:function(){return gn},_removeServiceInstance:function(){return bn},deleteApp:function(){return An},getApp:function(){return Tn},getApps:function(){return Cn},initializeApp:function(){return Sn},onLog:function(){return On},registerVersion:function(){return Dn},setLogLevel:function(){return Rn}});var t=n(791),r=n(164);function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}var o=n(7),u=n.n(o);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function c(e){return"/"===e.charAt(0)}function l(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var f=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&c(e),o=t&&c(t),u=a||o;if(e&&c(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var f=0,h=i.length;h>=0;h--){var d=i[h];"."===d?l(i,h):".."===d?(l(i,h),f++):f&&(l(i,h),f--)}if(!u)for(;f--;f)i.unshift("..");!u||""===i[0]||i[0]&&c(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p},h=!0,d="Invariant failed";function p(e,t){if(!e){if(h)throw new Error(d);var n="function"===typeof t?t():t,r=n?"".concat(d,": ").concat(n):d;throw new Error(r)}}function v(e){return"/"===e.charAt(0)?e:"/"+e}function y(e){return"/"===e.charAt(0)?e.substr(1):e}function m(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function g(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function k(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function b(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=s({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=f(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function w(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var x=!("undefined"===typeof window||!window.document||!window.document.createElement);function _(e,t){t(window.confirm(e))}var I="popstate",E="hashchange";function S(){try{return window.history.state||{}}catch(e){return{}}}function T(e){void 0===e&&{},x||p(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,c=void 0===u?_:u,l=i.keyLength,f=void 0===l?6:l,h=e.basename?g(v(e.basename)):"";function d(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return h&&m(a,h),b(a,r,n)}function y(){return Math.random().toString(36).substr(2,f)}var T=w();function C(e){s(V,e),V.length=t.length,T.notifyListeners(V.location,V.action)}function A(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||O(d(e.state))}function N(){O(d(S()))}var D=!1;function O(e){if(D)!1,C();else{T.confirmTransitionTo(e,"POP",c,(function(t){t?C({action:"POP",location:e}):function(e){var t=V.location,n=P.indexOf(t.key);-1===n&&0;var r=P.indexOf(e.key);-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}var R=d(S()),P=[R.key];function L(e){return h+k(e)}function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?(window.addEventListener(I,A),r&&window.addEventListener(E,N)):0===F&&(window.removeEventListener(I,A),r&&window.removeEventListener(E,N))}var j=!1;var V={length:t.length,action:"POP",location:R,createHref:L,push:function(e,r){var i="PUSH",a=b(e,r,y(),V.location);T.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=P.indexOf(V.location.key),l=P.slice(0,c+1);l.push(a.key),l,C({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=b(e,r,y(),V.location);T.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=P.indexOf(V.location.key);-1!==c&&(P[c]=a.key),C({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=T.setPrompt(e);return j||(U(1),!0),function(){return j&&(!1,U(-1)),t()}},listen:function(e){var t=T.appendListener(e);return U(1),function(){U(-1),t()}}};return V}var C="hashchange",A={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+y(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:y,decodePath:v},slash:{encodePath:v,decodePath:v}};function N(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function D(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function O(e){window.location.replace(N(window.location.href)+"#"+e)}function R(e){void 0===e&&(e={}),x||p(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?_:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?g(v(e.basename)):"",c=A[o],l=c.encodePath,f=c.decodePath;function h(){var e=f(D());return u&&(e=m(e,u)),b(e)}var d=w();function y(e){s(V,e),V.length=t.length,d.notifyListeners(V.location,V.action)}var I=!1,E=null;function S(){var e=D(),t=l(e);if(e!==t)O(t);else{var n=h(),r=V.location;if(!I&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(E===k(n))return;E=null,function(e){if(I)I=!1,y();else{var t="POP";d.confirmTransitionTo(e,t,i,(function(n){n?y({action:t,location:e}):function(e){var t=V.location,n=L.lastIndexOf(k(t));-1===n&&(n=0);var r=L.lastIndexOf(k(e));-1===r&&(r=0);var i=n-r;i&&(I=!0,M(i))}(e)}))}}(n)}}var T=D(),R=l(T);T!==R&&O(R);var P=h(),L=[k(P)];function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?window.addEventListener(C,S):0===F&&window.removeEventListener(C,S)}var j=!1;var V={length:t.length,action:"POP",location:P,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=N(window.location.href)),n+"#"+l(u+k(e))},push:function(e,t){var n="PUSH",r=b(e,void 0,void 0,V.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=k(r),i=l(u+t);if(D()!==i){E=t,function(e){window.location.hash=e}(i);var a=L.lastIndexOf(k(V.location)),o=L.slice(0,a+1);o.push(t),L=o,y({action:n,location:r})}else y()}}))},replace:function(e,t){var n="REPLACE",r=b(e,void 0,void 0,V.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=k(r),i=l(u+t);D()!==i&&(E=t,O(i));var a=L.indexOf(k(V.location));-1!==a&&(L[a]=t),y({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=d.setPrompt(e);return j||(U(1),j=!0),function(){return j&&(j=!1,U(-1)),t()}},listen:function(e){var t=d.appendListener(e);return U(1),function(){U(-1),t()}}};return V}function P(e,t,n){return Math.min(Math.max(e,t),n)}var L=n(151),M=n.n(L);n(228);function F(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(110);var U=1073741823,j="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var V=t.createContext||function(e,n){var r,i,o="__create-react-context-"+function(){var e="__global_unique_id__";return j[e]=(j[e]||0)+1}()+"__",s=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}a(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):U,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);s.childContextTypes=((r={})[o]=u().object.isRequired,r);var c=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}a(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?U:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?U:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return c.contextTypes=((i={})[o]=u().object,i),{Provider:s,Consumer:c}},B=function(e){var t=V();return t.displayName=e,t},q=B("Router-History"),z=B("Router"),K=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}a(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement(z.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(q.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var G={},W=1e4,H=0;function Q(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=G[n]||(G[n]={});if(r[e])return r[e];var i=[],a={regexp:M()(e,i,t),keys:i};return H<W&&(r[e]=a,H++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var $=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(z.Consumer,null,(function(n){n||p(!1);var r=e.props.location||n.location,i=s({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?Q(r.pathname,e.props):n.match}),a=e.props,o=a.children,u=a.component,c=a.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(z.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:u?t.createElement(u,i):c?c(i):null:"function"===typeof o?o(i):null)}))},n}(t.Component);function Y(e){return"/"===e.charAt(0)?e:"/"+e}function X(e,t){if(!e)return t;var n=Y(e);return 0!==t.pathname.indexOf(n)?t:s({},t,{pathname:t.pathname.substr(n.length)})}function J(e){return"string"===typeof e?e:k(e)}function Z(e){return function(){p(!1)}}function ee(){}t.Component;var te=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(z.Consumer,null,(function(n){n||p(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?Q(a.pathname,s({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);var ne=t.useContext;function re(){return ne(q)}t.Component;var ie=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=R(t.props),t}return a(n,e),n.prototype.render=function(){return t.createElement(K,{history:this.history,children:this.props.children})},n}(t.Component);var ae=function(e,t){return"function"===typeof e?e(t):e},oe=function(e,t){return"string"===typeof e?b(e,null,null,t):e},ue=function(e){return e},se=t.forwardRef;"undefined"===typeof se&&(se=ue);var ce=se((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=F(e,["innerRef","navigate","onClick"]),u=o.target,c=s({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return c.ref=ue!==se&&n||r,t.createElement("a",c)}));var le=se((function(e,n){var r=e.component,i=void 0===r?ce:r,a=e.replace,o=e.to,u=e.innerRef,c=F(e,["component","replace","to","innerRef"]);return t.createElement(z.Consumer,null,(function(e){e||p(!1);var r=e.history,l=oe(ae(o,e.location),e.location),f=l?r.createHref(l):"",h=s({},c,{href:f,navigate:function(){var t=ae(o,e.location),n=k(e.location)===k(oe(t));(a||n?r.replace:r.push)(t)}});return ue!==se?h.ref=n||u:h.innerRef=u,t.createElement(i,h)}))})),fe=function(e){return e},he=t.forwardRef;"undefined"===typeof he&&(he=fe);var de=he((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,o=void 0===a?"active":a,u=e.activeStyle,c=e.className,l=e.exact,f=e.isActive,h=e.location,d=e.sensitive,v=e.strict,y=e.style,m=e.to,g=e.innerRef,k=F(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(z.Consumer,null,(function(e){e||p(!1);var r=h||e.location,a=oe(ae(m,r),r),b=a.pathname,w=b&&b.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),x=w?Q(r.pathname,{path:w,exact:l,sensitive:d,strict:v}):null,_=!!(f?f(x,r):x),I="function"===typeof c?c(_):c,E="function"===typeof y?y(_):y;_&&(I=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(I,o),E=s({},E,u));var S=s({"aria-current":_&&i||null,className:I,style:E,to:a},k);return fe!==he?S.ref=n||g:S.innerRef=g,t.createElement(le,S)}))}));function pe(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ye(){ye=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new E(i||[]);return r(o,"_invoke",{value:w(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==t&&n.call(m,a)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==ve(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function me(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){me(a,r,i,o,u,"next",e)}function u(e){me(a,r,i,o,u,"throw",e)}o(void 0)}))}}function ke(e){if(Array.isArray(e))return e}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function we(e,t){if(e){if("string"===typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?be(e,t):void 0}}function xe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _e(e,t){return ke(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||we(e,t)||xe()}var Ie=n(694),Ee=n.n(Ie),Se=n(184),Te=function(e){var t=e.checked,n=e.onChange,r=e.icons,i=void 0===r?{checked:"\u263c",unchecked:"\u263e"}:r,a=e.ariaLabel,o=e.toggleLabel,u=e.toggleClassname;return(0,Se.jsxs)("label",{className:Ee()("toggle",u),children:[(0,Se.jsx)("input",{onChange:n,"aria-label":a,className:"toggle__input",type:"checkbox",checked:t}),(null===o||void 0===o?void 0:o.length)>0&&(0,Se.jsx)("span",{className:"toggle__label",children:o}),(0,Se.jsxs)("span",{className:"toggle__container",children:["undefined"!==typeof(null===i||void 0===i?void 0:i.checked)&&(0,Se.jsx)("span",{className:"toggle__icon",children:i.checked}),(0,Se.jsx)("span",{className:"toggle__slider"}),"undefined"!==typeof(null===i||void 0===i?void 0:i.unchecked)&&(0,Se.jsx)("span",{className:"toggle__icon",children:i.unchecked})]})]})},Ce=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"small",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=function(){return"large"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"large")}(n)?"action--large":function(){return"responsive"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"responsive")}(n)?"action--responsive":"",a=function(){return!0===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])}(r)?"action--disabled":"";switch(t){case"primary":e="action--primary";break;case"secondary":e="action--secondary";break;case"third":e="action--third";break;default:e=""}return Ee()(i,e,a)},Ae=function(e){return e.length>0},Ne=function(e){var t=e.label,n=e.type,r=e.variant,i=void 0===r?"default":r,a=e.size,o=void 0===a?"small":a,u=e.disabled,s=void 0!==u&&u,c=e.icon,l=e.onClick,f=e.buttonClassName,h=void 0===f?"":f,d=e.link,p=void 0===d?"":d;return(0,Se.jsx)(Se.Fragment,{children:Ae(p)?(0,Se.jsxs)(de,{className:Ee()("action",h,Ce(i,o,s)),type:n,to:p,style:s?{pointerEvents:"none"}:null,children:[t,void 0!==c&&c]}):(0,Se.jsxs)("button",{className:Ee()("action",h,Ce(i,o,s)),type:n,disabled:s,onClick:l,children:[t,void 0!==c&&c]})})},De=n(805);var Oe={},Re=function(e,t,n){return Oe[e]||(Oe[e]={callbacks:[],value:n}),Oe[e].callbacks.push(t),{deregister:function(){var n=Oe[e].callbacks,r=n.indexOf(t);r>-1&&n.splice(r,1)},emit:function(n){Oe[e].value!==n&&(Oe[e].value=n,Oe[e].callbacks.forEach((function(e){t!==e&&e(n)})))}}};var Pe=function(e,r){if(void 0===r&&(r="undefined"!=typeof n.g&&n.g.localStorage?n.g.localStorage:"undefined"!=typeof globalThis&&globalThis.localStorage?globalThis.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:"undefined"!=typeof localStorage?localStorage:null),r){var i=(a=r,{get:function(e,t){var n=a.getItem(e);return null==n?"function"==typeof t?t():t:JSON.parse(n)},set:function(e,t){a.setItem(e,JSON.stringify(t))}});return function(r){return function(e,r,i){var a=i.get,o=i.set,u=(0,t.useRef)(null),s=(0,t.useState)((function(){return a(r,e)})),c=s[0],l=s[1];(function(e,r,i,a){void 0===i&&(i=n.g),void 0===a&&(a={});var o=(0,t.useRef)(),u=a.capture,s=a.passive,c=a.once;(0,t.useEffect)((function(){o.current=r}),[r]),(0,t.useEffect)((function(){if(i&&i.addEventListener){var t=function(e){return o.current(e)},n={capture:u,passive:s,once:c};return i.addEventListener(e,t,n),function(){i.removeEventListener(e,t,n)}}}),[e,i,u,s,c])})("storage",(function(e){if(e.key===r){var t=JSON.parse(e.newValue);c!==t&&l(t)}})),(0,t.useEffect)((function(){return u.current=Re(r,l,e),function(){u.current.deregister()}}),[e,r]);var f=(0,t.useCallback)((function(e){var t="function"==typeof e?e(c):e;o(r,t),l(t),u.current.emit(e)}),[c,o,r]);return[c,f]}(r,e,i)}}var a;return t.useState}("colorSchemeDark");var Le=function(e){var n=function(e){return"undefined"!==typeof window&&window.matchMedia(e).matches},r=_e((0,t.useState)(n(e)),2),i=r[0],a=r[1];function o(){a(n(e))}return(0,t.useEffect)((function(){var t=window.matchMedia(e);return o(),t.addEventListener("change",o),function(){t.removeEventListener("change",o)}}),[e]),i};function Me(e){var t=function(e,t){if("object"!==ve(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ve(t)?t:String(t)}function Fe(e,t,n){return(t=Me(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Me(r.key),r)}}function Ve(e,t,n){return t&&je(e.prototype,t),n&&je(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Be(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=we(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ke(e)}function Ge(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function We(e){var t=Ge();return function(){var n,r=Ke(e);if(t){var i=Ke(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ve(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qe(e)}(this,n)}}function He(e,t,n){return He=Ge()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&i(a,n.prototype),a},He.apply(null,arguments)}function Qe(e){var t="function"===typeof Map?new Map:void 0;return Qe=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return He(e,arguments,Ke(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)},Qe(e)}var $e=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray($e(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new Xe;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Xe=function(e){ze(n,e);var t=We(n);function n(){var e;return Ue(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return Ve(n)}(Qe(Error)),Je=function(e){return function(e){var t=$e(e);return Ye.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ze=function(e){try{return Ye.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function et(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&tt(n)&&(e[n]=et(e[n],t[n]));return e}function tt(e){return"__proto__"!==e}var nt=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},rt=function(){try{return nt()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/80years",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyC4ovC2q_c5LvL4kpIxB_WWy_28bhhV6tw",REACT_APP_AUTH_DOMAIN:"yearsapp-262dd.firebaseapp.com",REACT_APP_PROJECT_ID:"yearsapp-262dd",REACT_APP_STORAGE_BUCKET:"yearsapp-262dd.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"384872258672",REACT_APP_ID:"1:384872258672:web:4a48090fb0a6a1dca4e8b5",REACT_APP_MEASUREMENT_ID:"G-VJ52PCD2LB"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Ze(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},it=function(e){var t=function(e){var t,n;return null===(n=null===(t=rt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},at=function(){var e;return null===(e=rt())||void 0===e?void 0:e.config},ot=function(){function e(){var t=this;Ue(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ve(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ut(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function st(){var e,t=null===(e=rt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function ct(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function lt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ft(){var e=ut();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ht(){try{return"object"===typeof indexedDB}catch(e){return!1}}var dt=function(e){ze(n,e);var t=We(n);function n(e,r,i){var a;return Ue(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(qe(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(qe(a),pt.prototype.create),a}return Ve(n)}(Qe(Error)),pt=function(){function e(t,n,r){Ue(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ve(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(vt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new dt(n,a,t)}}]),e}();var vt=/\{\$([^}]+)}/g;function yt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function mt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(gt(u)&&gt(s)){if(!mt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function gt(e){return null!==e&&"object"===typeof e}function kt(e){for(var t=[],n=function(){var e=_e(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function bt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=_e(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function wt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function xt(e,t){var n=new _t(e,t);return n.subscribe.bind(n)}var _t=function(){function e(t,n){var r=this;Ue(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ve(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Be(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=It),void 0===r.error&&(r.error=It),void 0===r.complete&&(r.complete=It);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function It(){}function Et(e){return e&&e._delegate?e._delegate:e}function St(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Tt(e){return function(e){if(Array.isArray(e))return be(e)}(e)||St(e)||we(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ct=function(){function e(t,n,r){Ue(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ve(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),At="[DEFAULT]",Nt=function(){function e(t,n){Ue(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ve(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ot;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:At})}catch(s){}var t,n=Be(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=_e(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ge(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Tt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Tt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Be(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=_e(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Be(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(RI){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===At?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(RI){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At;return this.component?this.component.multipleInstances?e:At:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Dt,Ot,Rt=function(){function e(t){Ue(this,e),this.name=t,this.providers=new Map}return Ve(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Nt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Pt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ot||(Ot={}));var Lt={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},Mt=Ot.INFO,Ft=(Fe(Dt={},Ot.DEBUG,"log"),Fe(Dt,Ot.VERBOSE,"log"),Fe(Dt,Ot.INFO,"info"),Fe(Dt,Ot.WARN,"warn"),Fe(Dt,Ot.ERROR,"error"),Dt),Ut=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ft[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},jt=function(){function e(t){Ue(this,e),this.name=t,this._logLevel=Mt,this._logHandler=Ut,this._userLogHandler=null,Pt.push(this)}return Ve(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ot))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Lt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ot.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ot.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.INFO].concat(t)),this._logHandler.apply(this,[this,Ot.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.WARN].concat(t)),this._logHandler.apply(this,[this,Ot.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ot.ERROR].concat(t)),this._logHandler.apply(this,[this,Ot.ERROR].concat(t))}}]),e}();function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){Fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qt,zt,Kt=function(e,t){return t.some((function(t){return e instanceof t}))};var Gt=new WeakMap,Wt=new WeakMap,Ht=new WeakMap,Qt=new WeakMap,$t=new WeakMap;var Yt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Wt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ht.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Xt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(zt||(zt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(en(this),n),Zt(Gt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zt(e.apply(en(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[en(this),t].concat(r));return Ht.set(a,t.sort?t.sort():[t]),Zt(a)}}function Jt(e){return"function"===typeof e?Xt(e):(e instanceof IDBTransaction&&function(e){if(!Wt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Wt.set(e,t)}}(e),Kt(e,qt||(qt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Yt):e)}function Zt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Zt(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Gt.set(t,e)})).catch((function(){})),$t.set(t,e),t}(e);if(Qt.has(e))return Qt.get(e);var t=Jt(e);return t!==e&&(Qt.set(e,t),$t.set(t,e)),t}var en=function(e){return $t.get(e)};var tn,nn,rn=["get","getKey","getAll","getAllKeys","count"],an=["put","add","delete","clear"],on=new Map;function un(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(on.get(t))return on.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=an.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||rn.includes(n))){var a=function(){var e=ge(ye().mark((function e(t){var a,o,u,s,c,l,f=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return on.set(t,a),a}}}Yt=function(e){return Bt(Bt({},e),{},{get:function(t,n,r){return un(t,n)||e.get(t,n,r)},has:function(t,n){return!!un(t,n)||e.has(t,n)}})}(Yt);var sn=function(){function e(t){Ue(this,e),this.container=t}return Ve(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var cn="@firebase/app",ln="0.9.5",fn=new jt("@firebase/app"),hn="[DEFAULT]",dn=(Fe(tn={},cn,"fire-core"),Fe(tn,"@firebase/app-compat","fire-core-compat"),Fe(tn,"@firebase/analytics","fire-analytics"),Fe(tn,"@firebase/analytics-compat","fire-analytics-compat"),Fe(tn,"@firebase/app-check","fire-app-check"),Fe(tn,"@firebase/app-check-compat","fire-app-check-compat"),Fe(tn,"@firebase/auth","fire-auth"),Fe(tn,"@firebase/auth-compat","fire-auth-compat"),Fe(tn,"@firebase/database","fire-rtdb"),Fe(tn,"@firebase/database-compat","fire-rtdb-compat"),Fe(tn,"@firebase/functions","fire-fn"),Fe(tn,"@firebase/functions-compat","fire-fn-compat"),Fe(tn,"@firebase/installations","fire-iid"),Fe(tn,"@firebase/installations-compat","fire-iid-compat"),Fe(tn,"@firebase/messaging","fire-fcm"),Fe(tn,"@firebase/messaging-compat","fire-fcm-compat"),Fe(tn,"@firebase/performance","fire-perf"),Fe(tn,"@firebase/performance-compat","fire-perf-compat"),Fe(tn,"@firebase/remote-config","fire-rc"),Fe(tn,"@firebase/remote-config-compat","fire-rc-compat"),Fe(tn,"@firebase/storage","fire-gcs"),Fe(tn,"@firebase/storage-compat","fire-gcs-compat"),Fe(tn,"@firebase/firestore","fire-fst"),Fe(tn,"@firebase/firestore-compat","fire-fst-compat"),Fe(tn,"fire-js","fire-js"),Fe(tn,"firebase","fire-js-all"),tn),pn=new Map,vn=new Map;function yn(e,t){try{e.container.addComponent(t)}catch(n){fn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function mn(e,t){e.container.addOrOverwriteComponent(t)}function gn(e){var t=e.name;if(vn.has(t))return fn.debug("There were multiple attempts to register component ".concat(t,".")),!1;vn.set(t,e);var n,r=Be(pn.values());try{for(r.s();!(n=r.n()).done;){yn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function kn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function bn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hn;kn(e,t).clearInstance(n)}function wn(){vn.clear()}var xn=(Fe(nn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Fe(nn,"bad-app-name","Illegal App name: '{$appName}"),Fe(nn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Fe(nn,"app-deleted","Firebase App named '{$appName}' already deleted"),Fe(nn,"no-options","Need to provide options, when not being deployed to hosting via source."),Fe(nn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Fe(nn,"invalid-log-argument","First argument to `onLog` must be null or a function."),Fe(nn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Fe(nn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Fe(nn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Fe(nn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),nn),_n=new pt("app","Firebase",xn),In=function(){function e(t,n,r){var i=this;Ue(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ct("app",(function(){return i}),"PUBLIC"))}return Ve(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}}]),e}(),En="9.18.0";function Sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:hn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw _n.create("bad-app-name",{appName:String(i)});if(n||(n=at()),!n)throw _n.create("no-options");var a=pn.get(i);if(a){if(mt(n,a.options)&&mt(r,a.config))return a;throw _n.create("duplicate-app",{appName:i})}var o,u=new Rt(i),s=Be(vn.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new In(n,r,u);return pn.set(i,l),l}function Tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn,t=pn.get(e);if(!t&&e===hn)return Sn();if(!t)throw _n.create("no-app",{appName:e});return t}function Cn(){return Array.from(pn.values())}function An(e){return Nn.apply(this,arguments)}function Nn(){return Nn=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!pn.has(n)){e.next=6;break}return pn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),Nn.apply(this,arguments)}function Dn(e,t,n){var r,i=null!==(r=dn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void fn.warn(u.join(" "))}gn(new Ct("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function On(e,t){if(null!==e&&"function"!==typeof e)throw _n.create("invalid-log-argument");!function(e,t){var n,r=Be(Pt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Lt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ot[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Rn(e){var t;t=e,Pt.forEach((function(e){e.setLogLevel(t)}))}var Pn="firebase-heartbeat-database",Ln=1,Mn="firebase-heartbeat-store",Fn=null;function Un(){return Fn||(Fn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Zt(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Zt(u.result),e.oldVersion,e.newVersion,Zt(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(Pn,Ln,{upgrade:function(e,t){if(0===t)e.createObjectStore(Mn)}}).catch((function(e){throw _n.create("idb-open",{originalErrorMessage:e.message})}))),Fn}function jn(e){return Vn.apply(this,arguments)}function Vn(){return Vn=ge(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Un();case 3:return n=e.sent,e.abrupt("return",n.transaction(Mn).objectStore(Mn).get(zn(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof dt?fn.warn(e.t0.message):(r=_n.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),fn.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Vn.apply(this,arguments)}function Bn(e,t){return qn.apply(this,arguments)}function qn(){return qn=ge(ye().mark((function e(t,n){var r,i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Un();case 3:return r=e.sent,i=r.transaction(Mn,"readwrite"),a=i.objectStore(Mn),e.next=8,a.put(n,zn(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof dt?fn.warn(e.t0.message):(o=_n.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),fn.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),qn.apply(this,arguments)}function zn(e){return"".concat(e.name,"!").concat(e.options.appId)}var Kn=1024,Gn=function(){function e(t){var n=this;Ue(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Yn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Ve(e,[{key:"triggerHeartbeat",value:function(){var e=ge(ye().mark((function e(){var t,n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Wn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ge(ye().mark((function e(){var t,n,r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Wn(),n=Hn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Je(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Wn(){return(new Date).toISOString().substring(0,10)}function Hn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kn,r=[],i=e.slice(),a=Be(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Xn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Xn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Qn,$n,Yn=function(){function e(t){Ue(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Ve(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ht()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ge(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,jn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ge(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Bn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ge(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Bn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Tt(r.heartbeats),Tt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Xn(e){return Je(JSON.stringify({version:2,heartbeats:e})).length}Qn="",gn(new Ct("platform-logger",(function(e){return new sn(e)}),"PRIVATE")),gn(new Ct("heartbeat",(function(e){return new Gn(e)}),"PRIVATE")),Dn(cn,ln,Qn),Dn(cn,ln,"esm2017"),Dn("fire-js","");var Jn=function(){function e(t,n){var r=this;Ue(this,e),this._delegate=t,this.firebase=n,yn(t,new Ct("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ve(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),An(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){yn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){mn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Zn=(Fe($n={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Fe($n,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),$n),er=new pt("app-compat","Firebase",Zn);var tr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Sn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(yt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Dn,setLogLevel:Rn,onLog:On,apps:null,SDK_VERSION:En,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(gn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw er.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&et(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!yt(n,e=e||hn))throw er.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Jn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){et(n,e)},createSubscribe:xt,ErrorFactory:pt,deepExtend:et}),n}(),nr=new jt("@firebase/app-compat"),rr="@firebase/app-compat",ir="0.2.5";if("object"===typeof self&&self.self===self&&void 0!==self.firebase){nr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ar=self.firebase.SDK_VERSION;ar&&ar.indexOf("LITE")>=0&&nr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var or=tr;!function(e){Dn(rr,ir,e)}();function ur(){return ur="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ke(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ur.apply(this,arguments)}or.registerVersion("firebase","9.18.0","app-compat");function sr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var cr;Object.create;var lr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},fr={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function hr(){return Fe({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var dr=function(){var e;return Fe(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Fe(e,"argument-error",""),Fe(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Fe(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Fe(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Fe(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Fe(e,"cordova-not-ready","Cordova framework is not ready."),Fe(e,"cors-unsupported","This browser is not supported."),Fe(e,"credential-already-in-use","This credential is already associated with a different user account."),Fe(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Fe(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Fe(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Fe(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Fe(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Fe(e,"email-already-in-use","The email address is already in use by another account."),Fe(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Fe(e,"expired-action-code","The action code has expired."),Fe(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Fe(e,"internal-error","An internal AuthError has occurred."),Fe(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Fe(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Fe(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Fe(e,"invalid-auth-event","An internal AuthError has occurred."),Fe(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Fe(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Fe(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Fe(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Fe(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Fe(e,"invalid-email","The email address is badly formatted."),Fe(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Fe(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Fe(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Fe(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Fe(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Fe(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Fe(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Fe(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Fe(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Fe(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Fe(e,"wrong-password","The password is invalid or the user does not have a password."),Fe(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Fe(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Fe(e,"invalid-provider-id","The specified provider ID is invalid."),Fe(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Fe(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Fe(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Fe(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Fe(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Fe(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Fe(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Fe(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Fe(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Fe(e,"missing-continue-uri","A continue URL must be provided in the request."),Fe(e,"missing-iframe-start","An internal AuthError has occurred."),Fe(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Fe(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Fe(e,"missing-multi-factor-info","No second factor identifier is provided."),Fe(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Fe(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Fe(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Fe(e,"app-deleted","This instance of FirebaseApp has been deleted."),Fe(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Fe(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Fe(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Fe(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Fe(e,"no-auth-event","An internal AuthError has occurred."),Fe(e,"no-such-provider","User was not linked to an account with the given provider."),Fe(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Fe(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Fe(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Fe(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Fe(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Fe(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Fe(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Fe(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Fe(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Fe(e,"rejected-credential","The request contains malformed or mismatching credentials."),Fe(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Fe(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Fe(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Fe(e,"timeout","The operation has timed out."),Fe(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Fe(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Fe(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Fe(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Fe(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Fe(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Fe(e,"unverified-email","The operation requires a verified email."),Fe(e,"user-cancelled","The user did not grant your application the permissions it requested."),Fe(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Fe(e,"user-disabled","The user account has been disabled by an administrator."),Fe(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Fe(e,"user-signed-out",""),Fe(e,"weak-password","The password must be 6 characters long or more."),Fe(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Fe(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},pr=hr,vr=new pt("auth","Firebase",hr()),yr=new jt("@firebase/auth");function mr(e){if(yr.logLevel<=Ot.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];yr.error.apply(yr,["Auth (".concat(En,"): ").concat(e)].concat(n))}}function gr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw xr.apply(void 0,[e].concat(n))}function kr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xr.apply(void 0,[e].concat(n))}function br(e,t,n){var r=Object.assign(Object.assign({},pr()),Fe({},t,n));return new pt("auth","Firebase",r).create(t,{appName:e.name})}function wr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&gr(e,"argument-error"),br(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function xr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Tt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Tt(o)))}return vr.create.apply(vr,[e].concat(n))}function _r(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw xr.apply(void 0,[t].concat(r))}}function Ir(e){var t="INTERNAL ASSERTION FAILED: "+e;throw mr(t),new Error(t)}function Er(e,t){e||Ir(t)}var Sr=new Map;function Tr(e){Er(e instanceof Function,"Expected a class definition");var t=Sr.get(e);return t?(Er(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Sr.set(e,t),t)}function Cr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ar(){return"http:"===Nr()||"https:"===Nr()}function Nr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Dr=function(){function e(t,n){Ue(this,e),this.shortDelay=t,this.longDelay=n,Er(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())||lt()}return Ve(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ar()||ct()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Or(e,t){Er(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Rr=function(){function e(){Ue(this,e)}return Ve(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Pr=(Fe(cr={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Fe(cr,"MISSING_CUSTOM_TOKEN","internal-error"),Fe(cr,"INVALID_IDENTIFIER","invalid-email"),Fe(cr,"MISSING_CONTINUE_URI","internal-error"),Fe(cr,"INVALID_PASSWORD","wrong-password"),Fe(cr,"MISSING_PASSWORD","internal-error"),Fe(cr,"EMAIL_EXISTS","email-already-in-use"),Fe(cr,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Fe(cr,"INVALID_IDP_RESPONSE","invalid-credential"),Fe(cr,"INVALID_PENDING_TOKEN","invalid-credential"),Fe(cr,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Fe(cr,"MISSING_REQ_TYPE","internal-error"),Fe(cr,"EMAIL_NOT_FOUND","user-not-found"),Fe(cr,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Fe(cr,"EXPIRED_OOB_CODE","expired-action-code"),Fe(cr,"INVALID_OOB_CODE","invalid-action-code"),Fe(cr,"MISSING_OOB_CODE","internal-error"),Fe(cr,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Fe(cr,"INVALID_ID_TOKEN","invalid-user-token"),Fe(cr,"TOKEN_EXPIRED","user-token-expired"),Fe(cr,"USER_NOT_FOUND","user-token-expired"),Fe(cr,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Fe(cr,"INVALID_CODE","invalid-verification-code"),Fe(cr,"INVALID_SESSION_INFO","invalid-verification-id"),Fe(cr,"INVALID_TEMPORARY_PROOF","invalid-credential"),Fe(cr,"MISSING_SESSION_INFO","missing-verification-id"),Fe(cr,"SESSION_EXPIRED","code-expired"),Fe(cr,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Fe(cr,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Fe(cr,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Fe(cr,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Fe(cr,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Fe(cr,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Fe(cr,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Fe(cr,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Fe(cr,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Fe(cr,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Fe(cr,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),cr),Lr=new Dr(3e4,6e4);function Mr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Fr(e,t,n,r){return Ur.apply(this,arguments)}function Ur(){return Ur=ge(ye().mark((function e(t,n,r,i){var a,o=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",jr(t,a,ge(ye().mark((function e(){var a,o,u,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=kt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Rr.fetch()(zr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Ur.apply(this,arguments)}function jr(e,t,n){return Vr.apply(this,arguments)}function Vr(){return Vr=ge(ye().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Pr),n),e.prev=2,a=new Kr(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Gr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=_e(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Gr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Gr(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Gr(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw br(t,d,h);case 34:gr(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof dt)){e.next=41;break}throw e.t0;case 41:gr(t,"internal-error",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Vr.apply(this,arguments)}function Br(e,t,n,r){return qr.apply(this,arguments)}function qr(){return qr=ge(ye().mark((function e(t,n,r,i){var a,o,u=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Fr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&gr(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}function zr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Or(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Kr=function(){function e(t){var n=this;Ue(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(kr(n.auth,"network-request-failed"))}),Lr.get())}))}return Ve(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Gr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=kr(e,t,r);return i.customData._tokenResponse=n,i}function Wr(e,t){return Hr.apply(this,arguments)}function Hr(){return Hr=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Hr.apply(this,arguments)}function Qr(e,t){return $r.apply(this,arguments)}function $r(){return $r=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),$r.apply(this,arguments)}function Yr(e,t){return Xr.apply(this,arguments)}function Xr(){return Xr=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Xr.apply(this,arguments)}function Jr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Zr(){return Zr=ge(ye().mark((function e(t){var n,r,i,a,o,u,s=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Et(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,_r((a=ti(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Jr(ei(a.auth_time)),issuedAtTime:Jr(ei(a.iat)),expirationTime:Jr(ei(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Zr.apply(this,arguments)}function ei(e){return 1e3*Number(e)}function ti(e){var t=_e(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return mr("JWT malformed, contained fewer than 3 sections"),null;try{var a=Ze(r);return a?JSON.parse(a):(mr("Failed to decode base64 JWT payload"),null)}catch(o){return mr("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function ni(e,t){return ri.apply(this,arguments)}function ri(){return ri=ge(ye().mark((function e(t,n){var r=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof dt&&ii(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),ri.apply(this,arguments)}function ii(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var ai=function(){function e(t){Ue(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Ve(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ge(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),oi=function(){function e(t,n){Ue(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Ve(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Jr(this.lastLoginAt),this.creationTime=Jr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ui(e){return si.apply(this,arguments)}function si(){return si=ge(ye().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ni(t,Yr(r,{idToken:i}));case 6:_r(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=sr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=li(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new oi(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),si.apply(this,arguments)}function ci(){return(ci=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Et(t),e.next=3,ui(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function li(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Tt(n),Tt(t))}function fi(e,t){return hi.apply(this,arguments)}function hi(){return hi=ge(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr(t,{},ge(ye().mark((function e(){var r,i,a,o,u,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=zr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Rr.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),hi.apply(this,arguments)}var di=function(){function e(){Ue(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Ve(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){_r(e.idToken,"internal-error"),_r("undefined"!==typeof e.idToken,"internal-error"),_r("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ti(e);return _r(t,"internal-error"),_r("undefined"!==typeof t.exp,"internal-error"),_r("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ge(ye().mark((function e(t){var n,r=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],_r(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ge(ye().mark((function e(t,n){var r,i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fi(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Ir("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(_r("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(_r("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(_r("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function pi(e,t){_r("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var vi=function(){function e(t){Ue(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=sr(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ai(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Tt(a.providerData):[],this.metadata=new oi(a.createdAt||void 0,a.lastLoginAt||void 0)}return Ve(e,[{key:"getIdToken",value:function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ni(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(_r(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Zr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ci.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(_r(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){_r(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ge(ye().mark((function e(t){var n,r,i=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ui(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ge(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ni(this,Wr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;_r(k&&_,t,"internal-error");var I=di.fromJSON(this.name,_);_r("string"===typeof k,t,"internal-error"),pi(f,t.name),pi(h,t.name),_r("boolean"===typeof b,t,"internal-error"),_r("boolean"===typeof w,t,"internal-error"),pi(d,t.name),pi(p,t.name),pi(v,t.name),pi(y,t.name),pi(m,t.name),pi(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=ge(ye().mark((function t(n,r){var i,a,o,u=arguments;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new di).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ui(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),yi=function(){function e(){Ue(this,e),this.type="NONE",this.storage={}}return Ve(e,[{key:"_isAvailable",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();yi.type="NONE";var mi=yi;function gi(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var ki=function(){function e(t,n,r){Ue(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=gi(this.userKey,a.apiKey,o),this.fullPersistenceKey=gi("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Ve(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ge(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?vi._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ge(ye().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Tr(mi),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Tr(mi),u=gi(i,n.config.apiKey,n.name),s=null,c=Be(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=vi._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function bi(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ii(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(wi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Si(t))return"Blackberry";if(Ti(t))return"Webos";if(xi(t))return"Safari";if((t.includes("chrome/")||_i(t))&&!t.includes("edge/"))return"Chrome";if(Ei(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function wi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/firefox\//i.test(e)}function xi(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/crios\//i.test(e)}function Ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/iemobile/i.test(e)}function Ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/android/i.test(e)}function Si(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/blackberry/i.test(e)}function Ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/webos/i.test(e)}function Ci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ai(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return Ci(e)||Ei(e)||Ti(e)||Si(e)||/windows phone/i.test(e)||Ii(e)}function Ni(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=bi(ut());break;case"Worker":t="".concat(bi(ut()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(En,"/").concat(r)}var Di=function(){function e(t){Ue(this,e),this.auth=t,this.queue=[]}return Ve(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=ge(ye().mark((function e(t){var n,r,i,a,o,u,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=Be(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=Be(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Oi=function(){function e(t,n,r){Ue(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pi(this),this.idTokenSubscription=new Pi(this),this.beforeStateQueue=new Di(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Ve(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Tr(t)),this._initializationPromise=this.queue(ge(ye().mark((function r(){var i,a;return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ki.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ge(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ge(ye().mark((function e(t){var n,r,i,a,o,u,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return _r(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ui(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Et(t):null)&&_r(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ge(ye().mark((function e(t){var n,r=this,i=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&_r(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ge(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Tr(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new pt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ge(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return _r(n=t&&Tr(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,ki.create(this,[Tr(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ge(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ge(ye().mark((function e(t){var n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return _r(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return _r(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ni(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ge(ye().mark((function e(){var t,n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fe({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ri(e){return Et(e)}var Pi=function(){function e(t){var n=this;Ue(this,e),this.auth=t,this.observer=null,this.addObserver=xt((function(e){return n.observer=e}))}return Ve(e,[{key:"next",get:function(){return _r(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Li(e,t,n){var r=Ri(e);_r(r._canInitEmulator,r,"emulator-config-failed"),_r(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Mi(t),o=function(e){var t=Mi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Fi(r.substr(a.length+1))}}var o=_e(r.split(":"),2);return{host:o[0],port:Fi(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Mi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Fi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ui=function(){function e(t,n){Ue(this,e),this.providerId=t,this.signInMethod=n}return Ve(e,[{key:"toJSON",value:function(){return Ir("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Ir("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Ir("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Ir("not implemented")}}]),e}();function ji(e,t){return Vi.apply(this,arguments)}function Vi(){return Vi=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:resetPassword",Mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}function Bi(e,t){return qi.apply(this,arguments)}function qi(){return qi=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),qi.apply(this,arguments)}function zi(e,t){return Ki.apply(this,arguments)}function Ki(){return Ki=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:update",Mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ki.apply(this,arguments)}function Gi(e,t){return Wi.apply(this,arguments)}function Wi(){return Wi=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:signInWithPassword",Mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wi.apply(this,arguments)}function Hi(e,t){return Qi.apply(this,arguments)}function Qi(){return Qi=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:sendOobCode",Mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qi.apply(this,arguments)}function $i(e,t){return Yi.apply(this,arguments)}function Yi(){return Yi=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hi(t,n));case 1:case"end":return e.stop()}}),e)}))),Yi.apply(this,arguments)}function Xi(e,t){return Ji.apply(this,arguments)}function Ji(){return Ji=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hi(t,n));case 1:case"end":return e.stop()}}),e)}))),Ji.apply(this,arguments)}function Zi(e,t){return ea.apply(this,arguments)}function ea(){return ea=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hi(t,n));case 1:case"end":return e.stop()}}),e)}))),ea.apply(this,arguments)}function ta(e,t){return na.apply(this,arguments)}function na(){return na=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hi(t,n));case 1:case"end":return e.stop()}}),e)}))),na.apply(this,arguments)}function ra(e,t){return ia.apply(this,arguments)}function ia(){return ia=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:signInWithEmailLink",Mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function aa(e,t){return oa.apply(this,arguments)}function oa(){return oa=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:signInWithEmailLink",Mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}var ua=function(e){ze(n,e);var t=We(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Ue(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Ve(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Gi(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ra(t,{email:this._email,oobCode:this._password}));case 5:gr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Bi(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",aa(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:gr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ui);function sa(e,t){return ca.apply(this,arguments)}function ca(){return ca=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:signInWithIdp",Mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ca.apply(this,arguments)}var la=function(e){ze(n,e);var t=We(n);function n(){var e;return Ue(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Ve(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return sa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,sa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,sa(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=kt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=sr(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Ui);function fa(e,t){return ha.apply(this,arguments)}function ha(){return ha=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:sendVerificationCode",Mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}function da(){return da=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:signInWithPhoneNumber",Mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),da.apply(this,arguments)}function pa(){return pa=ge(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Br(t,"POST","/v1/accounts:signInWithPhoneNumber",Mr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Gr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),pa.apply(this,arguments)}var va=Fe({},"USER_NOT_FOUND","user-not-found");function ya(){return ya=ge(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Br(t,"POST","/v1/accounts:signInWithPhoneNumber",Mr(t,r),va));case 2:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}var ma=function(e){ze(n,e);var t=We(n);function n(e){var r;return Ue(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Ve(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return da.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return pa.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ya.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ui);var ga=function(){function e(t){var n,r,i,a,o,u;Ue(this,e);var s=bt(wt(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);_r(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Ve(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=bt(wt(e)).link,n=t?bt(wt(t)).deep_link_id:null,r=bt(wt(e)).deep_link_id;return(r?bt(wt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(RI){return null}}}]),e}();var ka=function(){function e(){Ue(this,e),this.providerId=e.PROVIDER_ID}return Ve(e,null,[{key:"credential",value:function(e,t){return ua._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ga.parseLink(t);return _r(n,"argument-error"),ua._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ka.PROVIDER_ID="password",ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ba=function(){function e(t){Ue(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Ve(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),wa=function(e){ze(n,e);var t=We(n);function n(){var e;return Ue(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Ve(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Tt(this.scopes)}}]),n}(ba),xa=function(e){ze(n,e);var t=We(n);function n(){return Ue(this,n),t.apply(this,arguments)}return Ve(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return _r(e.idToken||e.accessToken,"argument-error"),la._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return _r("providerId"in t&&"signInMethod"in t,"argument-error"),la._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(wa),_a=function(e){ze(n,e);var t=We(n);function n(){return Ue(this,n),t.call(this,"facebook.com")}return Ve(n,null,[{key:"credential",value:function(e){return la._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(RI){return null}}}]),n}(wa);_a.FACEBOOK_SIGN_IN_METHOD="facebook.com",_a.PROVIDER_ID="facebook.com";var Ia=function(e){ze(n,e);var t=We(n);function n(){var e;return Ue(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Ve(n,null,[{key:"credential",value:function(e,t){return la._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(RI){return null}}}]),n}(wa);Ia.GOOGLE_SIGN_IN_METHOD="google.com",Ia.PROVIDER_ID="google.com";var Ea=function(e){ze(n,e);var t=We(n);function n(){return Ue(this,n),t.call(this,"github.com")}return Ve(n,null,[{key:"credential",value:function(e){return la._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(RI){return null}}}]),n}(wa);Ea.GITHUB_SIGN_IN_METHOD="github.com",Ea.PROVIDER_ID="github.com";var Sa=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Ve(n,[{key:"_getIdTokenResponse",value:function(e){return sa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,sa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,sa(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ui),Ta=function(e){ze(n,e);var t=We(n);function n(e){return Ue(this,n),_r(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Ve(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Sa.fromJSON(e);return _r(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Sa._create(r,n)}catch(i){return null}}}]),n}(ba),Ca=function(e){ze(n,e);var t=We(n);function n(){return Ue(this,n),t.call(this,"twitter.com")}return Ve(n,null,[{key:"credential",value:function(e,t){return la._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(RI){return null}}}]),n}(wa);function Aa(e,t){return Na.apply(this,arguments)}function Na(){return Na=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:signUp",Mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Na.apply(this,arguments)}Ca.TWITTER_SIGN_IN_METHOD="twitter.com",Ca.PROVIDER_ID="twitter.com";var Da=function(){function e(t){Ue(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Ve(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ge(ye().mark((function t(n,r,i){var a,o,u,s,c=arguments;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,vi._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Oa(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ge(ye().mark((function t(n,r,i){var a;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Oa(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Oa(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Ra(){return Ra=ge(ye().mark((function e(t){var n,r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ri(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Da({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Aa(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Da._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}var Pa=function(e){ze(n,e);var t=We(n);function n(e,r,i,a){var o,u;return Ue(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(qe(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Ve(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(dt);function La(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Pa._fromErrorAndOperation(e,n,t,r);throw n}))}function Ma(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Fa(e,t){return Ua.apply(this,arguments)}function Ua(){return Ua=ge(ye().mark((function e(t,n){var r,i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Et(t),e.next=3,Ba(!0,r,n);case 3:return e.t0=Qr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Ma(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Ua.apply(this,arguments)}function ja(e,t){return Va.apply(this,arguments)}function Va(){return Va=ge(ye().mark((function e(t,n){var r,i,a=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ni,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Da._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Va.apply(this,arguments)}function Ba(e,t,n){return qa.apply(this,arguments)}function qa(){return(qa=ge(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ui(n);case 2:i=Ma(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",_r(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function za(e,t){return Ka.apply(this,arguments)}function Ka(){return Ka=ge(ye().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,ni(t,La(i,a,n,t),r);case 6:return _r((o=e.sent).idToken,i,"internal-error"),_r(u=ti(o.idToken),i,"internal-error"),s=u.sub,_r(t.uid===s,i,"user-mismatch"),e.abrupt("return",Da._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&gr(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ka.apply(this,arguments)}function Ga(e,t){return Wa.apply(this,arguments)}function Wa(){return Wa=ge(ye().mark((function e(t,n){var r,i,a,o,u=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,La(t,i,n);case 4:return a=e.sent,e.next=7,Da._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function Ha(e,t){return Qa.apply(this,arguments)}function Qa(){return Qa=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(Ri(t),n));case 1:case"end":return e.stop()}}),e)}))),Qa.apply(this,arguments)}function $a(e,t){return Ya.apply(this,arguments)}function Ya(){return(Ya=ge(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Et(t),e.next=3,Ba(!1,r,n.providerId);case 3:return e.abrupt("return",ja(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xa(e,t){return Ja.apply(this,arguments)}function Ja(){return(Ja=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",za(Et(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Za(e,t){return eo.apply(this,arguments)}function eo(){return eo=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Br(t,"POST","/v1/accounts:signInWithCustomToken",Mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),eo.apply(this,arguments)}function to(){return to=ge(ye().mark((function e(t,n){var r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ri(t),e.next=3,Za(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Da._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),to.apply(this,arguments)}var no=function(){function e(t,n){Ue(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Ve(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?ro._fromServerResponse(e,t):gr(e,"internal-error")}}]),e}(),ro=function(e){ze(n,e);var t=We(n);function n(e){var r;return Ue(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Ve(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(no);function io(e,t,n){var r;_r((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),_r("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(_r(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(_r(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ao(){return ao=ge(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Et(t),a={requestType:"PASSWORD_RESET",email:n},r&&io(i,a,r),e.next=5,Xi(i,a);case 5:case"end":return e.stop()}}),e)}))),ao.apply(this,arguments)}function oo(){return oo=ge(ye().mark((function e(t,n,r){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji(Et(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),oo.apply(this,arguments)}function uo(){return uo=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zi(Et(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),uo.apply(this,arguments)}function so(e,t){return co.apply(this,arguments)}function co(){return co=ge(ye().mark((function e(t,n){var r,i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Et(t),e.next=3,ji(r,{oobCode:n});case 3:i=e.sent,_r(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return _r(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:_r(i.mfaInfo,r,"internal-error");case 13:_r(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=no._fromServerResponse(Ri(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),co.apply(this,arguments)}function lo(){return lo=ge(ye().mark((function e(t,n){var r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,so(Et(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),lo.apply(this,arguments)}function fo(e,t,n){return ho.apply(this,arguments)}function ho(){return ho=ge(ye().mark((function e(t,n,r){var i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ri(t),e.next=3,Aa(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Da._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),ho.apply(this,arguments)}function po(){return po=ge(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Et(t),a={requestType:"EMAIL_SIGNIN",email:n},_r(r.handleCodeInApp,i,"argument-error"),r&&io(i,a,r),e.next=6,Zi(i,a);case 6:case"end":return e.stop()}}),e)}))),po.apply(this,arguments)}function vo(){return vo=ge(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Et(t),_r((a=ka.credentialWithLink(n,r||Cr()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ha(i,a));case 4:case"end":return e.stop()}}),e)}))),vo.apply(this,arguments)}function yo(e,t){return mo.apply(this,arguments)}function mo(){return mo=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:createAuthUri",Mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),mo.apply(this,arguments)}function go(){return go=ge(ye().mark((function e(t,n){var r,i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ar()?Cr():"http://localhost",i={identifier:n,continueUri:r},e.next=4,yo(Et(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),go.apply(this,arguments)}function ko(){return(ko=ge(ye().mark((function e(t,n){var r,i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Et(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&io(r.auth,a,n),e.next=8,$i(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bo(){return(bo=ge(ye().mark((function e(t,n,r){var i,a,o,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Et(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&io(i.auth,o,r),e.next=8,ta(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(e,t){return xo.apply(this,arguments)}function xo(){return xo=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),xo.apply(this,arguments)}function _o(){return(_o=ge(ye().mark((function e(t,n){var r,i,a,o,u,s,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Et(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,ni(a,wo(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Io(e,t,n){return Eo.apply(this,arguments)}function Eo(){return Eo=ge(ye().mark((function e(t,n,r){var i,a,o,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,ni(t,Bi(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Eo.apply(this,arguments)}var So=Ve((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ue(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),To=function(e){ze(n,e);var t=We(n);function n(e,r,i,a){var o;return Ue(this,n),(o=t.call(this,e,r,i)).username=a,o}return Ve(n)}(So),Co=function(e){ze(n,e);var t=We(n);function n(e,r){return Ue(this,n),t.call(this,e,"facebook.com",r)}return Ve(n)}(So),Ao=function(e){ze(n,e);var t=We(n);function n(e,r){return Ue(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Ve(n)}(To),No=function(e){ze(n,e);var t=We(n);function n(e,r){return Ue(this,n),t.call(this,e,"google.com",r)}return Ve(n)}(So),Do=function(e){ze(n,e);var t=We(n);function n(e,r,i){return Ue(this,n),t.call(this,e,"twitter.com",r,i)}return Ve(n)}(To);function Oo(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=ti(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new So(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Co(a,i);case"github.com":return new Ao(a,i);case"google.com":return new No(a,i);case"twitter.com":return new Do(a,i,e.screenName||null);case"custom":case"anonymous":return new So(a,null);default:return new So(a,r,i)}}(n)}var Ro=function(){function e(t,n,r){Ue(this,e),this.type=t,this.credential=n,this.auth=r}return Ve(e,[{key:"toJSON",value:function(){return{multiFactorSession:Fe({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Po=function(){function e(t,n,r){Ue(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Ve(e,[{key:"resolveSignIn",value:function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Ri(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return no._fromServerResponse(r,e)}));_r(i.mfaPendingCredential,r,"internal-error");var o=Ro._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ge(ye().mark((function e(t){var a,u,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Da._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return _r(n.user,r,"internal-error"),e.abrupt("return",Da._forOperation(n.user,n.operationType,u));case 17:gr(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Lo(e,t){return Fr(e,"POST","/v2/accounts/mfaEnrollment:start",Mr(e,t))}function Mo(e,t){return Fr(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Mr(e,t))}var Fo=function(){function e(t){var n=this;Ue(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return no._fromServerResponse(t.auth,e)})))}))}return Ve(e,[{key:"getSession",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ro,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ge(ye().mark((function e(t,n){var r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,ni(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ge(ye().mark((function e(t){var n,r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,ni(this.user,Mo(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Uo=new WeakMap;var jo="__sak",Vo=function(){function e(t,n){Ue(this,e),this.storageRetriever=t,this.type=n}return Ve(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(jo,"1"),this.storage.removeItem(jo),Promise.resolve(!0)):Promise.resolve(!1)}catch(RI){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Bo=function(e){ze(n,e);var t=We(n);function n(){var e;return Ue(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ut();return xi(e)||Ci(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ai(),e._shouldAllowMigration=!0,e}return Ve(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);ft()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ge(ye().mark((function e(t,r){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(Ke(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ge(ye().mark((function e(t){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(Ke(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(Ke(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Vo);Bo.type="LOCAL";var qo=Bo,zo=function(e){ze(n,e);var t=We(n);function n(){return Ue(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Ve(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Vo);zo.type="SESSION";var Ko=zo;function Go(e){return Promise.all(e.map(function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Wo=function(){function e(t){Ue(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Ve(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ge(ye().mark((function e(t){var n,r,i,a,o,u,s,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Go(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ho(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Wo.receivers=[];var Qo=function(){function e(t){Ue(this,e),this.target=t,this.handlers=new Set}return Ve(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ge(ye().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Ho("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function $o(){return window}function Yo(){return"undefined"!==typeof $o().WorkerGlobalScope&&"function"===typeof $o().importScripts}function Xo(){return Jo.apply(this,arguments)}function Jo(){return(Jo=ge(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Zo(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var eu="firebaseLocalStorageDb",tu=1,nu="firebaseLocalStorage",ru="fbase_key",iu=function(){function e(t){Ue(this,e),this.request=t}return Ve(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function au(e,t){return e.transaction([nu],t?"readwrite":"readonly").objectStore(nu)}function ou(){var e=indexedDB.deleteDatabase(eu);return new iu(e).toPromise()}function uu(){var e=indexedDB.open(eu,tu);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(nu,{keyPath:ru})}catch(r){n(r)}})),e.addEventListener("success",ge(ye().mark((function n(){var r;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(nu)){n.next=12;break}return r.close(),n.next=5,ou();case 5:return n.t0=t,n.next=8,uu();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function su(e,t,n){return cu.apply(this,arguments)}function cu(){return cu=ge(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=au(t,!0).put((Fe(i={},ru,n),Fe(i,"value",r),i)),e.abrupt("return",new iu(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),cu.apply(this,arguments)}function lu(e,t){return fu.apply(this,arguments)}function fu(){return fu=ge(ye().mark((function e(t,n){var r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=au(t,!1).get(n),e.next=3,new iu(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),fu.apply(this,arguments)}function hu(e,t){var n=au(e,!0).delete(t);return new iu(n).toPromise()}var du=function(){function e(){Ue(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Ve(e,[{key:"_openDb",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,uu();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ge(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yo()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ge(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Wo._getInstance(Yo()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ge(ye().mark((function e(n,r){var i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ge(ye().mark((function e(){var t,n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xo();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Qo(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Zo()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ge(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,uu();case 5:return t=e.sent,e.next=8,su(t,jo,"1");case 8:return e.next=10,hu(t,jo);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ge(ye().mark((function e(t,n){var r=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return su(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return lu(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ge(ye().mark((function e(t){var n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return hu(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ge(ye().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=au(e,!1).getAll();return new iu(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Be(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ge(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();du.type="LOCAL";var pu=du;function vu(e,t){return Fr(e,"POST","/v2/accounts/mfaSignIn:start",Mr(e,t))}function yu(e){return mu.apply(this,arguments)}function mu(){return mu=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),mu.apply(this,arguments)}function gu(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=kr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function ku(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var bu=1e12,wu=function(){function e(t){Ue(this,e),this.auth=t,this.counter=bu,this._widgets=new Map}return Ve(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new xu(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||bu;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||bu;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ge(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||bu,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),xu=function(){function e(t,n,r){var i=this;Ue(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;_r(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Ve(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var _u=ku("rcb"),Iu=new Dr(3e4,6e4),Eu=function(){function e(){var t;Ue(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=$o().grecaptcha)||void 0===t?void 0:t.render)}return Ve(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return _r(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve($o().grecaptcha):new Promise((function(r,i){var a=$o().setTimeout((function(){i(kr(e,"network-request-failed"))}),Iu.get());$o()[_u]=function(){$o().clearTimeout(a),delete $o()[_u];var o=$o().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(kr(e,"internal-error"))},gu("".concat("https://www.google.com/recaptcha/api.js?","?").concat(kt({onload:_u,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(kr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=$o().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Su=function(){function e(){Ue(this,e)}return Ve(e,[{key:"load",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new wu(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Tu="recaptcha",Cu={theme:"light",type:"image"},Au=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Cu),r=arguments.length>2?arguments[2]:void 0;Ue(this,e),this.parameters=n,this.type=Tu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ri(r),this.isInvisible="invisible"===this.parameters.size,_r("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;_r(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Su:new Eu,this.validateStartingState()}return Ve(e,[{key:"verify",value:function(){var e=ge(ye().mark((function e(){var t,n,r,i=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){_r(!this.parameters.sitekey,this.auth,"argument-error"),_r(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_r("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=$o()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){_r(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ge(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ge(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _r(Ar()&&!Yo(),this.auth,"internal-error"),e.next=3,Nu();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,yu(this.auth);case 8:_r(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return _r(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Nu(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Du=function(){function e(t,n){Ue(this,e),this.verificationId=t,this.onConfirmation=n}return Ve(e,[{key:"confirm",value:function(e){var t=ma._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Ou(){return Ou=ge(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ri(t),e.next=3,Mu(i,n,Et(r));case 3:return a=e.sent,e.abrupt("return",new Du(a,(function(e){return Ha(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Ou.apply(this,arguments)}function Ru(e,t,n){return Pu.apply(this,arguments)}function Pu(){return(Pu=ge(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Et(t),e.next=3,Ba(!1,i,"phone");case 3:return e.next=5,Mu(i.auth,n,Et(r));case 5:return a=e.sent,e.abrupt("return",new Du(a,(function(e){return $a(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lu(){return(Lu=ge(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Et(t),e.next=3,Mu(i.auth,n,Et(r));case 3:return a=e.sent,e.abrupt("return",new Du(a,(function(e){return Xa(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mu(e,t,n){return Fu.apply(this,arguments)}function Fu(){return Fu=ge(ye().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,_r("string"===typeof a,t,"argument-error"),_r(r.type===Tu,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return _r("enroll"===u.type,t,"internal-error"),e.next=13,Lo(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return _r("signin"===u.type,t,"internal-error"),_r(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,vu(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,fa(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Fu.apply(this,arguments)}function Uu(){return(Uu=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ja(Et(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ju=function(){function e(t){Ue(this,e),this.providerId=e.PROVIDER_ID,this.auth=Ri(t)}return Ve(e,[{key:"verifyPhoneNumber",value:function(e,t){return Mu(this.auth,e,Et(t))}}],[{key:"credential",value:function(e,t){return ma._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?ma._fromTokenResponse(n,r):null}}]),e}();function Vu(e,t){return t?Tr(t):(_r(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ju.PROVIDER_ID="phone",ju.PHONE_SIGN_IN_METHOD="phone";var Bu=function(e){ze(n,e);var t=We(n);function n(e){var r;return Ue(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Ve(n,[{key:"_getIdTokenResponse",value:function(e){return sa(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return sa(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return sa(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ui);function qu(e){return Ga(e.auth,new Bu(e),e.bypassAuthState)}function zu(e){var t=e.auth,n=e.user;return _r(n,t,"internal-error"),za(n,new Bu(e),e.bypassAuthState)}function Ku(e){return Gu.apply(this,arguments)}function Gu(){return Gu=ge(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,_r(r=t.user,n,"internal-error"),e.abrupt("return",ja(r,new Bu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Gu.apply(this,arguments)}var Wu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Ue(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Ve(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ge(ye().mark((function t(n,r){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ge(ye().mark((function e(t){var n,r,i,a,o,u,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qu;case"linkViaPopup":case"linkViaRedirect":return Ku;case"reauthViaPopup":case"reauthViaRedirect":return zu;default:gr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Hu=new Dr(2e3,1e4);function Qu(e,t,n){return $u.apply(this,arguments)}function $u(){return $u=ge(ye().mark((function e(t,n,r){var i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ri(t),wr(t,n,ba),a=Vu(i,r),o=new Zu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),$u.apply(this,arguments)}function Yu(){return(Yu=ge(ye().mark((function e(t,n,r){var i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wr((i=Et(t)).auth,n,ba),a=Vu(i.auth,r),o=new Zu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xu(e,t,n){return Ju.apply(this,arguments)}function Ju(){return(Ju=ge(ye().mark((function e(t,n,r){var i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wr((i=Et(t)).auth,n,ba),a=Vu(i.auth,r),o=new Zu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zu=function(e){ze(n,e);var t=We(n);function n(e,r,i,a,o){var u;return Ue(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=qe(u),u}return Ve(n,[{key:"executeNotNull",value:function(){var e=ge(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return _r(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ge(ye().mark((function e(){var t,n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Er(1===this.filter.length,"Popup operations only handle one event"),t=Ho(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(kr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(kr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(kr(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Hu.get())}()}}]),n}(Wu);Zu.currentPopupAction=null;var es="pendingRedirect",ts=new Map,ns=function(e){ze(n,e);var t=We(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ue(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Ve(n,[{key:"execute",value:function(){var e=ge(ye().mark((function e(){var t,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ts.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,rs(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,ur(Ke(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:ts.set(this.auth._key(),t);case 21:return this.bypassAuthState||ts.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ge(ye().mark((function e(t){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",ur(Ke(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",ur(Ke(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Wu);function rs(e,t){return is.apply(this,arguments)}function is(){return is=ge(ye().mark((function e(t,n){var r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cs(n),i=ss(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}function as(e,t){return os.apply(this,arguments)}function os(){return os=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ss(t)._set(cs(n),"true"));case 1:case"end":return e.stop()}}),e)}))),os.apply(this,arguments)}function us(e,t){ts.set(e._key(),t)}function ss(e){return Tr(e._redirectPersistence)}function cs(e){return gi(es,e.config.apiKey,e.name)}function ls(e,t,n){return function(e,t,n){return fs.apply(this,arguments)}(e,t,n)}function fs(){return fs=ge(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ri(t),wr(t,n,ba),e.next=4,i._initializationPromise;case 4:return a=Vu(i,r),e.next=7,as(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),fs.apply(this,arguments)}function hs(e,t,n){return function(e,t,n){return ds.apply(this,arguments)}(e,t,n)}function ds(){return(ds=ge(ye().mark((function e(t,n,r){var i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wr((i=Et(t)).auth,n,ba),e.next=4,i.auth._initializationPromise;case 4:return a=Vu(i.auth,r),e.next=7,as(a,i.auth);case 7:return e.next=9,bs(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ps(e,t,n){return function(e,t,n){return vs.apply(this,arguments)}(e,t,n)}function vs(){return(vs=ge(ye().mark((function e(t,n,r){var i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wr((i=Et(t)).auth,n,ba),e.next=4,i.auth._initializationPromise;case 4:return a=Vu(i.auth,r),e.next=7,Ba(!1,i,n.providerId);case 7:return e.next=9,as(a,i.auth);case 9:return e.next=11,bs(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ys(e,t){return ms.apply(this,arguments)}function ms(){return ms=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ri(t)._initializationPromise;case 2:return e.abrupt("return",gs(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),ms.apply(this,arguments)}function gs(e,t){return ks.apply(this,arguments)}function ks(){return ks=ge(ye().mark((function e(t,n){var r,i,a,o,u,s=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Ri(t),a=Vu(i,n),o=new ns(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),ks.apply(this,arguments)}function bs(e){return ws.apply(this,arguments)}function ws(){return(ws=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ho("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xs=function(){function e(t){Ue(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Ve(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Is(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Is(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(kr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_s(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(_s(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function _s(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Is(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Es(e){return Ss.apply(this,arguments)}function Ss(){return Ss=ge(ye().mark((function e(t){var n,r=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Fr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Ss.apply(this,arguments)}var Ts=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cs=/^https?/;function As(){return As=ge(ye().mark((function e(t){var n,r,i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Es(t);case 4:n=e.sent,r=n.authorizedDomains,i=Be(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Ns(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:gr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),As.apply(this,arguments)}function Ns(e){var t=Cr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Cs.test(r))return!1;if(Ts.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Ds=new Dr(3e4,6e4);function Os(){var e=$o().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Tt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Rs=null;function Ps(e){return Rs=Rs||function(e){return new Promise((function(t,n){var r,i,a;function o(){Os(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Os(),n(kr(e,"network-request-failed"))},timeout:Ds.get()})}if(null===(i=null===(r=$o().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=$o().gapi)||void 0===a?void 0:a.load)){var u=ku("iframefcb");return $o()[u]=function(){gapi.load?o():n(kr(e,"network-request-failed"))},gu("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Rs=null,e}))}(e),Rs}var Ls=new Dr(5e3,15e3),Ms="__/auth/iframe",Fs="emulator/auth/iframe",Us={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},js=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vs(e){var t=e.config;_r(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Or(t,Fs):"https://".concat(e.config.authDomain,"/").concat(Ms),r={apiKey:t.apiKey,appName:e.name,v:En},i=js.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(kt(r).slice(1))}function Bs(e){return qs.apply(this,arguments)}function qs(){return qs=ge(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ps(t);case 2:return n=e.sent,_r(r=$o().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Vs(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Us,dontclear:!0},(function(e){return new Promise(function(){var n=ge(ye().mark((function n(r,i){var a,o,u;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){$o().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=kr(t,"network-request-failed"),o=$o().setTimeout((function(){i(a)}),Ls.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),qs.apply(this,arguments)}var zs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ks=500,Gs=600,Ws="_blank",Hs="http://localhost",Qs=function(){function e(t){Ue(this,e),this.window=t,this.associatedEvent=null}return Ve(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function $s(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ks,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Gs,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},zs),{width:r.toString(),height:i.toString(),top:a,left:o}),c=ut().toLowerCase();n&&(u=_i(c)?Ws:n),wi(c)&&(t=t||Hs,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=_e(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Ci(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new Qs(null);var f=window.open(t||"",u,l);_r(f,e,"popup-blocked");try{f.focus()}catch(h){}return new Qs(f)}var Ys="__/auth/handler",Xs="emulator/auth/handler";function Js(e,t,n,r,i,a){_r(e.config.authDomain,e,"auth-domain-config-required"),_r(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:En,eventId:i};if(t instanceof ba){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=_e(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof wa){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ys);return Or(t,Xs)}(e),"?").concat(kt(d).slice(1))}var Zs="webStorageSupport",ec=function(){function e(){Ue(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ko,this._completeRedirectFn=gs,this._overrideRedirectResult=us}return Ve(e,[{key:"_openPopup",value:function(){var e=ge(ye().mark((function e(t,n,r,i){var a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Er(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Js(t,n,r,Cr(),i),e.abrupt("return",$s(t,o,Ho()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ge(ye().mark((function e(t,n,r,i){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Js(t,n,r,Cr(),i),$o().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Er(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ge(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bs(t);case 2:return n=e.sent,r=new xs(t),n.register("authEvent",(function(e){return _r(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Zs,{type:Zs},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Zs];void 0!==i&&t(!!i),gr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return As.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ai()||xi()||Ci()}}]),e}(),tc=ec,nc=function(){function e(t){Ue(this,e),this.factorId=t}return Ve(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ir("unexpected MultiFactorSessionType")}}}]),e}(),rc=function(e){ze(n,e);var t=We(n);function n(e){var r;return Ue(this,n),(r=t.call(this,"phone")).credential=e,r}return Ve(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Fr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Mr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Fr(e,"POST","/v2/accounts/mfaSignIn:finalize",Mr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(nc),ic=function(){function e(){Ue(this,e)}return Ve(e,null,[{key:"assertion",value:function(e){return rc._fromCredential(e)}}]),e}();ic.FACTOR_ID="phone";var ac="@firebase/auth",oc="0.21.5",uc=function(){function e(t){Ue(this,e),this.auth=t,this.internalListeners=new Map}return Ve(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){_r(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var sc;!function(e){var t;null===(t=rt())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function cc(){return window}sc="Browser",gn(new Ct("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){_r(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),_r(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:sc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ni(sc)},i=new Oi(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Tr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),gn(new Ct("auth-internal",(function(e){return function(e){return new uc(e)}(Ri(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Dn(ac,oc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(sc)),Dn(ac,oc,"esm2017");var lc=2e3;function fc(e,t,n){return hc.apply(this,arguments)}function hc(){return hc=ge(ye().mark((function e(t,n,r){var i,a,o,u,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=cc(),o=a.BuildInfo,Er(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,gc(n.sessionId);case 4:return u=e.sent,s={},Ci()?s.ibi=o.packageName:Ei()?s.apn=o.packageName:gr(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Js(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),hc.apply(this,arguments)}function dc(){return dc=ge(ye().mark((function e(t){var n,r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cc(),r=n.BuildInfo,i={},Ci()?i.iosBundleId=r.packageName:Ei()?i.androidPackageName=r.packageName:gr(t,"operation-not-supported-in-this-environment"),e.next=5,Es(t,i);case 5:case"end":return e.stop()}}),e)}))),dc.apply(this,arguments)}function pc(e){var t=cc().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function vc(e,t,n){return yc.apply(this,arguments)}function yc(){return yc=ge(ye().mark((function e(t,n,r){var i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cc(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(kr(t,"redirect-cancelled-by-user"))}),lc))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Ei()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),yc.apply(this,arguments)}function mc(e){var t,n,r,i,a,o,u,s,c,l,f=cc();_r("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),_r("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),_r("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_r("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_r("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function gc(e){return kc.apply(this,arguments)}function kc(){return(kc=ge(ye().mark((function e(t){var n,r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=bc(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bc(e){if(Er(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var wc=20,xc=function(e){ze(n,e);var t=We(n);function n(){var e;return Ue(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Ve(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),ur(Ke(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xs);function _c(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Cc(),postBody:null,tenantId:e.tenantId,error:kr(e,"no-auth-event")}}function Ic(e,t){return Ac()._set(Nc(e),t)}function Ec(e){return Sc.apply(this,arguments)}function Sc(){return Sc=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ac()._get(Nc(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Ac()._remove(Nc(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Sc.apply(this,arguments)}function Tc(e,t){var n,r,i=function(e){var t=Dc(e),n=t.link?decodeURIComponent(t.link):void 0,r=Dc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Dc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Dc(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?kr(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Cc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<wc;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Ac(){return Tr(qo)}function Nc(e){return gi("authEvent",e.config.apiKey,e.name)}function Dc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=ke(t=n)||St(t)||we(t)||xe();r[0];return bt(r.slice(1).join("?"))}var Oc=function(){function e(){Ue(this,e),this._redirectPersistence=Ko,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=gs,this._overrideRedirectResult=us}return Ve(e,[{key:"_initialize",value:function(){var e=ge(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new xc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){gr(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ge(ye().mark((function e(t,n,r,i){var a,o,u,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mc(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),ts.clear(),e.next=10,this._originValidation(t);case 10:return o=_c(t,r,i),e.next=13,Ic(t,o);case 13:return e.next=15,fc(t,o,n);case 15:return u=e.sent,e.next=18,pc(u);case 18:return s=e.sent,e.abrupt("return",vc(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return dc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=cc(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ge(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ec(e);case 2:t.onEvent(Pc());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=ge(ye().mark((function n(r){var i,a;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Ec(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Tc(i,r.url)),t.onEvent(a||Pc());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");cc().handleOpenURL=function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Rc=Oc;function Pc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:kr("no-auth-event")}}var Lc="@firebase/auth-compat",Mc="0.3.5",Fc=1e3;function Uc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function jc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return!("file:"!==Uc()&&"ionic:"!==Uc()&&"capacitor:"!==Uc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Vc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return ft()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();return/Edge\/\d+/.test(e)}(e)}function Bc(){try{var e=self.localStorage,t=Ho();if(e)return e.setItem(t,"1"),e.removeItem(t),!Vc()||ht()}catch(n){return qc()&&ht()}return!1}function qc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function zc(){return("http:"===Uc()||"https:"===Uc()||ct()||jc())&&!(lt()||st())&&Bc()&&!qc()}function Kc(){return jc()&&"undefined"!==typeof document}function Gc(){return Wc.apply(this,arguments)}function Wc(){return(Wc=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Kc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),Fc);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hc={LOCAL:"local",NONE:"none",SESSION:"session"},Qc=_r,$c="persistence";function Yc(e,t){Qc(Object.values(Hc).includes(t),e,"invalid-persistence-type"),lt()?Qc(t!==Hc.SESSION,e,"unsupported-persistence-type"):st()?Qc(t===Hc.NONE,e,"unsupported-persistence-type"):qc()?Qc(t===Hc.NONE||t===Hc.LOCAL&&ht(),e,"unsupported-persistence-type"):Qc(t===Hc.NONE||Bc(),e,"unsupported-persistence-type")}function Xc(e){return Jc.apply(this,arguments)}function Jc(){return Jc=ge(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Zc(),r=gi($c,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Jc.apply(this,arguments)}function Zc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var el=_r,tl=function(){function e(){Ue(this,e),this.browserResolver=Tr(tc),this.cordovaResolver=Tr(Rc),this.underlyingResolver=null,this._redirectPersistence=Ko,this._completeRedirectFn=gs,this._overrideRedirectResult=us}return Ve(e,[{key:"_initialize",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ge(ye().mark((function e(t,n,r,i){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ge(ye().mark((function e(t,n,r,i){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Kc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return el(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ge(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Gc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function nl(e){return e.unwrap()}function rl(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new sl(e,function(e,t){var n,r=Et(e),i=t;return _r(t.customData.operationType,r,"argument-error"),_r(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Po._fromError(r,i)}(e,t));else if(r){var i=il(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function il(e){var t=(e instanceof dt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof dt)&&"temporaryProof"in t&&"phoneNumber"in t)return ju.credentialFromResult(e);var n,r=t.providerId;if(!r||r===lr.PASSWORD)return null;switch(r){case lr.GOOGLE:n=Ia;break;case lr.FACEBOOK:n=_a;break;case lr.GITHUB:n=Ea;break;case lr.TWITTER:n=Ca;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Sa._create(r,u):la._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new xa(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof dt?n.credentialFromError(e):n.credentialFromResult(e)}function al(e,t){return t.catch((function(t){throw t instanceof dt&&rl(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,il(t)),additionalUserInfo:Oo(e),user:cl.getOrCreate(r)}}))}function ol(e,t){return ul.apply(this,arguments)}function ul(){return ul=ge(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return al(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),ul.apply(this,arguments)}var sl=function(){function e(t,n){Ue(this,e),this.resolver=n,this.auth=t.wrapped()}return Ve(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return al(nl(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),cl=function(){function e(t){Ue(this,e),this._delegate=t,this.multiFactor=function(e){var t=Et(e);return Uo.has(t)||Uo.set(t,Fo._fromUser(t)),Uo.get(t)}(t)}return Ve(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",al(this.auth,$a(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(this.auth,Ru(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",al(this.auth,Xu(this._delegate,t,tl)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xc(Ri(this.auth));case 2:return e.abrupt("return",ps(this._delegate,t,tl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",al(this.auth,Xa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return ol(this.auth,function(e,t,n){return Lu.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return al(this.auth,function(e,t,n){return Yu.apply(this,arguments)}(this._delegate,e,tl))}},{key:"reauthenticateWithRedirect",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xc(Ri(this.auth));case 2:return e.abrupt("return",hs(this._delegate,t,tl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ko.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fa(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Io(Et(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Io(Et(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Uu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return _o.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return bo.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();cl.USER_MAP=new WeakMap;var ll=_r,fl=function(){function e(t,n){if(Ue(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;ll(r,"invalid-api-key",{appName:t.name}),ll(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?tl:void 0;this._delegate=n.initialize({options:{persistence:dl(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(dr),this.linkUnderlyingAuth()}return Ve(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?cl.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Li(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return uo.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return so(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return oo.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",al(this._delegate,fo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return go.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ga.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ge(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ll(zc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ys(this._delegate,tl);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",al(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Ri(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=hl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=hl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return po.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return ao.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ge(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Yc(this._delegate,t),e.t0=t,e.next=e.t0===Hc.SESSION?4:e.t0===Hc.LOCAL?6:e.t0===Hc.NONE?11:13;break;case 4:return n=Ko,e.abrupt("break",14);case 6:return e.next=8,Tr(pu)._isAvailable();case 8:return r=e.sent,n=r?pu:qo,e.abrupt("break",14);case 11:return n=mi,e.abrupt("break",14);case 13:return e.abrupt("return",gr("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return al(this._delegate,function(e){return Ra.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return al(this._delegate,Ha(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return al(this._delegate,function(e,t){return to.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return al(this._delegate,function(e,t,n){return Ha(Et(e),ka.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return al(this._delegate,function(e,t,n){return vo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return ol(this._delegate,function(e,t,n){return Ou.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ll(zc(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",al(this._delegate,Qu(this._delegate,t,tl)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ll(zc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Xc(this._delegate);case 3:return e.abrupt("return",ls(this._delegate,t,tl));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return lo.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function hl(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&cl.getOrCreate(e))},error:t,complete:n}}function dl(e,t){var n=function(e,t){var n=Zc();if(!n)return[];var r=gi($c,e,t);switch(n.getItem(r)){case Hc.NONE:return[mi];case Hc.LOCAL:return[pu,Ko];case Hc.SESSION:return[Ko];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(pu)||n.push(pu),"undefined"!==typeof window)for(var r=0,i=[qo,Ko];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(mi)||n.push(mi),n}fl.Persistence=Hc;var pl=function(){function e(){Ue(this,e),this.providerId="phone",this._delegate=new ju(nl(or.auth()))}return Ve(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return ju.credential(e,t)}}]),e}();pl.PHONE_SIGN_IN_METHOD=ju.PHONE_SIGN_IN_METHOD,pl.PROVIDER_ID=ju.PROVIDER_ID;var vl,yl=_r,ml=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:or.app();Ue(this,e),yl(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Au(t,n,i.auth()),this.type=this._delegate.type}return Ve(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}(),gl="auth-compat";(vl=or).INTERNAL.registerComponent(new Ct(gl,(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new fl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:fr.EMAIL_SIGNIN,PASSWORD_RESET:fr.PASSWORD_RESET,RECOVER_EMAIL:fr.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:fr.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:fr.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:fr.VERIFY_EMAIL}},EmailAuthProvider:ka,FacebookAuthProvider:_a,GithubAuthProvider:Ea,GoogleAuthProvider:Ia,OAuthProvider:xa,SAMLAuthProvider:Ta,PhoneAuthProvider:pl,PhoneMultiFactorGenerator:ic,RecaptchaVerifier:ml,TwitterAuthProvider:Ca,Auth:fl,AuthCredential:Ui,Error:dt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),vl.registerVersion(Lc,Mc);var kl,bl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},wl={},xl=xl||{},_l=bl||self;function Il(){}function El(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Sl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Tl="closure_uid_"+(1e9*Math.random()>>>0),Cl=0;function Al(e,t,n){return e.call.apply(e.bind,arguments)}function Nl(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Dl(e,t,n){return(Dl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Al:Nl).apply(null,arguments)}function Ol(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Rl(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Pl(){this.s=this.s,this.o=this.o}Pl.prototype.s=!1,Pl.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Tl)&&e[Tl]||(e[Tl]=++Cl)}(this)},Pl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ll=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ml(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Fl(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(El(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Ul(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ul.prototype.h=function(){this.defaultPrevented=!0};var jl=function(){if(!_l.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{_l.addEventListener("test",Il,t),_l.removeEventListener("test",Il,t)}catch(n){}return e}();function Vl(e){return/^[\s\xa0]*$/.test(e)}var Bl=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ql(e,t){return e<t?-1:e>t?1:0}function zl(){var e=_l.navigator;return e&&(e=e.userAgent)?e:""}function Kl(e){return-1!=zl().indexOf(e)}function Gl(e){return Gl[" "](e),e}Gl[" "]=Il;var Wl,Hl=Kl("Opera"),Ql=Kl("Trident")||Kl("MSIE"),$l=Kl("Edge"),Yl=$l||Ql,Xl=Kl("Gecko")&&!(-1!=zl().toLowerCase().indexOf("webkit")&&!Kl("Edge"))&&!(Kl("Trident")||Kl("MSIE"))&&!Kl("Edge"),Jl=-1!=zl().toLowerCase().indexOf("webkit")&&!Kl("Edge");function Zl(){var e=_l.document;return e?e.documentMode:void 0}e:{var ef="",tf=function(){var e=zl();return Xl?/rv:([^\);]+)(\)|;)/.exec(e):$l?/Edge\/([\d\.]+)/.exec(e):Ql?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Jl?/WebKit\/(\S+)/.exec(e):Hl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(tf&&(ef=tf?tf[1]:""),Ql){var nf=Zl();if(null!=nf&&nf>parseFloat(ef)){Wl=String(nf);break e}}Wl=ef}var rf,af={};function of(){return function(e){var t=af;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Bl(String(Wl)).split("."),n=Bl("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=ql(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||ql(0==a[2].length,0==o[2].length)||ql(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(_l.document&&Ql){var uf=Zl();rf=uf||(parseInt(Wl,10)||void 0)}else rf=void 0;var sf=rf;function cf(e,t){if(Ul.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Xl){e:{try{Gl(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:lf[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&cf.X.h.call(this)}}Rl(cf,Ul);var lf={2:"touch",3:"pen",4:"mouse"};cf.prototype.h=function(){cf.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ff="closure_listenable_"+(1e6*Math.random()|0),hf=0;function df(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++hf,this.ba=this.ea=!1}function pf(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function vf(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function yf(e){var t={};for(var n in e)t[n]=e[n];return t}var mf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gf(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<mf.length;a++)n=mf[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function kf(e){this.src=e,this.g={},this.h=0}function bf(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Ll(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(pf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function wf(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}kf.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=wf(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new df(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var xf="closure_lm_"+(1e6*Math.random()|0),_f={};function If(e,t,n,r,i){if(r&&r.once)return Sf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)If(e,t[a],n,r,i);return null}return n=Rf(n),e&&e[ff]?e.N(t,n,Sl(r)?!!r.capture:!!r,i):Ef(e,t,n,!1,r,i)}function Ef(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Sl(i)?!!i.capture:!!i,u=Df(e);if(u||(e[xf]=u=new kf(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Nf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)jl||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Af(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Sf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Sf(e,t[a],n,r,i);return null}return n=Rf(n),e&&e[ff]?e.O(t,n,Sl(r)?!!r.capture:!!r,i):Ef(e,t,n,!0,r,i)}function Tf(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Tf(e,t[a],n,r,i);else r=Sl(r)?!!r.capture:!!r,n=Rf(n),e&&e[ff]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=wf(a=e.g[t],n,r,i))&&(pf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Df(e))&&(t=e.g[t.toString()],e=-1,t&&(e=wf(t,n,r,i)),(n=-1<e?t[e]:null)&&Cf(n))}function Cf(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[ff])bf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Af(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Df(t))?(bf(n,e),0==n.h&&(n.src=null,t[xf]=null)):pf(e)}}}function Af(e){return e in _f?_f[e]:_f[e]="on"+e}function Nf(e,t){if(e.ba)e=!0;else{t=new cf(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Cf(e),e=n.call(r,t)}return e}function Df(e){return(e=e[xf])instanceof kf?e:null}var Of="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rf(e){return"function"===typeof e?e:(e[Of]||(e[Of]=function(t){return e.handleEvent(t)}),e[Of])}function Pf(){Pl.call(this),this.i=new kf(this),this.P=this,this.I=null}function Lf(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Ul(t,e);else if(t instanceof Ul)t.target=t.target||e;else{var i=t;gf(t=new Ul(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Mf(o,r,!0,t)&&i}if(i=Mf(o=t.g=e,r,!0,t)&&i,i=Mf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Mf(o=t.g=n[a],r,!1,t)&&i}function Mf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&bf(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Rl(Pf,Pl),Pf.prototype[ff]=!0,Pf.prototype.removeEventListener=function(e,t,n,r){Tf(this,e,t,n,r)},Pf.prototype.M=function(){if(Pf.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)pf(n[r]);delete t.g[e],t.h--}}this.I=null},Pf.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Pf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ff=_l.JSON.stringify;function Uf(){var e=Wf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var jf,Vf=function(){function e(){Ue(this,e),this.h=this.g=null}return Ve(e,[{key:"add",value:function(e,t){var n=Bf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Bf=new(function(){function e(t,n){Ue(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ve(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new qf}),(function(e){return e.reset()})),qf=function(){function e(){Ue(this,e),this.next=this.g=this.h=null}return Ve(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function zf(e){_l.setTimeout((function(){throw e}),0)}function Kf(e,t){jf||function(){var e=_l.Promise.resolve(void 0);jf=function(){e.then(Hf)}}(),Gf||(jf(),Gf=!0),Wf.add(e,t)}var Gf=!1,Wf=new Vf;function Hf(){for(var e;e=Uf();){try{e.h.call(e.g)}catch(n){zf(n)}var t=Bf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Gf=!1}function Qf(e,t){Pf.call(this),this.h=e||1,this.g=t||_l,this.j=Dl(this.lb,this),this.l=Date.now()}function $f(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Yf(e,t,n){if("function"===typeof e)n&&(e=Dl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Dl(e.handleEvent,e)}return 2147483647<Number(t)?-1:_l.setTimeout(e,t||0)}function Xf(e){e.g=Yf((function(){e.g=null,e.i&&(e.i=!1,Xf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Rl(Qf,Pf),(kl=Qf.prototype).ca=!1,kl.R=null,kl.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Lf(this,"tick"),this.ca&&($f(this),this.start()))}},kl.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},kl.M=function(){Qf.X.M.call(this),$f(this),delete this.g};var Jf=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ve(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Xf(this)}},{key:"M",value:function(){ur(Ke(n.prototype),"M",this).call(this),this.g&&(_l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Pl);function Zf(e){Pl.call(this),this.h=e,this.g={}}Rl(Zf,Pl);var eh=[];function th(e,t,n,r){Array.isArray(n)||(n&&(eh[0]=n.toString()),n=eh);for(var i=0;i<n.length;i++){var a=If(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function nh(e){vf(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Cf(e)}),e),e.g={}}function rh(){this.g=!0}function ih(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ff(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Zf.prototype.M=function(){Zf.X.M.call(this),nh(this)},Zf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rh.prototype.Aa=function(){this.g=!1},rh.prototype.info=function(){};var ah={},oh=null;function uh(){return oh=oh||new Pf}function sh(e){Ul.call(this,ah.Pa,e)}function ch(e){var t=uh();Lf(t,new sh(t))}function lh(e,t){Ul.call(this,ah.STAT_EVENT,e),this.stat=t}function fh(e){var t=uh();Lf(t,new lh(t,e))}function hh(e,t){Ul.call(this,ah.Qa,e),this.size=t}function dh(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return _l.setTimeout((function(){e()}),t)}ah.Pa="serverreachability",Rl(sh,Ul),ah.STAT_EVENT="statevent",Rl(lh,Ul),ah.Qa="timingevent",Rl(hh,Ul);var ph={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},vh={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function yh(){}function mh(e){return e.h||(e.h=e.i())}function gh(){}yh.prototype.h=null;var kh,bh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function wh(){Ul.call(this,"d")}function xh(){Ul.call(this,"c")}function _h(){}function Ih(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Zf(this),this.O=Sh,e=Yl?125:void 0,this.T=new Qf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Eh}function Eh(){this.i=null,this.g="",this.h=!1}Rl(wh,Ul),Rl(xh,Ul),Rl(_h,yh),_h.prototype.g=function(){return new XMLHttpRequest},_h.prototype.i=function(){return{}},kh=new _h;var Sh=45e3,Th={},Ch={};function Ah(e,t,n){e.K=1,e.v=Qh(zh(t)),e.s=n,e.P=!0,Nh(e,null)}function Nh(e,t){e.F=Date.now(),Ph(e),e.A=zh(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),ud(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Eh,e.g=up(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Jf(Dl(e.La,e,e.g),e.N)),th(e.S,e.g,"readystatechange",e.ib),t=e.H?yf(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),ch(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Dh(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Oh(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Rh(e,n))==Ch){4==t&&(e.o=4,fh(14),i=!1),ih(e.j,e.m,null,"[Incomplete Response]");break}if(r==Th){e.o=4,fh(15),ih(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ih(e.j,e.m,r,null),jh(e,r)}Dh(e)&&r!=Ch&&r!=Th&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,fh(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Zd(t),t.K=!0,fh(11))):(ih(e.j,e.m,n,"[Invalid Chunked Response]"),Uh(e),Fh(e))}function Rh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ch:(n=Number(t.substring(n,r)),isNaN(n)?Th:(r+=1)+n>t.length?Ch:(t=t.substr(r,n),e.C=r+n,t))}function Ph(e){e.V=Date.now()+e.O,Lh(e,e.O)}function Lh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=dh(Dl(e.gb,e),t)}function Mh(e){e.B&&(_l.clearTimeout(e.B),e.B=null)}function Fh(e){0==e.l.G||e.I||np(e.l,e)}function Uh(e){Mh(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,$f(e.T),nh(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function jh(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||pd(n.h,e)))if(!e.J&&pd(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;tp(n),Gd(n)}Jd(n),fh(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=dh(Dl(n.cb,n),6e3));if(1>=dd(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else ip(n,11)}else if((e.J||n.g==e)&&tp(n),!Vl(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(vd(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,Hh(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=op(r,r.H?r.ka:null,r.V),d.J){yd(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Mh(p),Ph(p)),r.g=d}else Xd(r);0<n.i.length&&Hd(n)}else"stop"!=a[0]&&"close"!=a[0]||ip(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ip(n,7):Kd(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}ch()}catch(a){}}function Vh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(El(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(El(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(El(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(kl=Ih.prototype).setTimeout=function(e){this.O=e},kl.ib=function(e){e=e.target;var t=this.L;t&&3==Ud(e)?t.l():this.La(e)},kl.La=function(e){try{if(e==this.g)e:{var t=Ud(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Yl||this.g&&(this.h.h||this.g.fa()||jd(this.g)))){this.I||4!=t||7==n||ch(),Mh(this);var r=this.g.aa();this.Y=r;t:if(Dh(this)){var i=jd(this.g);e="";var a=i.length,o=4==Ud(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Uh(this),Fh(this);var u="";break t}this.h.i=new _l.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vl(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,fh(12),Uh(this),Fh(this);break e}ih(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,jh(this,r)}this.P?(Oh(this,t,u),Yl&&this.i&&3==t&&(th(this.S,this.T,"tick",this.hb),this.T.start())):(ih(this.j,this.m,u,null),jh(this,u)),4==t&&Uh(this),this.i&&!this.I&&(4==t?np(this.l,this):(this.i=!1,Ph(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,fh(12)):(this.o=0,fh(13)),Uh(this),Fh(this)}}}catch(t){}},kl.hb=function(){if(this.g){var e=Ud(this.g),t=this.g.fa();this.C<t.length&&(Mh(this),Oh(this,e,t),this.i&&4!=e&&Ph(this))}},kl.cancel=function(){this.I=!0,Uh(this)},kl.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ch(),fh(17)),Uh(this),this.o=2,Fh(this)):Lh(this,this.V-e)};var Bh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qh(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof qh){this.h=void 0!==t?t:e.h,Kh(this,e.j),this.s=e.s,this.g=e.g,Gh(this,e.m),this.l=e.l,t=e.i;var n=new rd;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Wh(this,n),this.o=e.o}else e&&(n=String(e).match(Bh))?(this.h=!!t,Kh(this,n[1]||"",!0),this.s=$h(n[2]||""),this.g=$h(n[3]||"",!0),Gh(this,n[4]),this.l=$h(n[5]||"",!0),Wh(this,n[6]||"",!0),this.o=$h(n[7]||"")):(this.h=!!t,this.i=new rd(null,this.h))}function zh(e){return new qh(e)}function Kh(e,t,n){e.j=n?$h(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Gh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Wh(e,t,n){t instanceof rd?(e.i=t,function(e,t){t&&!e.j&&(id(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ad(this,t),ud(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Yh(t,td)),e.i=new rd(t,e.h))}function Hh(e,t,n){e.i.set(t,n)}function Qh(e){return Hh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function $h(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Yh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Xh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Xh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}qh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Yh(t,Jh,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Yh(t,Jh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Yh(n,"/"==n.charAt(0)?ed:Zh,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Yh(n,nd)),e.join("")};var Jh=/[#\/\?@]/g,Zh=/[#\?:]/g,ed=/[#\?]/g,td=/[#\?@]/g,nd=/#/g;function rd(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function id(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ad(e,t){id(e),t=sd(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function od(e,t){return id(e),t=sd(e,t),e.g.has(t)}function ud(e,t,n){ad(e,t),0<n.length&&(e.i=null,e.g.set(sd(e,t),Ml(n)),e.h+=n.length)}function sd(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(kl=rd.prototype).add=function(e,t){id(this),this.i=null,e=sd(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},kl.forEach=function(e,t){id(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},kl.oa=function(){id(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},kl.W=function(e){id(this);var t=[];if("string"===typeof e)od(this,e)&&(t=t.concat(this.g.get(sd(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},kl.set=function(e,t){return id(this),this.i=null,od(this,e=sd(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},kl.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},kl.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var cd=Ve((function e(t,n){Ue(this,e),this.h=t,this.g=n}));function ld(e){this.l=e||fd,_l.PerformanceNavigationTiming?e=0<(e=_l.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(_l.g&&_l.g.Ga&&_l.g.Ga()&&_l.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var fd=10;function hd(e){return!!e.h||!!e.g&&e.g.size>=e.j}function dd(e){return e.h?1:e.g?e.g.size:0}function pd(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function vd(e,t){e.g?e.g.add(t):e.h=t}function yd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function md(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Be(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Ml(e.i)}function gd(){}function kd(){this.g=new gd}function bd(e,t,n){var r=n||"";try{Vh(e,(function(e,n){var i=e;Sl(e)&&(i=Ff(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function wd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function xd(e){this.l=e.ac||null,this.j=e.jb||!1}function _d(e,t){Pf.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Id,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ld.prototype.cancel=function(){if(this.i=md(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Be(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},gd.prototype.stringify=function(e){return _l.JSON.stringify(e,void 0)},gd.prototype.parse=function(e){return _l.JSON.parse(e,void 0)},Rl(xd,yh),xd.prototype.g=function(){return new _d(this.l,this.j)},xd.prototype.i=function(e){return function(){return e}}({}),Rl(_d,Pf);var Id=0;function Ed(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Sd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Td(e)}function Td(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(kl=_d.prototype).open=function(e,t){if(this.readyState!=Id)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Td(this)},kl.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||_l).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},kl.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sd(this)),this.readyState=Id},kl.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Td(this)),this.g&&(this.readyState=3,Td(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof _l.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ed(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},kl.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Sd(this):Td(this),3==this.readyState&&Ed(this)}},kl.Va=function(e){this.g&&(this.response=this.responseText=e,Sd(this))},kl.Ua=function(e){this.g&&(this.response=e,Sd(this))},kl.ga=function(){this.g&&Sd(this)},kl.setRequestHeader=function(e,t){this.v.append(e,t)},kl.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},kl.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(_d.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Cd=_l.JSON.parse;function Ad(e){Pf.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Nd,this.K=this.L=!1}Rl(Ad,Pf);var Nd="",Dd=/^https?$/i,Od=["POST","PUT"];function Rd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Pd(e),Md(e)}function Pd(e){e.D||(e.D=!0,Lf(e,"complete"),Lf(e,"error"))}function Ld(e){if(e.h&&"undefined"!=typeof xl&&(!e.C[1]||4!=Ud(e)||2!=e.aa()))if(e.v&&4==Ud(e))Yf(e.Ha,0,e);else if(Lf(e,"readystatechange"),4==Ud(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Bh)[1]||null;if(!a&&_l.self&&_l.self.location){var o=_l.self.location.protocol;a=o.substr(0,o.length-1)}i=!Dd.test(a?a.toLowerCase():"")}t=i}if(t)Lf(e,"complete"),Lf(e,"success");else{e.m=6;try{var u=2<Ud(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",Pd(e)}}finally{Md(e)}}}function Md(e,t){if(e.g){Fd(e);var n=e.g,r=e.C[0]?Il:null;e.g=null,e.C=null,t||Lf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Fd(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(_l.clearTimeout(e.A),e.A=null)}function Ud(e){return e.g?e.g.readyState:0}function jd(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Nd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ep){return null}}function Vd(e){var t="";return vf(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Bd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Vd(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Hh(e,t,n))}function qd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zd(e){this.Ca=0,this.i=[],this.j=new rh,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=qd("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=qd("baseRetryDelayMs",5e3,e),this.bb=qd("retryDelaySeedMs",1e4,e),this.$a=qd("forwardChannelMaxRetries",2,e),this.ta=qd("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new ld(e&&e.concurrentRequestLimit),this.Fa=new kd,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Kd(e){if(Wd(e),3==e.G){var t=e.U++,n=zh(e.F);Hh(n,"SID",e.I),Hh(n,"RID",t),Hh(n,"TYPE","terminate"),$d(e,n),(t=new Ih(e,e.j,t,void 0)).K=2,t.v=Qh(zh(n)),n=!1,_l.navigator&&_l.navigator.sendBeacon&&(n=_l.navigator.sendBeacon(t.v.toString(),"")),!n&&_l.Image&&((new Image).src=t.v,n=!0),n||(t.g=up(t.l,null),t.g.da(t.v)),t.F=Date.now(),Ph(t)}ap(e)}function Gd(e){e.g&&(Zd(e),e.g.cancel(),e.g=null)}function Wd(e){Gd(e),e.u&&(_l.clearTimeout(e.u),e.u=null),tp(e),e.h.cancel(),e.m&&("number"===typeof e.m&&_l.clearTimeout(e.m),e.m=null)}function Hd(e){hd(e.h)||e.m||(e.m=!0,Kf(e.Ja,e),e.C=0)}function Qd(e,t){var n;n=t?t.m:e.U++;var r=zh(e.F);Hh(r,"SID",e.I),Hh(r,"RID",n),Hh(r,"AID",e.T),$d(e,r),e.o&&e.s&&Bd(r,e.o,e.s),n=new Ih(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Yd(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),vd(e.h,n),Ah(n,r,t)}function $d(e,t){e.ia&&vf(e.ia,(function(e,n){Hh(t,n,e)})),e.l&&Vh({},(function(e,n){Hh(t,n,e)}))}function Yd(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Dl(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{bd(l,o,"req"+c+"_")}catch(Pp){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Xd(e){e.g||e.u||(e.Z=1,Kf(e.Ia,e),e.A=0)}function Jd(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=dh(Dl(e.Ia,e),rp(e,e.A)),e.A++,!0)}function Zd(e){null!=e.B&&(_l.clearTimeout(e.B),e.B=null)}function ep(e){e.g=new Ih(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=zh(e.sa);Hh(t,"RID","rpc"),Hh(t,"SID",e.I),Hh(t,"CI",e.L?"0":"1"),Hh(t,"AID",e.T),Hh(t,"TYPE","xmlhttp"),$d(e,t),e.o&&e.s&&Bd(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Qh(zh(t)),n.s=null,n.P=!0,Nh(n,e)}function tp(e){null!=e.v&&(_l.clearTimeout(e.v),e.v=null)}function np(e,t){var n=null;if(e.g==t){tp(e),Zd(e),e.g=null;var r=2}else{if(!pd(e.h,t))return;n=t.D,yd(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Lf(r=uh(),new hh(r,n)),Hd(e)}else Xd(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(dd(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=dh(Dl(e.Ja,e,t),rp(e,e.C)),e.C++,!0))}(e,t)||2==r&&Jd(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:ip(e,5);break;case 4:ip(e,10);break;case 3:ip(e,6);break;default:ip(e,2)}}function rp(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function ip(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Dl(e.kb,e);n||(n=new qh("//www.google.com/images/cleardot.gif"),_l.location&&"http"==_l.location.protocol||Kh(n,"https"),Qh(n)),function(e,t){var n=new rh;if(_l.Image){var r=new Image;r.onload=Ol(wd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ol(wd,n,r,"TestLoadImage: error",!1,t),r.onabort=Ol(wd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ol(wd,n,r,"TestLoadImage: timeout",!1,t),_l.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else fh(2);e.G=0,e.l&&e.l.va(t),ap(e),Wd(e)}function ap(e){if(e.G=0,e.la=[],e.l){var t=md(e.h);0==t.length&&0==e.i.length||(Fl(e.la,t),Fl(e.la,e.i),e.h.i.length=0,Ml(e.i),e.i.length=0),e.l.ua()}}function op(e,t,n){var r=n instanceof qh?zh(n):new qh(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Gh(r,r.m);else{var i=_l.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new qh(null,void 0);r&&Kh(a,r),t&&(a.g=t),i&&Gh(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Hh(r,n,t),Hh(r,"VER",e.ma),$d(e,r),r}function up(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Ad(new xd({jb:!0})):new Ad(e.ra)).Ka(e.H),t}function sp(){}function cp(){if(Ql&&!(10<=Number(sf)))throw Error("Environmental error: no available transport.")}function lp(e,t){Pf.call(this),this.g=new zd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Vl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Vl(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new dp(this)}function fp(e){wh.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function hp(){xh.call(this),this.status=1}function dp(e){this.g=e}(kl=Ad.prototype).Ka=function(e){this.L=e},kl.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():kh.g(),this.C=this.u?mh(this.u):mh(kh),this.g.onreadystatechange=Dl(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Rd(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=Be(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=_l.FormData&&e instanceof _l.FormData,!(0<=Ll(Od,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=Be(n);try{for(c.s();!(s=c.n()).done;){var l=_e(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Fd(this),0<this.B&&((this.K=function(e){return Ql&&of()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dl(this.qa,this)):this.A=Yf(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Rd(this,u)}},kl.qa=function(){"undefined"!=typeof xl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lf(this,"timeout"),this.abort(8))},kl.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Lf(this,"complete"),Lf(this,"abort"),Md(this))},kl.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Md(this,!0)),Ad.X.M.call(this)},kl.Ha=function(){this.s||(this.F||this.v||this.l?Ld(this):this.fb())},kl.fb=function(){Ld(this)},kl.aa=function(){try{return 2<Ud(this)?this.g.status:-1}catch(Re){return-1}},kl.fa=function(){try{return this.g?this.g.responseText:""}catch(Re){return""}},kl.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Cd(t)}},kl.Ea=function(){return this.m},kl.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(kl=zd.prototype).ma=8,kl.G=1,kl.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Ih(this,this.j,e,void 0),n=this.s;if(this.S&&(n?gf(n=yf(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Yd(this,t,r),Hh(i=zh(this.F),"RID",e),Hh(i,"CVER",22),this.D&&Hh(i,"X-HTTP-Session-Id",this.D),$d(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Vd(n)))+"&"+r:this.o&&Bd(i,this.o,n)),vd(this.h,t),this.Ya&&Hh(i,"TYPE","init"),this.O?(Hh(i,"$req",r),Hh(i,"SID","null"),t.Z=!0,Ah(t,i,null)):Ah(t,i,r),this.G=2}}else 3==this.G&&(e?Qd(this,e):0==this.i.length||hd(this.h)||Qd(this))},kl.Ia=function(){if(this.u=null,ep(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=dh(Dl(this.eb,this),e)}},kl.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,fh(10),Gd(this),ep(this))},kl.cb=function(){null!=this.v&&(this.v=null,Gd(this),Jd(this),fh(19))},kl.kb=function(e){e?(this.j.info("Successfully pinged google.com"),fh(2)):(this.j.info("Failed to ping google.com"),fh(1))},(kl=sp.prototype).xa=function(){},kl.wa=function(){},kl.va=function(){},kl.ua=function(){},kl.Ra=function(){},cp.prototype.g=function(e,t){return new lp(e,t)},Rl(lp,Pf),lp.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;fh(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=op(e,null,e.V),Hd(e)},lp.prototype.close=function(){Kd(this.g)},lp.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ff(e),e=n);t.i.push(new cd(t.ab++,e)),3==t.G&&Hd(t)},lp.prototype.M=function(){this.g.l=null,delete this.j,Kd(this.g),delete this.g,lp.X.M.call(this)},Rl(fp,wh),Rl(hp,xh),Rl(dp,sp),dp.prototype.xa=function(){Lf(this.g,"a")},dp.prototype.wa=function(e){Lf(this.g,new fp(e))},dp.prototype.va=function(e){Lf(this.g,new hp)},dp.prototype.ua=function(){Lf(this.g,"b")},cp.prototype.createWebChannel=cp.prototype.g,lp.prototype.send=lp.prototype.u,lp.prototype.open=lp.prototype.m,lp.prototype.close=lp.prototype.close,ph.NO_ERROR=0,ph.TIMEOUT=8,ph.HTTP_ERROR=6,vh.COMPLETE="complete",gh.EventType=bh,bh.OPEN="a",bh.CLOSE="b",bh.ERROR="c",bh.MESSAGE="d",Pf.prototype.listen=Pf.prototype.N,Ad.prototype.listenOnce=Ad.prototype.O,Ad.prototype.getLastError=Ad.prototype.Oa,Ad.prototype.getLastErrorCode=Ad.prototype.Ea,Ad.prototype.getStatus=Ad.prototype.aa,Ad.prototype.getResponseJson=Ad.prototype.Sa,Ad.prototype.getResponseText=Ad.prototype.fa,Ad.prototype.send=Ad.prototype.da,Ad.prototype.setWithCredentials=Ad.prototype.Ka;var pp=wl.createWebChannelTransport=function(){return new cp},vp=wl.getStatEventTarget=function(){return uh()},yp=wl.ErrorCode=ph,mp=wl.EventType=vh,gp=wl.Event=ah,kp=wl.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},bp=wl.FetchXmlHttpFactory=xd,wp=wl.WebChannel=gh,xp=wl.XhrIo=Ad,_p="@firebase/firestore",Ip=function(){function e(t){Ue(this,e),this.uid=t}return Ve(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ip.UNAUTHENTICATED=new Ip(null),Ip.GOOGLE_CREDENTIALS=new Ip("google-credentials-uid"),Ip.FIRST_PARTY=new Ip("first-party-uid"),Ip.MOCK_USER=new Ip("mock-user");var Ep="9.18.0",Sp=new jt("@firebase/firestore");function Tp(){return Sp.logLevel}function Cp(e){if(Sp.logLevel<=Ot.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Dp);Sp.debug.apply(Sp,["Firestore (".concat(Ep,"): ").concat(e)].concat(Tt(i)))}}function Ap(e){if(Sp.logLevel<=Ot.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Dp);Sp.error.apply(Sp,["Firestore (".concat(Ep,"): ").concat(e)].concat(Tt(i)))}}function Np(e){if(Sp.logLevel<=Ot.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Dp);Sp.warn.apply(Sp,["Firestore (".concat(Ep,"): ").concat(e)].concat(Tt(i)))}}function Dp(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Op(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Ep,") INTERNAL ASSERTION FAILED: ")+e;throw Ap(t),new Error(t)}function Rp(e,t){e||Op()}function Pp(e,t){return e}var Lp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Mp=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ve(n)}(dt),Fp=Ve((function e(){var t=this;Ue(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Up=Ve((function e(t,n){Ue(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),jp=function(){function e(){Ue(this,e)}return Ve(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ip.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Vp=function(){function e(t){Ue(this,e),this.token=t,this.changeListener=null}return Ve(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Bp=function(){function e(t){Ue(this,e),this.t=t,this.currentUser=Ip.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ve(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Fp;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Fp,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Cp("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Cp("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Fp)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Cp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Rp("string"==typeof n.accessToken),new Up(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Rp(null===e||"string"==typeof e),new Ip(e)}}]),e}(),qp=function(){function e(t,n,r,i){Ue(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Ip.FIRST_PARTY,this.p=new Map}return Ve(e,[{key:"I",value:function(){return this.g?this.g():(Rp(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),zp=function(){function e(t,n,r,i){Ue(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return Ve(e,[{key:"getToken",value:function(){return Promise.resolve(new qp(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ip.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Kp=Ve((function e(t){Ue(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Gp=function(){function e(t){Ue(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return Ve(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Cp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Cp("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Cp("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Cp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Rp("string"==typeof t.token),e.A=t.token,new Kp(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Wp(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Hp=function(){function e(){Ue(this,e)}return Ve(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Wp(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Qp(e,t){return e<t?-1:e>t?1:0}function $p(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Yp(e){return e+"\0"}var Xp=function(){function e(t,n){if(Ue(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Mp(Lp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Mp(Lp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Mp(Lp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Mp(Lp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ve(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Qp(this.nanoseconds,e.nanoseconds):Qp(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Jp=function(){function e(t){Ue(this,e),this.timestamp=t}return Ve(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Xp(0,0))}},{key:"max",value:function(){return new e(new Xp(253402300799,999999999))}}]),e}(),Zp=function(){function e(t,n,r){Ue(this,e),void 0===n?n=0:n>t.length&&Op(),void 0===r?r=t.length-n:r>t.length-n&&Op(),this.segments=t,this.offset=n,this.len=r}return Ve(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ev=function(e){ze(n,e);var t=We(n);function n(){return Ue(this,n),t.apply(this,arguments)}return Ve(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Mp(Lp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Tt(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Zp),tv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nv=function(e){ze(n,e);var t=We(n);function n(){return Ue(this,n),t.apply(this,arguments)}return Ve(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return tv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Mp(Lp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Mp(Lp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Mp(Lp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Mp(Lp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Zp),rv=function(){function e(t){Ue(this,e),this.path=t}return Ve(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ev.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(ev.fromString(t))}},{key:"fromName",value:function(t){return new e(ev.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ev.emptyPath())}},{key:"comparator",value:function(e,t){return ev.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ev(t.slice()))}}]),e}(),iv=Ve((function e(t,n,r,i){Ue(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function av(e){return e.fields.find((function(e){return 2===e.kind}))}function ov(e){return e.fields.filter((function(e){return 2!==e.kind}))}iv.UNKNOWN_ID=-1;var uv=Ve((function e(t,n){Ue(this,e),this.fieldPath=t,this.kind=n}));var sv=function(){function e(t,n){Ue(this,e),this.sequenceNumber=t,this.offset=n}return Ve(e,null,[{key:"empty",value:function(){return new e(0,fv.min())}}]),e}();function cv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Jp.fromTimestamp(1e9===r?new Xp(n+1,0):new Xp(n,r));return new fv(i,rv.empty(),t)}function lv(e){return new fv(e.readTime,e.key,-1)}var fv=function(){function e(t,n,r){Ue(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Ve(e,null,[{key:"min",value:function(){return new e(Jp.min(),rv.empty(),-1)}},{key:"max",value:function(){return new e(Jp.max(),rv.empty(),-1)}}]),e}();function hv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=rv.comparator(e.documentKey,t.documentKey))?n:Qp(e.largestBatchId,t.largestBatchId)}var dv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pv=function(){function e(){Ue(this,e),this.onCommittedListeners=[]}return Ve(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function vv(e){return yv.apply(this,arguments)}function yv(){return yv=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Lp.FAILED_PRECONDITION&&t.message===dv){e.next=2;break}throw t;case 2:Cp("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),yv.apply(this,arguments)}var mv=function(){function e(t){var n=this;Ue(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ve(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Op(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Be(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),gv=function(){function e(t,n){var r=this;Ue(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new Fp,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new wv(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=Sv(e.target.error);r.P.reject(new wv(t,n))}}return Ve(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(Cp("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new _v(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new wv(n,t)}}}]),e}(),kv=function(){function e(t,n,r){Ue(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(ut())&&Ap("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ve(e,[{key:"O",value:function(){var e=ge(ye().mark((function e(t){var n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Cp("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new wv(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Mp(Lp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Mp(Lp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new wv(t,n))},i.onupgradeneeded=function(e){Cp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.F(t,i.transaction,e.oldVersion,n.version).next((function(){Cp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ge(ye().mark((function e(t,n,r,i){var a,o,u,s,c=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=ye().mark((function e(){var n,u,s,l;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.O(t);case 4:return c.db=e.sent,n=gv.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),mv.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Cp("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Cp("SimpleDb","Removing database:",e),Iv(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!ht())return!1;if(e.N())return!0;var t=ut(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/80years",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyC4ovC2q_c5LvL4kpIxB_WWy_28bhhV6tw",REACT_APP_AUTH_DOMAIN:"yearsapp-262dd.firebaseapp.com",REACT_APP_PROJECT_ID:"yearsapp-262dd",REACT_APP_STORAGE_BUCKET:"yearsapp-262dd.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"384872258672",REACT_APP_ID:"1:384872258672:web:4a48090fb0a6a1dca4e8b5",REACT_APP_MEASUREMENT_ID:"G-VJ52PCD2LB"})||void 0===e?void 0:e.$)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),bv=function(){function e(t){Ue(this,e),this.q=t,this.U=!1,this.K=null}return Ve(e,[{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return Iv(this.q.delete())}}]),e}(),wv=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this,Lp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ve(n)}(Mp);function xv(e){return"IndexedDbTransactionError"===e.name}var _v=function(){function e(t){Ue(this,e),this.store=t}return Ve(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Cp("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Cp("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Iv(n)}},{key:"add",value:function(e){return Cp("SimpleDb","ADD",this.store.name,e,e),Iv(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Iv(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Cp("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Cp("SimpleDb","DELETE",this.store.name,e),Iv(this.store.delete(e))}},{key:"count",value:function(){return Cp("SimpleDb","COUNT",this.store.name),Iv(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new mv((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new mv((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){Cp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Z=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new mv((function(n,r){t.onerror=function(e){var t=Sv(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new mv((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new bv(i),o=t(i.primaryKey,i.value,a);if(o instanceof mv){var u=o.catch((function(e){return a.done(),mv.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return mv.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Z?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Iv(e){return new mv((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Sv(e.target.error);n(t)}}))}var Ev=!1;function Sv(e){var t=kv.D(ut());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Mp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ev||(Ev=!0,setTimeout((function(){throw r}),0)),r}}return e}var Tv=function(){function e(t,n){Ue(this,e),this.asyncQueue=t,this.et=n,this.task=null}return Ve(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;Cp("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Cp,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!xv(e.t4)){e.next=17;break}Cp("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,vv(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Cv=function(){function e(t,n){Ue(this,e),this.localStore=t,this.persistence=n}return Ve(e,[{key:"st",value:function(){var e=ge(ye().mark((function e(){var t,n=this,r=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return mv.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Cp("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return Cp("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=lv(t);hv(r,n)>0&&(n=r)})),new fv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Av=function(){function e(t,n){var r=this;Ue(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return Ve(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();Av.at=-1;var Nv=Ve((function e(t,n,r,i,a,o,u,s){Ue(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Dv=function(){function e(t,n){Ue(this,e),this.projectId=t,this.database=n||"(default)"}return Ve(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Ov(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rv(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Pv(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Lv(e){return null==e}function Mv(e){return 0===e&&1/e==-1/0}function Fv(e){return"number"==typeof e&&Number.isInteger(e)&&!Mv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Uv=function(e){ze(n,e);var t=We(n);function n(){var e;return Ue(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return Ve(n)}(Qe(Error));var jv=function(e){function t(e){Ue(this,t),this.binaryString=e}return Ve(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Qp(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw e instanceof DOMException?new Uv("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();jv.EMPTY_BYTE_STRING=new jv("");var Vv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bv(e){if(Rp(!!e),"string"==typeof e){var t=0,n=Vv.exec(e);if(Rp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:qv(e.seconds),nanos:qv(e.nanos)}}function qv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function zv(e){return"string"==typeof e?jv.fromBase64String(e):jv.fromUint8Array(e)}function Kv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gv(e){var t=e.mapValue.fields.__previous_value__;return Kv(t)?Gv(t):t}function Wv(e){var t=Bv(e.mapValue.fields.__local_write_time__.timestampValue);return new Xp(t.seconds,t.nanos)}var Hv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qv={nullValue:"NULL_VALUE"};function $v(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Kv(e)?4:cy(e)?9007199254740991:10:Op()}function Yv(e,t){if(e===t)return!0;var n=$v(e);if(n!==$v(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Wv(e).isEqual(Wv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Bv(e.timestampValue),r=Bv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return zv(e.bytesValue).isEqual(zv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return qv(e.geoPointValue.latitude)===qv(t.geoPointValue.latitude)&&qv(e.geoPointValue.longitude)===qv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return qv(e.integerValue)===qv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=qv(e.doubleValue),r=qv(t.doubleValue);return n===r?Mv(n)===Mv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return $p(e.arrayValue.values||[],t.arrayValue.values||[],Yv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ov(n)!==Ov(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yv(n[i],r[i])))return!1;return!0}(e,t);default:return Op()}}function Xv(e,t){return void 0!==(e.values||[]).find((function(e){return Yv(e,t)}))}function Jv(e,t){if(e===t)return 0;var n=$v(e),r=$v(t);if(n!==r)return Qp(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qp(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=qv(e.integerValue||e.doubleValue),r=qv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Zv(e.timestampValue,t.timestampValue);case 4:return Zv(Wv(e),Wv(t));case 5:return Qp(e.stringValue,t.stringValue);case 6:return function(e,t){var n=zv(e),r=zv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Qp(n[i],r[i]);if(0!==a)return a}return Qp(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Qp(qv(e.latitude),qv(t.latitude));return 0!==n?n:Qp(qv(e.longitude),qv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Jv(n[i],r[i]);if(a)return a}return Qp(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Hv.mapValue&&t===Hv.mapValue)return 0;if(e===Hv.mapValue)return 1;if(t===Hv.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Qp(r[o],a[o]);if(0!==u)return u;var s=Jv(n[r[o]],i[a[o]]);if(0!==s)return s}return Qp(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Op()}}function Zv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qp(e,t);var n=Bv(e),r=Bv(t),i=Qp(n.seconds,r.seconds);return 0!==i?i:Qp(n.nanos,r.nanos)}function ey(e){return ty(e)}function ty(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Bv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?zv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,rv.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Be(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ty(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Be(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ty(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Op();var t,n}function ny(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ry(e){return!!e&&"integerValue"in e}function iy(e){return!!e&&"arrayValue"in e}function ay(e){return!!e&&"nullValue"in e}function oy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function uy(e){return!!e&&"mapValue"in e}function sy(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Rv(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=sy(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=sy(e.arrayValue.values[r]);return n}return Object.assign({},e)}function cy(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ly(e){return"nullValue"in e?Qv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ny(Dv.empty(),rv.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Op()}function fy(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ny(Dv.empty(),rv.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Hv:Op()}function hy(e,t){var n=Jv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function dy(e,t){var n=Jv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var py=Ve((function e(t,n){Ue(this,e),this.position=t,this.inclusive=n}));function vy(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?rv.comparator(rv.fromName(o.referenceValue),n.key):Jv(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function yy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Yv(e.position[n],t.position[n]))return!1;return!0}var my=Ve((function e(){Ue(this,e)})),gy=function(e){ze(n,e);var t=We(n);function n(e,r,i){var a;return Ue(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ve(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Jv(t,this.value)):null!==t&&$v(this.value)===$v(t)&&this.matchesComparison(Jv(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Op()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Cy(e,t,r):"array-contains"===t?new Oy(e,r):"in"===t?new Ry(e,r):"not-in"===t?new Py(e,r):"array-contains-any"===t?new Ly(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Ay(e,n):new Ny(e,n)}}]),n}(my),ky=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this)).filters=e,i.op=r,i.ft=null,i}return Ve(n,[{key:"matches",value:function(e){return by(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ft||(this.ft=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ft}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.dt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"dt",value:function(e){var t,n=Be(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(my);function by(e){return"and"===e.op}function wy(e){return"or"===e.op}function xy(e){return _y(e)&&by(e)}function _y(e){var t,n=Be(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof ky)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Iy(e){if(e instanceof gy)return e.field.canonicalString()+e.op.toString()+ey(e.value);if(xy(e))return e.filters.map((function(e){return Iy(e)})).join(",");var t=e.filters.map((function(e){return Iy(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Ey(e,t){return e instanceof gy?function(e,t){return t instanceof gy&&e.op===t.op&&e.field.isEqual(t.field)&&Yv(e.value,t.value)}(e,t):e instanceof ky?function(e,t){return t instanceof ky&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Ey(n,t.filters[r])}),!0)}(e,t):void Op()}function Sy(e,t){var n=e.filters.concat(t);return ky.create(n,e.op)}function Ty(e){return e instanceof gy?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ey(e.value))}(e):e instanceof ky?function(e){return e.op.toString()+" {"+e.getFilters().map(Ty).join(" ,")+"}"}(e):"Filter"}var Cy=function(e){ze(n,e);var t=We(n);function n(e,r,i){var a;return Ue(this,n),(a=t.call(this,e,r,i)).key=rv.fromName(i.referenceValue),a}return Ve(n,[{key:"matches",value:function(e){var t=rv.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(gy),Ay=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this,e,"in",r)).keys=Dy("in",r),i}return Ve(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(gy),Ny=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this,e,"not-in",r)).keys=Dy("not-in",r),i}return Ve(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(gy);function Dy(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return rv.fromName(e.referenceValue)}))}var Oy=function(e){ze(n,e);var t=We(n);function n(e,r){return Ue(this,n),t.call(this,e,"array-contains",r)}return Ve(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return iy(t)&&Xv(t.arrayValue,this.value)}}]),n}(gy),Ry=function(e){ze(n,e);var t=We(n);function n(e,r){return Ue(this,n),t.call(this,e,"in",r)}return Ve(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Xv(this.value.arrayValue,t)}}]),n}(gy),Py=function(e){ze(n,e);var t=We(n);function n(e,r){return Ue(this,n),t.call(this,e,"not-in",r)}return Ve(n,[{key:"matches",value:function(e){if(Xv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Xv(this.value.arrayValue,t)}}]),n}(gy),Ly=function(e){ze(n,e);var t=We(n);function n(e,r){return Ue(this,n),t.call(this,e,"array-contains-any",r)}return Ve(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!iy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Xv(t.value.arrayValue,e)}))}}]),n}(gy),My=Ve((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Ue(this,e),this.field=t,this.dir=n}));function Fy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Uy=function(){function e(t,n){Ue(this,e),this.comparator=t,this.root=n||Vy.EMPTY}return Ve(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Vy.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Vy.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new jy(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new jy(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new jy(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new jy(this.root,e,this.comparator,!0)}}]),e}(),jy=function(){function e(t,n,r,i){Ue(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ve(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Vy=function(){function e(t,n,r,i,a){Ue(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ve(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Op();if(this.right.isRed())throw Op();var e=this.left.check();if(e!==this.right.check())throw Op();return e+(this.isRed()?0:1)}}]),e}();Vy.EMPTY=null,Vy.RED=!0,Vy.BLACK=!1,Vy.EMPTY=new(function(){function e(){Ue(this,e),this.size=0}return Ve(e,[{key:"key",get:function(){throw Op()}},{key:"value",get:function(){throw Op()}},{key:"color",get:function(){throw Op()}},{key:"left",get:function(){throw Op()}},{key:"right",get:function(){throw Op()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Vy(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var By=function(){function e(t){Ue(this,e),this.comparator=t,this.data=new Uy(this.comparator)}return Ve(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new qy(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new qy(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),qy=function(){function e(t){Ue(this,e),this.iter=t}return Ve(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function zy(e){return e.hasNext()?e.getNext():void 0}var Ky=function(){function e(t){Ue(this,e),this.fields=t,t.sort(nv.comparator)}return Ve(e,[{key:"unionWith",value:function(t){var n,r=new By(nv.comparator),i=Be(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Be(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Be(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return $p(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Gy=function(){function e(t){Ue(this,e),this.value=t}return Ve(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!uy(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sy(t)}},{key:"setAll",value:function(e){var t=this,n=nv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=sy(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());uy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Yv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];uy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Rv(t,(function(t,n){return e[t]=n}));var r,i=Be(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(sy(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Wy(e){var t=[];return Rv(e.fields,(function(e,n){var r=new nv([e]);if(uy(n)){var i=Wy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Be(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Ky(t)}var Hy=function(){function e(t,n,r,i,a,o,u){Ue(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return Ve(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Jp.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Gy.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Gy.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Jp.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Jp.min(),Jp.min(),Jp.min(),Gy.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Jp.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Jp.min(),Jp.min(),Gy.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Jp.min(),Jp.min(),Gy.empty(),2)}}]),e}(),Qy=Ve((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Ue(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this._t=null}));function $y(e){return new Qy(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Yy(e){var t=Pp(e);if(null===t._t){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Iy(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Lv(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ey(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ey(e)})).join(",")),t._t=n}return t._t}function Xy(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Fy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Ey(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!yy(e.startAt,t.startAt)&&yy(e.endAt,t.endAt)}function Jy(e){return rv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Zy(e,t){return e.filters.filter((function(e){return e instanceof gy&&e.field.isEqual(t)}))}function em(e,t,n){var r,i=Qv,a=!0,o=Be(Zy(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Qv,c=!0;switch(u.op){case"<":case"<=":s=ly(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Qv}hy({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];hy({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function tm(e,t,n){var r,i=Hv,a=!0,o=Be(Zy(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Hv,c=!0;switch(u.op){case">=":case">":s=fy(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Hv}dy({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];dy({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var nm=Ve((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ue(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this.gt=null,this.startAt,this.endAt}));function rm(e,t,n,r,i,a,o,u){return new nm(e,t,n,r,i,a,o,u)}function im(e){return new nm(e)}function am(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function om(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function um(e){var t,n=Be(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function sm(e){return null!==e.collectionGroup}function cm(e){var t=Pp(e);if(null===t.wt){t.wt=[];var n=um(t),r=om(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new My(n)),t.wt.push(new My(nv.keyField(),"asc"));else{var i,a=!1,o=Be(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new My(nv.keyField(),s))}}}return t.wt}function lm(e){var t=Pp(e);if(!t.gt)if("F"===t.limitType)t.gt=$y(t.path,t.collectionGroup,cm(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Be(cm(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new My(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new py(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new py(t.startAt.position,t.startAt.inclusive):null;t.gt=$y(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.gt}function fm(e,t){t.getFirstInequalityField(),um(e);var n=e.filters.concat([t]);return new nm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function hm(e,t,n){return new nm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function dm(e,t){return Xy(lm(e),lm(t))&&e.limitType===t.limitType}function pm(e){return"".concat(Yy(lm(e)),"|lt:").concat(e.limitType)}function vm(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Ty(e)})).join(", "),"]")),Lv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ey(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ey(e)})).join(",")),"Target(".concat(t,")")}(lm(e)),"; limitType=").concat(e.limitType,")")}function ym(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):rv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Be(cm(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Be(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=vy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,cm(e),t))&&!(e.endAt&&!function(e,t,n){var r=vy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,cm(e),t))}(e,t)}function mm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function gm(e){return function(t,n){var r,i=!1,a=Be(cm(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=km(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function km(e,t,n){var r=e.field.isKeyField()?rv.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Jv(r,i):Op()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Op()}}function bm(e,t){if(e.yt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mv(t)?"-0":t}}function wm(e){return{integerValue:""+e}}function xm(e,t){return Fv(t)?wm(t):bm(e,t)}var _m=Ve((function e(){Ue(this,e),this._=void 0}));function Im(e,t,n){return e instanceof Tm?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Cm?Am(e,t):e instanceof Nm?Dm(e,t):function(e,t){var n=Sm(e,t),r=Rm(n)+Rm(e.It);return ry(n)&&ry(e.It)?wm(r):bm(e.Tt,r)}(e,t)}function Em(e,t,n){return e instanceof Cm?Am(e,t):e instanceof Nm?Dm(e,t):n}function Sm(e,t){return e instanceof Om?ry(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Tm=function(e){ze(n,e);var t=We(n);function n(){return Ue(this,n),t.apply(this,arguments)}return Ve(n)}(_m),Cm=function(e){ze(n,e);var t=We(n);function n(e){var r;return Ue(this,n),(r=t.call(this)).elements=e,r}return Ve(n)}(_m);function Am(e,t){var n,r=Pm(t),i=Be(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Yv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Nm=function(e){ze(n,e);var t=We(n);function n(e){var r;return Ue(this,n),(r=t.call(this)).elements=e,r}return Ve(n)}(_m);function Dm(e,t){var n,r=Pm(t),i=Be(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Yv(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Om=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this)).Tt=e,i.It=r,i}return Ve(n)}(_m);function Rm(e){return qv(e.integerValue||e.doubleValue)}function Pm(e){return iy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Lm=Ve((function e(t,n){Ue(this,e),this.field=t,this.transform=n}));var Mm=Ve((function e(t,n){Ue(this,e),this.version=t,this.transformResults=n})),Fm=function(){function e(t,n){Ue(this,e),this.updateTime=t,this.exists=n}return Ve(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Um(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var jm=Ve((function e(){Ue(this,e)}));function Vm(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Jm(e.key,Fm.none()):new Gm(e.key,e.data,Fm.none());var n,r=e.data,i=Gy.empty(),a=new By(nv.comparator),o=Be(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Wm(e.key,i,new Ky(a.toArray()),Fm.none())}function Bm(e,t,n){e instanceof Gm?function(e,t,n){var r=e.value.clone(),i=Qm(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Wm?function(e,t,n){if(Um(e.precondition,t)){var r=Qm(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Hm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function qm(e,t,n,r){return e instanceof Gm?function(e,t,n,r){if(!Um(e.precondition,t))return n;var i=e.value.clone(),a=$m(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Wm?function(e,t,n,r){if(!Um(e.precondition,t))return n;var i=$m(e.fieldTransforms,r,t),a=t.data;return a.setAll(Hm(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Um(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function zm(e,t){var n,r=null,i=Be(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Sm(a.transform,o||null);null!=u&&(null===r&&(r=Gy.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Km(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&$p(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Cm&&t instanceof Cm||e instanceof Nm&&t instanceof Nm?$p(e.elements,t.elements,Yv):e instanceof Om&&t instanceof Om?Yv(e.It,t.It):e instanceof Tm&&t instanceof Tm}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Gm=function(e){ze(n,e);var t=We(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Ue(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ve(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jm),Wm=function(e){ze(n,e);var t=We(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Ue(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ve(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(jm);function Hm(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Qm(e,t,n){var r=new Map;Rp(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Em(o,u,n[i]))}return r}function $m(e,t,n){var r,i=new Map,a=Be(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Im(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Ym,Xm,Jm=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ve(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jm),Zm=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ve(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jm),eg=Ve((function e(t){Ue(this,e),this.count=t}));function tg(e){switch(e){default:return Op();case Lp.CANCELLED:case Lp.UNKNOWN:case Lp.DEADLINE_EXCEEDED:case Lp.RESOURCE_EXHAUSTED:case Lp.INTERNAL:case Lp.UNAVAILABLE:case Lp.UNAUTHENTICATED:return!1;case Lp.INVALID_ARGUMENT:case Lp.NOT_FOUND:case Lp.ALREADY_EXISTS:case Lp.PERMISSION_DENIED:case Lp.FAILED_PRECONDITION:case Lp.ABORTED:case Lp.OUT_OF_RANGE:case Lp.UNIMPLEMENTED:case Lp.DATA_LOSS:return!0}}function ng(e){if(void 0===e)return Ap("GRPC error has no .code"),Lp.UNKNOWN;switch(e){case Ym.OK:return Lp.OK;case Ym.CANCELLED:return Lp.CANCELLED;case Ym.UNKNOWN:return Lp.UNKNOWN;case Ym.DEADLINE_EXCEEDED:return Lp.DEADLINE_EXCEEDED;case Ym.RESOURCE_EXHAUSTED:return Lp.RESOURCE_EXHAUSTED;case Ym.INTERNAL:return Lp.INTERNAL;case Ym.UNAVAILABLE:return Lp.UNAVAILABLE;case Ym.UNAUTHENTICATED:return Lp.UNAUTHENTICATED;case Ym.INVALID_ARGUMENT:return Lp.INVALID_ARGUMENT;case Ym.NOT_FOUND:return Lp.NOT_FOUND;case Ym.ALREADY_EXISTS:return Lp.ALREADY_EXISTS;case Ym.PERMISSION_DENIED:return Lp.PERMISSION_DENIED;case Ym.FAILED_PRECONDITION:return Lp.FAILED_PRECONDITION;case Ym.ABORTED:return Lp.ABORTED;case Ym.OUT_OF_RANGE:return Lp.OUT_OF_RANGE;case Ym.UNIMPLEMENTED:return Lp.UNIMPLEMENTED;case Ym.DATA_LOSS:return Lp.DATA_LOSS;default:return Op()}}(Xm=Ym||(Ym={}))[Xm.OK=0]="OK",Xm[Xm.CANCELLED=1]="CANCELLED",Xm[Xm.UNKNOWN=2]="UNKNOWN",Xm[Xm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xm[Xm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xm[Xm.NOT_FOUND=5]="NOT_FOUND",Xm[Xm.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xm[Xm.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xm[Xm.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xm[Xm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xm[Xm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xm[Xm.ABORTED=10]="ABORTED",Xm[Xm.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xm[Xm.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xm[Xm.INTERNAL=13]="INTERNAL",Xm[Xm.UNAVAILABLE=14]="UNAVAILABLE",Xm[Xm.DATA_LOSS=15]="DATA_LOSS";var rg=function(){function e(t,n){Ue(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Ve(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Be(n);try{for(i.s();!(r=i.n()).done;){var a=_e(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Rv(this.inner,(function(t,n){var r,i=Be(n);try{for(i.s();!(r=i.n()).done;){var a=_e(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Pv(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),ig=new Uy(rv.comparator);function ag(){return ig}var og=new Uy(rv.comparator);function ug(){for(var e=og,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function sg(e){var t=og;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function cg(){return fg()}function lg(){return fg()}function fg(){return new rg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var hg=new Uy(rv.comparator),dg=new By(rv.comparator);function pg(){for(var e=dg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var vg=new By(Qp);function yg(){return vg}var mg=function(){function e(t,n,r,i,a){Ue(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ve(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,gg.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Jp.min(),i,yg(),ag(),pg())}}]),e}(),gg=function(){function e(t,n,r,i,a){Ue(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ve(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,pg(),pg(),pg())}}]),e}(),kg=Ve((function e(t,n,r,i){Ue(this,e),this.Et=t,this.removedTargetIds=n,this.key=r,this.At=i})),bg=Ve((function e(t,n){Ue(this,e),this.targetId=t,this.Rt=n})),wg=Ve((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jv.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Ue(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),xg=function(){function e(){Ue(this,e),this.Pt=0,this.vt=Eg(),this.bt=jv.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}return Ve(e,[{key:"current",get:function(){return this.Vt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Dt",get:function(){return 0!==this.Pt}},{key:"Ct",get:function(){return this.St}},{key:"xt",value:function(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}},{key:"Nt",value:function(){var e=pg(),t=pg(),n=pg();return this.vt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Op()}})),new gg(this.bt,this.Vt,e,t,n)}},{key:"kt",value:function(){this.St=!1,this.vt=Eg()}},{key:"$t",value:function(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}},{key:"Mt",value:function(e){this.St=!0,this.vt=this.vt.remove(e)}},{key:"Ot",value:function(){this.Pt+=1}},{key:"Ft",value:function(){this.Pt-=1}},{key:"Bt",value:function(){this.St=!0,this.Vt=!0}}]),e}(),_g=function(){function e(t){Ue(this,e),this.Lt=t,this.qt=new Map,this.Ut=ag(),this.Kt=Ig(),this.Gt=new By(Qp)}return Ve(e,[{key:"Qt",value:function(e){var t,n=Be(e.Et);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.At&&e.At.isFoundDocument()?this.jt(r,e.At):this.zt(r,e.key,e.At)}}catch(u){n.e(u)}finally{n.f()}var i,a=Be(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.zt(o,e.key,e.At)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Ht(n);switch(e.state){case 0:t.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||t.removeTarget(n);break;case 3:t.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:t.Jt(n)&&(t.Yt(n),r.xt(e.resumeToken));break;default:Op()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((function(e,r){n.Jt(r)&&t(r)}))}},{key:"Zt",value:function(e){var t=e.targetId,n=e.Rt.count,r=this.Xt(t);if(r){var i=r.target;if(Jy(i))if(0===n){var a=new rv(i.path);this.zt(t,a,Hy.newNoDocument(a,Jp.min()))}else Rp(1===n);else this.te(t)!==n&&(this.Yt(t),this.Gt=this.Gt.add(t))}}},{key:"ee",value:function(e){var t=this,n=new Map;this.qt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&Jy(a.target)){var o=new rv(a.target.path);null!==t.Ut.get(o)||t.ne(i,o)||t.zt(i,o,Hy.newNoDocument(o,e))}r.Ct&&(n.set(i,r.Nt()),r.kt())}}));var r=pg();this.Kt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new mg(e,n,this.Gt,this.Ut,r);return this.Ut=ag(),this.Kt=Ig(),this.Gt=new By(Qp),i}},{key:"jt",value:function(e,t){if(this.Jt(e)){var n=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}}},{key:"zt",value:function(e,t,n){if(this.Jt(e)){var r=this.Ht(e);this.ne(e,t)?r.$t(t,1):r.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.qt.delete(e)}},{key:"te",value:function(e){var t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Ht(e).Ot()}},{key:"Ht",value:function(e){var t=this.qt.get(e);return t||(t=new xg,this.qt.set(e,t)),t}},{key:"se",value:function(e){var t=this.Kt.get(e);return t||(t=new By(Qp),this.Kt=this.Kt.insert(e,t)),t}},{key:"Jt",value:function(e){var t=null!==this.Xt(e);return t||Cp("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}},{key:"Yt",value:function(e){var t=this;this.qt.set(e,new xg),this.Lt.getRemoteKeysForTarget(e).forEach((function(n){t.zt(e,n,null)}))}},{key:"ne",value:function(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Ig(){return new Uy(rv.comparator)}function Eg(){return new Uy(rv.comparator)}var Sg={asc:"ASCENDING",desc:"DESCENDING"},Tg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cg={and:"AND",or:"OR"},Ag=Ve((function e(t,n){Ue(this,e),this.databaseId=t,this.yt=n}));function Ng(e,t){return e.yt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Dg(e,t){return e.yt?t.toBase64():t.toUint8Array()}function Og(e,t){return Ng(e,t.toTimestamp())}function Rg(e){return Rp(!!e),Jp.fromTimestamp(function(e){var t=Bv(e);return new Xp(t.seconds,t.nanos)}(e))}function Pg(e,t){return function(e){return new ev(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Lg(e){var t=ev.fromString(e);return Rp(ik(t)),t}function Mg(e,t){return Pg(e.databaseId,t.path)}function Fg(e,t){var n=Lg(t);if(n.get(1)!==e.databaseId.projectId)throw new Mp(Lp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Mp(Lp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new rv(Bg(n))}function Ug(e,t){return Pg(e.databaseId,t)}function jg(e){var t=Lg(e);return 4===t.length?ev.emptyPath():Bg(t)}function Vg(e){return new ev(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Bg(e){return Rp(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function qg(e,t,n){return{name:Mg(e,t),fields:n.value.mapValue.fields}}function zg(e,t,n){var r=Fg(e,t.name),i=Rg(t.updateTime),a=t.createTime?Rg(t.createTime):Jp.min(),o=new Gy({mapValue:{fields:t.fields}}),u=Hy.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Kg(e,t){return"found"in t?function(e,t){Rp(!!t.found),t.found.name,t.found.updateTime;var n=Fg(e,t.found.name),r=Rg(t.found.updateTime),i=t.found.createTime?Rg(t.found.createTime):Jp.min(),a=new Gy({mapValue:{fields:t.found.fields}});return Hy.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Rp(!!t.missing),Rp(!!t.readTime);var n=Fg(e,t.missing),r=Rg(t.readTime);return Hy.newNoDocument(n,r)}(e,t):Op()}function Gg(e,t){var n;if(t instanceof Gm)n={update:qg(e,t.key,t.value)};else if(t instanceof Jm)n={delete:Mg(e,t.key)};else if(t instanceof Wm)n={update:qg(e,t.key,t.data),updateMask:rk(t.fieldMask)};else{if(!(t instanceof Zm))return Op();n={verify:Mg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Tm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Cm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Nm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Om)return{fieldPath:t.field.canonicalString(),increment:n.It};throw Op()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Og(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Op()}(e,t.precondition)),n}function Wg(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Fm.updateTime(Rg(e.updateTime)):void 0!==e.exists?Fm.exists(e.exists):Fm.none()}(t.currentDocument):Fm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Rp("REQUEST_TIME"===t.setToServerValue),n=new Tm;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Cm(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Nm(i)}else"increment"in t?n=new Om(e,t.increment):Op();var a=nv.fromServerFormat(t.fieldPath);return new Lm(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Fg(e,t.update.name),a=new Gy({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Ky(t.map((function(e){return nv.fromServerFormat(e)})))}(t.updateMask);return new Wm(i,a,o,n,r)}return new Gm(i,a,n,r)}if(t.delete){var u=Fg(e,t.delete);return new Jm(u,n)}if(t.verify){var s=Fg(e,t.verify);return new Zm(s,n)}return Op()}function Hg(e,t){return{documents:[Ug(e,t.path)]}}function Qg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ug(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ug(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return nk(ky.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:ek(e.field),direction:Xg(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.yt||Lv(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function $g(e){var t=jg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Rp(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Yg(e);return t instanceof ky&&xy(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new My(tk(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Lv(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new py(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new py(n,t)}(n.endAt)),rm(t,i,u,o,s,"F",c,l)}function Yg(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=tk(e.unaryFilter.field);return gy.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=tk(e.unaryFilter.field);return gy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=tk(e.unaryFilter.field);return gy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=tk(e.unaryFilter.field);return gy.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Op()}}(e):void 0!==e.fieldFilter?function(e){return gy.create(tk(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Op()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ky.create(e.compositeFilter.filters.map((function(e){return Yg(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Op()}}(e.compositeFilter.op))}(e):Op()}function Xg(e){return Sg[e]}function Jg(e){return Tg[e]}function Zg(e){return Cg[e]}function ek(e){return{fieldPath:e.canonicalString()}}function tk(e){return nv.fromServerFormat(e.fieldPath)}function nk(e){return e instanceof gy?function(e){if("=="===e.op){if(oy(e.value))return{unaryFilter:{field:ek(e.field),op:"IS_NAN"}};if(ay(e.value))return{unaryFilter:{field:ek(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(oy(e.value))return{unaryFilter:{field:ek(e.field),op:"IS_NOT_NAN"}};if(ay(e.value))return{unaryFilter:{field:ek(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ek(e.field),op:Jg(e.op),value:e.value}}}(e):e instanceof ky?function(e){var t=e.getFilters().map((function(e){return nk(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Zg(e.op),filters:t}}}(e):Op()}function rk(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function ik(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function ak(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=uk(t)),t=ok(e.get(n),t);return uk(t)}function ok(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function uk(e){return e+"\x01\x01"}function sk(e){var t=e.length;if(Rp(t>=2),2===t)return Rp("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ev.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Op(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Op()}a=o+2}return new ev(r)}var ck=["userId","batchId"];function lk(e,t){return[e,ak(t)]}function fk(e,t,n){return[e,ak(t),n]}var hk={},dk=["prefixPath","collectionGroup","readTime","documentId"],pk=["prefixPath","collectionGroup","documentId"],vk=["collectionGroup","readTime","prefixPath","documentId"],yk=["canonicalId","targetId"],mk=["targetId","path"],gk=["path","targetId"],kk=["collectionId","parent"],bk=["indexId","uid"],wk=["uid","sequenceNumber"],xk=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_k=["indexId","uid","orderedDocumentKey"],Ik=["userId","collectionPath","documentId"],Ek=["userId","collectionPath","largestBatchId"],Sk=["userId","collectionGroup","largestBatchId"],Tk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Ck=[].concat(Tt(Tk),["documentOverlays"]),Ak=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nk=Ak,Dk=[].concat(Nk,["indexConfiguration","indexState","indexEntries"]),Ok=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this)).re=e,i.currentSequenceNumber=r,i}return Ve(n)}(pv);function Rk(e,t){var n=Pp(e);return kv.M(n.re,t)}var Pk=function(){function e(t,n,r,i){Ue(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ve(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Bm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Be(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=qm(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Be(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=qm(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=lg();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Vm(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Jp.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),pg())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&$p(this.mutations,e.mutations,(function(e,t){return Km(e,t)}))&&$p(this.baseMutations,e.baseMutations,(function(e,t){return Km(e,t)}))}}]),e}(),Lk=function(){function e(t,n,r,i){Ue(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ve(e,null,[{key:"from",value:function(t,n,r){Rp(t.mutations.length===r.length);for(var i=hg,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Mk=function(){function e(t,n){Ue(this,e),this.largestBatchId=t,this.mutation=n}return Ve(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Fk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Jp.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:jv.EMPTY_BYTE_STRING;Ue(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Ve(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Uk=Ve((function e(t){Ue(this,e),this.oe=t}));function jk(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Vk(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Mg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ng(e,t.version.toTimestamp()),createTime:Ng(e,t.createTime.toTimestamp())}}(e.oe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Bk(t.version)};else{if(!t.isUnknownDocument())return Op();r.unknownDocument={path:n.path.toArray(),version:Bk(t.version)}}return r}function Vk(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Bk(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function qk(e){var t=new Xp(e.seconds,e.nanoseconds);return Jp.fromTimestamp(t)}function zk(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Wg(e.oe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Wg(e.oe,t)})),u=Xp.fromMillis(t.localWriteTimeMs);return new Pk(t.batchId,u,n,o)}function Kk(e){var t,n,r=qk(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?qk(e.lastLimboFreeSnapshotVersion):Jp.min();return void 0!==e.query.documents?(Rp(1===(n=e.query).documents.length),t=lm(im(jg(n.documents[0])))):t=function(e){return lm($g(e))}(e.query),new Fk(t,e.targetId,0,e.lastListenSequenceNumber,r,i,jv.fromBase64String(e.resumeToken))}function Gk(e,t){var n,r=Bk(t.snapshotVersion),i=Bk(t.lastLimboFreeSnapshotVersion);n=Jy(t.target)?Hg(e.oe,t.target):Qg(e.oe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Yy(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Wk(e){var t=$g({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?hm(t,t.limit,"L"):t}function Hk(e,t){return new Mk(t.largestBatchId,Wg(e.oe,t.overlayMutation))}function Qk(e,t){var n=t.path.lastSegment();return[e,ak(t.path.popLast()),n]}function $k(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Bk(r.readTime),documentKey:ak(r.documentKey.path),largestBatchId:r.largestBatchId}}var Yk=function(){function e(){Ue(this,e)}return Ve(e,[{key:"getBundleMetadata",value:function(e,t){return Xk(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:qk(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Xk(e).put({bundleId:(n=t).id,createTime:Bk(Rg(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Jk(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Wk(t.bundledQuery),readTime:qk(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Jk(e).put(function(e){return{name:e.name,readTime:Bk(Rg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Xk(e){return Rk(e,"bundles")}function Jk(e){return Rk(e,"namedQueries")}var Zk=function(){function e(t,n){Ue(this,e),this.Tt=t,this.userId=n}return Ve(e,[{key:"getOverlay",value:function(e,t){var n=this;return eb(e).get(Qk(this.userId,t)).next((function(e){return e?Hk(n.Tt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=cg();return mv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Mk(t,a);i.push(r.ce(e,o))})),mv.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(ak(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(eb(e).Y("collectionPathOverlayIndex",i))})),mv.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=cg(),a=ak(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return eb(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=Be(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Hk(r.Tt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=cg(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return eb(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Hk(a.Tt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ce",value:function(e,t){return eb(e).put(function(e,t,n){var r=_e(Qk(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Gg(e.oe,n.mutation)}}(this.Tt,this.userId,t))}}],[{key:"ue",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function eb(e){return Rk(e,"documentOverlays")}var tb=function(){function e(){Ue(this,e)}return Ve(e,[{key:"ae",value:function(e,t){this.he(e,t),t.le()}},{key:"he",value:function(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(qv(e.integerValue));else if("doubleValue"in e){var n=qv(e.doubleValue);isNaN(n)?this.fe(t,13):(this.fe(t,15),Mv(n)?t.de(0):t.de(n))}else if("timestampValue"in e){var r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e("".concat(r.seconds||"")),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(zv(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.fe(t,45),t.de(i.latitude||0),t.de(i.longitude||0)}else"mapValue"in e?cy(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):Op()}},{key:"we",value:function(e,t){this.fe(t,25),this.Te(e,t)}},{key:"Te",value:function(e,t){t._e(e)}},{key:"pe",value:function(e,t){var n=e.fields||{};this.fe(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.we(a,t),this.he(n[a],t)}}},{key:"Ie",value:function(e,t){var n=e.values||[];this.fe(t,50);var r,i=Be(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.he(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ye",value:function(e,t){var n=this;this.fe(t,37),rv.fromName(e).path.forEach((function(e){n.fe(t,60),n.Te(e,t)}))}},{key:"fe",value:function(e,t){e.de(t)}},{key:"me",value:function(e){e.de(2)}}]),e}();function nb(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function rb(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=nb(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}tb.Ee=new tb;var ib=function(){function e(){Ue(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Ve(e,[{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Ve()}},{key:"Se",value:function(e){var t,n=Be(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{var a=r.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Pe()}},{key:"De",value:function(e){var t,n=Be(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{var a=r.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ve()}},{key:"Ce",value:function(e){var t=this.xe(e),n=rb(t);this.Ne(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"ke",value:function(e){var t=this.xe(e),n=rb(t);this.Ne(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"$e",value:function(){this.Me(255),this.Me(255)}},{key:"Oe",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Be",value:function(){return this.buffer.slice(0,this.position)}},{key:"xe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"Ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Me",value:function(e){this.Ne(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.Ne(1),this.buffer[this.position++]=~e}},{key:"Ne",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),ab=function(){function e(t){Ue(this,e),this.Le=t}return Ve(e,[{key:"ge",value:function(e){this.Le.Ae(e)}},{key:"_e",value:function(e){this.Le.Se(e)}},{key:"de",value:function(e){this.Le.Ce(e)}},{key:"le",value:function(){this.Le.$e()}}]),e}(),ob=function(){function e(t){Ue(this,e),this.Le=t}return Ve(e,[{key:"ge",value:function(e){this.Le.ve(e)}},{key:"_e",value:function(e){this.Le.De(e)}},{key:"de",value:function(e){this.Le.ke(e)}},{key:"le",value:function(){this.Le.Oe()}}]),e}(),ub=function(){function e(){Ue(this,e),this.Le=new ib,this.qe=new ab(this.Le),this.Ue=new ob(this.Le)}return Ve(e,[{key:"seed",value:function(e){this.Le.seed(e)}},{key:"Ke",value:function(e){return 0===e?this.qe:this.Ue}},{key:"Be",value:function(){return this.Le.Be()}},{key:"reset",value:function(){this.Le.reset()}}]),e}(),sb=function(){function e(t,n,r,i){Ue(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Ve(e,[{key:"Ge",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function cb(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=lb(e.arrayValue,t.arrayValue))?n:0!==(n=lb(e.directionalValue,t.directionalValue))?n:rv.comparator(e.documentKey,t.documentKey)}function lb(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var fb=function(){function e(t){Ue(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Qe=t.orderBy,this.je=[];var n,r=Be(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.ze=i:this.je.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Ve(e,[{key:"We",value:function(e){Rp(e.collectionGroup===this.collectionId);var t=av(e);if(void 0!==t&&!this.He(t))return!1;for(var n=ov(e),r=0,i=0;r<n.length&&this.He(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.ze){var a=n[r];if(!this.Je(this.ze,a)||!this.Ye(this.Qe[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Qe.length||!this.Ye(this.Qe[i++],o))return!1}return!0}},{key:"He",value:function(e){var t,n=Be(this.je);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ye",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function hb(e){var t,n;if(Rp(e instanceof gy||e instanceof ky),e instanceof gy){if(e instanceof Ry){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return gy.create(e.field,"==",t)})))||[];return ky.create(r,"or")}return e}var i=e.filters.map((function(e){return hb(e)}));return ky.create(i,e.op)}function db(e){if(0===e.getFilters().length)return[];var t=mb(hb(e));return Rp(yb(t)),pb(t)||vb(t)?[t]:t.getFilters()}function pb(e){return e instanceof gy}function vb(e){return e instanceof ky&&xy(e)}function yb(e){return pb(e)||vb(e)||function(e){if(e instanceof ky&&wy(e)){var t,n=Be(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!pb(r)&&!vb(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function mb(e){if(Rp(e instanceof gy||e instanceof ky),e instanceof gy)return e;if(1===e.filters.length)return mb(e.filters[0]);var t=e.filters.map((function(e){return mb(e)})),n=ky.create(t,e.op);return yb(n=bb(n))?n:(Rp(n instanceof ky),Rp(by(n)),Rp(n.filters.length>1),n.filters.reduce((function(e,t){return gb(e,t)})))}function gb(e,t){var n;return Rp(e instanceof gy||e instanceof ky),Rp(t instanceof gy||t instanceof ky),n=e instanceof gy?t instanceof gy?function(e,t){return ky.create([e,t],"and")}(e,t):kb(e,t):t instanceof gy?kb(t,e):function(e,t){if(Rp(e.filters.length>0&&t.filters.length>0),by(e)&&by(t))return Sy(e,t.getFilters());var n=wy(e)?e:t,r=wy(e)?t:e,i=n.filters.map((function(e){return gb(e,r)}));return ky.create(i,"or")}(e,t),bb(n)}function kb(e,t){if(by(t))return Sy(t,e.getFilters());var n=t.filters.map((function(t){return gb(e,t)}));return ky.create(n,"or")}function bb(e){if(Rp(e instanceof gy||e instanceof ky),e instanceof gy)return e;var t=e.getFilters();if(1===t.length)return bb(t[0]);if(_y(e))return e;var n=t.map((function(e){return bb(e)})),r=[];return n.forEach((function(t){t instanceof gy?r.push(t):t instanceof ky&&(t.op===e.op?r.push.apply(r,Tt(t.filters)):r.push(t))})),1===r.length?r[0]:ky.create(r,e.op)}var wb=function(){function e(){Ue(this,e),this.Ze=new xb}return Ve(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ze.add(t),mv.resolve()}},{key:"getCollectionParents",value:function(e,t){return mv.resolve(this.Ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return mv.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return mv.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return mv.resolve(null)}},{key:"getIndexType",value:function(e,t){return mv.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return mv.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return mv.resolve(null)}},{key:"getMinOffset",value:function(e,t){return mv.resolve(fv.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return mv.resolve(fv.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return mv.resolve()}},{key:"updateIndexEntries",value:function(e,t){return mv.resolve()}}]),e}(),xb=function(){function e(){Ue(this,e),this.index={}}return Ve(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new By(ev.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new By(ev.comparator)).toArray()}}]),e}(),_b=new Uint8Array(0),Ib=function(){function e(t,n){Ue(this,e),this.user=t,this.databaseId=n,this.Xe=new xb,this.tn=new rg((function(e){return Yy(e)}),(function(e,t){return Xy(e,t)})),this.uid=t.uid||""}return Ve(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:ak(i)};return Eb(e).put(a)}return mv.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Yp(t),""],!1,!0);return Eb(e).W(r).next((function(e){var r,i=Be(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(sk(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Tb(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Cb(e);return a.next((function(e){o.put($k(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Tb(e),r=Cb(e),i=Sb(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Sb(e),i=!0,a=new Map;return mv.forEach(this.en(t),(function(t){return n.nn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=pg(),o=[];return mv.forEach(a,(function(i,a){var u;Cp("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Yy(t)));var s=function(e,t){var n=av(t);if(void 0===n)return null;var r,i=Be(Zy(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Be(ov(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Be(Zy(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Be(ov(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?em(e,o.fieldPath,e.startAt):tm(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new py(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Be(ov(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?tm(e,o.fieldPath,e.endAt):em(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new py(r,i)}(a,i),h=n.sn(i,a,l),d=n.sn(i,a,f),p=n.rn(i,a,c),v=n.on(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return mv.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=rv.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return mv.resolve(null)}))}},{key:"en",value:function(e){var t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:db(ky.create(e.filters,"and")).map((function(t){return $y(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.tn.set(e,t),t)}},{key:"on",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.un(t[h/c]):_b,f=u.cn(e,s,n[h%c],r),d=u.an(e,s,i[h%c],a),p=o.map((function(t){return u.cn(e,s,t,!0)}));l.push.apply(l,Tt(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"cn",value:function(e,t,n,r){var i=new sb(e,rv.empty(),t,n);return r?i:i.Ge()}},{key:"an",value:function(e,t,n,r){var i=new sb(e,rv.empty(),t,n);return r?i.Ge():i}},{key:"nn",value:function(e,t){var n=new fb(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Be(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.en(t);return mv.forEach(i,(function(t){return n.nn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new By(nv.comparator),r=!1,i=Be(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=Be(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=Be(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"hn",value:function(e,t){var n,r=new ub,i=Be(ov(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ke(a.kind);tb.Ee.ae(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Be()}},{key:"un",value:function(e){var t=new ub;return tb.Ee.ae(e,t.Ke(0)),t.Be()}},{key:"ln",value:function(e,t){var n=new ub;return tb.Ee.ae(ny(this.databaseId,t),n.Ke(function(e){var t=ov(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Be()}},{key:"rn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new ub);var i,a=0,o=Be(ov(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Be(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.fn(t,s.fieldPath)&&iy(c))r=this.dn(r,s,c);else{var h=f.Ke(s.kind);tb.Ee.ae(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this._n(r)}},{key:"sn",value:function(e,t,n){return this.rn(e,t,n.position)}},{key:"_n",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Be();return t}},{key:"dn",value:function(e,t,n){var r,i=Tt(e),a=[],o=Be(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Be(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new ub;f.seed(l.Be()),tb.Ee.ae(s,f.Ke(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"fn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof gy&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Tb(e),i=Cb(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return mv.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new sv(t.sequenceNumber,new fv(qk(t.readTime),new rv(sk(t.documentKey)),t.largestBatchId)):sv.empty(),r=e.fields.map((function(e){var t=_e(e,2),n=t[0],r=t[1];return new uv(nv.fromServerFormat(n),r)}));return new iv(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Qp(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Tb(e),a=Cb(e);return this.wn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return mv.forEach(t,(function(t){return a.put($k(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return mv.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?mv.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),mv.forEach(a,(function(r){return n.mn(e,t,r).next((function(t){var a=n.gn(i,r);return t.isEqual(a)?mv.resolve():n.yn(e,i,r,t,a)}))}))}))}))}},{key:"pn",value:function(e,t,n,r){return Sb(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.ln(n,t.key),documentKey:t.key.path.toArray()})}},{key:"In",value:function(e,t,n,r){return Sb(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.ln(n,t.key),t.key.path.toArray()])}},{key:"mn",value:function(e,t,n){var r=Sb(e),i=new By(cb);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.ln(n,t)])},(function(e,r){i=i.add(new sb(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"gn",value:function(e,t){var n=new By(cb),r=this.hn(t,e);if(null==r)return n;var i=av(t);if(null!=i){var a=e.data.field(i.fieldPath);if(iy(a)){var o,u=Be(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new sb(t.indexId,e.key,this.un(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new sb(t.indexId,e.key,_b,r));return n}},{key:"yn",value:function(e,t,n,r,i){var a=this;Cp("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=zy(a),s=zy(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=zy(o)):l?(i(u),u=zy(a)):(u=zy(a),s=zy(o))}}(r,i,cb,(function(r){o.push(a.pn(e,t,n,r))}),(function(r){o.push(a.In(e,t,n,r))})),mv.waitFor(o)}},{key:"wn",value:function(e){var t=1;return Cb(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return cb(e,t)})).filter((function(e,t,n){return!t||0!==cb(e,n[t-1])}));var r=[];r.push(e);var i,a=Be(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=cb(o,e),s=cb(o,t);if(0===u)r[0]=e.Ge();else if(u>0&&s<0)r.push(o),r.push(o.Ge());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Tn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,_b,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,_b,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Tn",value:function(e,t){return cb(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Ab)}},{key:"getMinOffset",value:function(e,t){var n=this;return mv.mapArray(this.en(t),(function(t){return n.nn(e,t).next((function(e){return e||Op()}))})).next(Ab)}}]),e}();function Eb(e){return Rk(e,"collectionParents")}function Sb(e){return Rk(e,"indexEntries")}function Tb(e){return Rk(e,"indexConfiguration")}function Cb(e){return Rk(e,"indexState")}function Ab(e){Rp(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;hv(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new fv(t.readTime,t.documentKey,n)}var Nb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Db=function(){function e(t,n,r){Ue(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ve(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ob(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Rp(1===u)})));var c,l=[],f=Be(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=fk(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return mv.waitFor(a).next((function(){return l}))}function Rb(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Op();t=e.noDocument}return JSON.stringify(t).length}Db.DEFAULT_COLLECTION_PERCENTILE=10,Db.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Db.DEFAULT=new Db(41943040,Db.DEFAULT_COLLECTION_PERCENTILE,Db.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Db.DISABLED=new Db(-1,0,0);var Pb=function(){function e(t,n,r,i){Ue(this,e),this.userId=t,this.Tt=n,this.indexManager=r,this.referenceDelegate=i,this.En={}}return Ve(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mb(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Fb(e),o=Mb(e);return o.add({}).next((function(u){Rp("number"==typeof u);var s,c=new Pk(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Gg(e.oe,t)})),i=n.mutations.map((function(t){return Gg(e.oe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.Tt,i.userId,c),f=[],h=new By((function(e,t){return Qp(e.canonicalString(),t.canonicalString())})),d=Be(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=fk(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,hk))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.En[u]=c.keys()})),mv.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Mb(e).get(t).next((function(e){return e?(Rp(e.userId===n.userId),zk(n.Tt,e)):null}))}},{key:"An",value:function(e,t){var n=this;return this.En[t]?mv.resolve(this.En[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.En[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Mb(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Rp(t.batchId>=r),a=zk(n.Tt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Mb(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mb(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return zk(t.Tt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=lk(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Fb(e).X({range:i},(function(r,i,o){var u=_e(r,3),s=u[0],c=u[1],l=u[2],f=sk(c);if(s===n.userId&&t.path.isEqual(f))return Mb(e).get(l).next((function(e){if(!e)throw Op();Rp(e.userId===n.userId),a.push(zk(n.Tt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new By(Qp),i=[];return t.forEach((function(t){var a=lk(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Fb(e).X({range:o},(function(e,i,a){var o=_e(e,3),u=o[0],s=o[1],c=o[2],l=sk(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),mv.waitFor(i).next((function(){return n.Rn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=lk(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new By(Qp);return Fb(e).X({range:o},(function(e,t,a){var o=_e(e,3),s=o[0],c=o[1],l=o[2],f=sk(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Rn(e,u)}))}},{key:"Rn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Mb(e).get(t).next((function(e){if(null===e)throw Op();Rp(e.userId===n.userId),r.push(zk(n.Tt,e))})))})),mv.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ob(e.re,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Pn(t.batchId)})),mv.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Pn",value:function(e){delete this.En[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return mv.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Fb(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=sk(e[1]);i.push(a)}else r.done()})).next((function(){Rp(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Lb(e,this.userId,t)}},{key:"vn",value:function(e){var t=this;return Ub(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ue",value:function(t,n,r,i){return Rp(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Lb(e,t,n){var r=lk(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Fb(e).X({range:a,Z:!0},(function(e,n,r){var a=_e(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Mb(e){return Rk(e,"mutations")}function Fb(e){return Rk(e,"documentMutations")}function Ub(e){return Rk(e,"mutationQueues")}var jb=function(){function e(t){Ue(this,e),this.bn=t}return Ve(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Vn",value:function(){return new e(0)}},{key:"Sn",value:function(){return new e(-1)}}]),e}(),Vb=function(){function e(t,n){Ue(this,e),this.referenceDelegate=t,this.Tt=n}return Ve(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Dn(e).next((function(n){var r=new jb(n.highestTargetId);return n.highestTargetId=r.next(),t.Cn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Dn(e).next((function(e){return Jp.fromTimestamp(new Xp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Dn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Dn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Cn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.xn(e,t).next((function(){return n.Dn(e).next((function(r){return r.targetCount+=1,n.Nn(t,r),n.Cn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.xn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Bb(e).delete(t.targetId)})).next((function(){return n.Dn(e)})).next((function(t){return Rp(t.targetCount>0),t.targetCount-=1,n.Cn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Bb(e).X((function(o,u){var s=Kk(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return mv.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Bb(e).X((function(e,n){var r=Kk(n);t(r)}))}},{key:"Dn",value:function(e){return qb(e).get("targetGlobalKey").next((function(e){return Rp(null!==e),e}))}},{key:"Cn",value:function(e,t){return qb(e).put("targetGlobalKey",t)}},{key:"xn",value:function(e,t){return Bb(e).put(Gk(this.Tt,t))}},{key:"Nn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Dn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Yy(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Bb(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Kk(n);Xy(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=zb(e);return t.forEach((function(t){var o=ak(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),mv.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=zb(e);return mv.forEach(t,(function(t){var a=ak(t.path);return mv.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=zb(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=zb(e),i=pg();return r.X({range:n,Z:!0},(function(e,t,n){var r=sk(e[1]),a=new rv(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=ak(t.path),r=IDBKeyRange.bound([n],[Yp(n)],!1,!0),i=0;return zb(e).X({index:"documentTargetsIndex",Z:!0,range:r},(function(e,t,n){var r=_e(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ie",value:function(e,t){return Bb(e).get(t).next((function(e){return e?Kk(e):null}))}}]),e}();function Bb(e){return Rk(e,"targets")}function qb(e){return Rk(e,"targetGlobal")}function zb(e){return Rk(e,"targetDocuments")}function Kb(e,t){var n=_e(e,2),r=n[0],i=n[1],a=_e(t,2),o=a[0],u=a[1],s=Qp(r,o);return 0===s?Qp(i,u):s}var Gb=function(){function e(t){Ue(this,e),this.kn=t,this.buffer=new By(Kb),this.$n=0}return Ve(e,[{key:"Mn",value:function(){return++this.$n}},{key:"On",value:function(e){var t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Kb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Wb=function(){function e(t,n,r){Ue(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Fn=null}return Ve(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}},{key:"stop",value:function(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}},{key:"started",get:function(){return null!==this.Fn}},{key:"Bn",value:function(e){var t=this;Cp("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Fn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!xv(e.t0)){e.next=12;break}Cp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,vv(e.t0);case 14:return e.next=16,t.Bn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Hb=function(){function e(t,n){Ue(this,e),this.Ln=t,this.params=n}return Ve(e,[{key:"calculateTargetCount",value:function(e,t){return this.Ln.qn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return mv.resolve(Av.at);var r=new Gb(t);return this.Ln.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.Ln.Un(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Ln.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Ln.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Cp("LruGarbageCollector","Garbage collection skipped; disabled"),mv.resolve(Nb)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Cp("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Nb):n.Kn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Ln.getCacheSize(e)}},{key:"Kn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Cp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Tp()<=Ot.DEBUG&&Cp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),mv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Qb=function(){function e(t,n){Ue(this,e),this.db=t,this.garbageCollector=function(e,t){return new Hb(e,t)}(this,n)}return Ve(e,[{key:"qn",value:function(e){var t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Gn",value:function(e){var t=0;return this.Un(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Un",value:function(e,t){return this.Qn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return $b(e,n)}},{key:"removeReference",value:function(e,t,n){return $b(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return $b(e,t)}},{key:"jn",value:function(e,t){return function(e,t){var n=!1;return Ub(e).tt((function(r){return Lb(e,r,t).next((function(e){return e&&(n=!0),mv.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Qn(e,(function(o,u){if(u<=t){var s=n.jn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Jp.min()),zb(e).delete([0,ak(o.path)])}))}));i.push(s)}})).next((function(){return mv.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return $b(e,t)}},{key:"Qn",value:function(e,t){var n,r=zb(e),i=Av.at;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=_e(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Av.at&&t(new rv(sk(n)),i),i=s,n=u):i=Av.at})).next((function(){i!==Av.at&&t(new rv(sk(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function $b(e,t){return zb(e).put(function(e,t){return{targetId:0,path:ak(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Yb=function(){function e(){Ue(this,e),this.changes=new rg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ve(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Hy.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?mv.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Xb=function(){function e(t){Ue(this,e),this.Tt=t}return Ve(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return tw(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return tw(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Vk(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Hy.newInvalidDocument(t);return tw(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(nw(t))},(function(e,i){r=n.Wn(t,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r={size:0,document:Hy.newInvalidDocument(t)};return tw(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(nw(t))},(function(e,i){r={document:n.Wn(t,i),size:Rb(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=ag();return this.Jn(e,t,(function(e,t){var i=n.Wn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Yn",value:function(e,t){var n=this,r=ag(),i=new Uy(rv.comparator);return this.Jn(e,t,(function(e,t){var a=n.Wn(e,t);r=r.insert(e,a),i=i.insert(e,Rb(t))})).next((function(){return{documents:r,Zn:i}}))}},{key:"Jn",value:function(e,t,n){if(t.isEmpty())return mv.resolve();var r=new By(iw);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(nw(r.first()),nw(r.last())),a=r.getIterator(),o=a.getNext();return tw(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=rv.fromSegments([].concat(Tt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&iw(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(nw(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Vk(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tw(e).W(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=ag(),o=Be(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Wn(rv.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(ym(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=ag(),o=rw(t,n),u=rw(t,fv.max());return tw(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Wn(rv.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Zb(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return ew(e).get("remoteDocumentGlobalKey").next((function(e){return Rp(!!e),e}))}},{key:"zn",value:function(e,t){return ew(e).put("remoteDocumentGlobalKey",t)}},{key:"Wn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=zg(e.oe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=rv.fromSegments(t.noDocument.path),i=qk(t.noDocument.readTime);n=Hy.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Op();var a=rv.fromSegments(t.unknownDocument.path),o=qk(t.unknownDocument.version);n=Hy.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Xp(e[0],e[1]);return Jp.fromTimestamp(t)}(t.readTime)),n}(this.Tt,t);if(!n.isNoDocument()||!n.version.isEqual(Jp.min()))return n}return Hy.newInvalidDocument(e)}}]),e}();function Jb(e){return new Xb(e)}var Zb=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this)).Xn=e,i.trackRemovals=r,i.ts=new rg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ve(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new By((function(e,t){return Qp(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.ts.get(a);if(n.push(t.Xn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=jk(t.Xn.Tt,o);i=i.add(a.path.popLast());var c=Rb(s);r+=c-u.size,n.push(t.Xn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=jk(t.Xn.Tt,o.convertToNoDocument(Jp.min()));n.push(t.Xn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Xn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Xn.updateMetadata(e,r)),mv.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Xn.Hn(e,t).next((function(e){return n.ts.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Xn.Yn(e,t).next((function(e){var t=e.documents;return e.Zn.forEach((function(e,r){n.ts.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Yb);function ew(e){return Rk(e,"remoteDocumentGlobal")}function tw(e){return Rk(e,"remoteDocumentsV14")}function nw(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function rw(e,t){var n=t.documentKey.path.toArray();return[e,Vk(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function iw(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Qp(n[a],r[a]))return i;return(i=Qp(n.length,r.length))||((i=Qp(n[n.length-2],r[r.length-2]))||Qp(n[n.length-1],r[r.length-1]))}var aw=Ve((function e(t,n){Ue(this,e),this.overlayedDocument=t,this.mutatedFields=n})),ow=function(){function e(t,n,r,i){Ue(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Ve(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&qm(r.mutation,e,Ky.empty(),Xp.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,pg()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pg(),i=cg();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=ug();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=cg();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,pg())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=ag(),a=fg(),o=fg();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Wm)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),qm(o.mutation,t,o.mutation.getFieldMask(),Xp.now())):a.set(t.key,Ky.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new aw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=fg(),i=new Uy((function(e,t){return e-t})),a=pg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Be(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Ky.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||pg()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=lg();c.forEach((function(e){if(!a.has(e)){var n=Vm(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return mv.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return rv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):mv.resolve(cg()),u=-1,s=a;return o.next((function(t){return mv.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?mv.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,pg())})).next((function(e){return{batchId:u,changes:sg(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new rv(t)).next((function(e){var t=ug();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ug();return this.indexManager.getCollectionParents(e,i).next((function(o){return mv.forEach(o,(function(o){var u=function(e,t){return new nm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Hy.newInvalidDocument(r)))}));var n=ug();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&qm(a.mutation,i,Ky.empty(),Xp.now()),ym(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),uw=function(){function e(t){Ue(this,e),this.Tt=t,this.es=new Map,this.ns=new Map}return Ve(e,[{key:"getBundleMetadata",value:function(e,t){return mv.resolve(this.es.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.es.set(t.id,{id:(n=t).id,version:n.version,createTime:Rg(n.createTime)}),mv.resolve()}},{key:"getNamedQuery",value:function(e,t){return mv.resolve(this.ns.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ns.set(t.name,function(e){return{name:e.name,query:Wk(e.bundledQuery),readTime:Rg(e.readTime)}}(t)),mv.resolve()}}]),e}(),sw=function(){function e(){Ue(this,e),this.overlays=new Uy(rv.comparator),this.ss=new Map}return Ve(e,[{key:"getOverlay",value:function(e,t){return mv.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=cg();return mv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ce(e,t,i)})),mv.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ss.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ss.delete(n)),mv.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=cg(),i=t.length+1,a=new rv(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return mv.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Uy((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=cg(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=cg(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return mv.resolve(s)}},{key:"ce",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ss.get(r.largestBatchId).delete(n.key);this.ss.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Mk(t,n));var a=this.ss.get(t);void 0===a&&(a=pg(),this.ss.set(t,a)),this.ss.set(t,a.add(n.key))}}]),e}(),cw=function(){function e(){Ue(this,e),this.rs=new By(lw.os),this.us=new By(lw.cs)}return Ve(e,[{key:"isEmpty",value:function(){return this.rs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new lw(e,t);this.rs=this.rs.add(n),this.us=this.us.add(n)}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ls(new lw(e,t))}},{key:"fs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ds",value:function(e){var t=this,n=new rv(new ev([])),r=new lw(n,e),i=new lw(n,e+1),a=[];return this.us.forEachInRange([r,i],(function(e){t.ls(e),a.push(e.key)})),a}},{key:"_s",value:function(){var e=this;this.rs.forEach((function(t){return e.ls(t)}))}},{key:"ls",value:function(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}},{key:"ws",value:function(e){var t=new rv(new ev([])),n=new lw(t,e),r=new lw(t,e+1),i=pg();return this.us.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new lw(e,0),n=this.rs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),lw=function(){function e(t,n){Ue(this,e),this.key=t,this.gs=n}return Ve(e,null,[{key:"os",value:function(e,t){return rv.comparator(e.key,t.key)||Qp(e.gs,t.gs)}},{key:"cs",value:function(e,t){return Qp(e.gs,t.gs)||rv.comparator(e.key,t.key)}}]),e}(),fw=function(){function e(t,n){Ue(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new By(lw.os)}return Ve(e,[{key:"checkEmpty",value:function(e){return mv.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Pk(i,t,n,r);this.mutationQueue.push(a);var o,u=Be(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ps=this.ps.add(new lw(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return mv.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return mv.resolve(this.Is(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ts(n),i=r<0?0:r;return mv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return mv.resolve(0===this.mutationQueue.length?-1:this.ys-1)}},{key:"getAllMutationBatches",value:function(e){return mv.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new lw(t,0),i=new lw(t,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],(function(e){var t=n.Is(e.gs);a.push(t)})),mv.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new By(Qp);return t.forEach((function(e){var t=new lw(e,0),i=new lw(e,Number.POSITIVE_INFINITY);n.ps.forEachInRange([t,i],(function(e){r=r.add(e.gs)}))})),mv.resolve(this.Es(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;rv.isDocumentKey(i)||(i=i.child(""));var a=new lw(new rv(i),0),o=new By(Qp);return this.ps.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gs)),!0)}),a),mv.resolve(this.Es(o))}},{key:"Es",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Is(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Rp(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ps;return mv.forEach(t.mutations,(function(i){var a=new lw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ps=r}))}},{key:"Pn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new lw(t,0),r=this.ps.firstAfterOrEqual(n);return mv.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,mv.resolve()}},{key:"As",value:function(e,t){return this.Ts(e)}},{key:"Ts",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Is",value:function(e){var t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),hw=function(){function e(t){Ue(this,e),this.Rs=t,this.docs=new Uy(rv.comparator),this.size=0}return Ve(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Rs(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return mv.resolve(n?n.document.mutableCopy():Hy.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ag();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Hy.newInvalidDocument(e))})),mv.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=ag(),a=t.path,o=new rv(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||hv(lv(l),n)<=0||(r.has(l.key)||ym(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return mv.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Op()}},{key:"Ps",value:function(e,t){return mv.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new dw(this)}},{key:"getSize",value:function(e){return mv.resolve(this.size)}}]),e}(),dw=function(e){ze(n,e);var t=We(n);function n(e){var r;return Ue(this,n),(r=t.call(this)).Xn=e,r}return Ve(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Xn.addEntry(e,i)):t.Xn.removeEntry(r)})),mv.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Xn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Xn.getEntries(e,t)}}]),n}(Yb),pw=function(){function e(t){Ue(this,e),this.persistence=t,this.vs=new rg((function(e){return Yy(e)}),Xy),this.lastRemoteSnapshotVersion=Jp.min(),this.highestTargetId=0,this.bs=0,this.Vs=new cw,this.targetCount=0,this.Ss=jb.Vn()}return Ve(e,[{key:"forEachTarget",value:function(e,t){return this.vs.forEach((function(e,n){return t(n)})),mv.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return mv.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return mv.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ss.next(),mv.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),mv.resolve()}},{key:"xn",value:function(e){this.vs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ss=new jb(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.xn(t),this.targetCount+=1,mv.resolve()}},{key:"updateTargetData",value:function(e,t){return this.xn(t),mv.resolve()}},{key:"removeTargetData",value:function(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,mv.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.vs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.vs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),mv.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return mv.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.vs.get(t)||null;return mv.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Vs.hs(t,n),mv.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Vs.fs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),mv.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Vs.ds(t),mv.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Vs.ws(t);return mv.resolve(n)}},{key:"containsKey",value:function(e,t){return mv.resolve(this.Vs.containsKey(t))}}]),e}(),vw=function(){function e(t,n){var r=this;Ue(this,e),this.Ds={},this.overlays={},this.Cs=new Av(0),this.xs=!1,this.xs=!0,this.referenceDelegate=t(this),this.Ns=new pw(this),this.indexManager=new wb,this.remoteDocumentCache=new hw((function(e){return r.referenceDelegate.ks(e)})),this.Tt=new Uk(n),this.$s=new uw(this.Tt)}return Ve(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xs=!1,Promise.resolve()}},{key:"started",get:function(){return this.xs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new sw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ds[e.toKey()];return n||(n=new fw(t,this.referenceDelegate),this.Ds[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ns}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.$s}},{key:"runTransaction",value:function(e,t,n){var r=this;Cp("MemoryPersistence","Starting transaction:",e);var i=new yw(this.Cs.next());return this.referenceDelegate.Ms(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Fs",value:function(e,t){return mv.or(Object.values(this.Ds).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),yw=function(e){ze(n,e);var t=We(n);function n(e){var r;return Ue(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ve(n)}(pv),mw=function(){function e(t){Ue(this,e),this.persistence=t,this.Bs=new cw,this.Ls=null}return Ve(e,[{key:"Us",get:function(){if(this.Ls)return this.Ls;throw Op()}},{key:"addReference",value:function(e,t,n){return this.Bs.addReference(n,t),this.Us.delete(n.toString()),mv.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Bs.removeReference(n,t),this.Us.add(n.toString()),mv.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Us.add(t.toString()),mv.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Bs.ds(t.targetId).forEach((function(e){return n.Us.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Us.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ms",value:function(){this.Ls=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mv.forEach(this.Us,(function(r){var i=rv.fromPath(r);return t.Ks(e,i).next((function(e){e||n.removeEntry(i,Jp.min())}))})).next((function(){return t.Ls=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ks(e,t).next((function(e){e?n.Us.delete(t.toString()):n.Us.add(t.toString())}))}},{key:"ks",value:function(e){return 0}},{key:"Ks",value:function(e,t){var n=this;return mv.or([function(){return mv.resolve(n.Bs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Fs(e,t)}])}}],[{key:"qs",value:function(t){return new e(t)}}]),e}(),gw=function(){function e(t){Ue(this,e),this.Tt=t}return Ve(e,[{key:"F",value:function(e,t,n,r){var i=this,a=new gv("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ck,{unique:!0}),e.createObjectStore("documentMutations")}(e),kw(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=mv.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),kw(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Jp.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ck,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return mv.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Gs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.js(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ws(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Ik});t.createIndex("collectionPathOverlayIndex",Ek,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Sk,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:dk});t.createIndex("documentKeyIndex",pk),t.createIndex("collectionGroupIndex",vk)}(e)})).next((function(){return i.Hs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Js(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:bk}).createIndex("sequenceNumberIndex",wk,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:xk}).createIndex("documentKeyIndex",_k,{unique:!1})}(e)}))),o}},{key:"Qs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=Rb(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Gs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return mv.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return mv.forEach(r,(function(r){Rp(r.userId===n.userId);var i=zk(t.Tt,r);return Ob(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"js",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new ev(n),o=function(e){return[0,ak(e)]}(a);r.push(t.get(o).next((function(n){return n?mv.resolve():function(n){return t.put({targetId:0,path:ak(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return mv.waitFor(r)}))}))}},{key:"zs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:kk});var n=t.store("collectionParents"),r=new xb,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ak(i)})}};return t.store("remoteDocuments").X({Z:!0},(function(e,t){var n=new ev(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Z:!0},(function(e,t){var n=_e(e,3),r=(n[0],n[1]),a=(n[2],sk(r));return i(a.popLast())}))}))}},{key:"Ws",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=Kk(r),a=Gk(t.Tt,i);return n.put(a)}))}},{key:"Hs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new rv(ev.fromString(i.document.name).popFirst(5)):i.noDocument?rv.fromSegments(i.noDocument.path):i.unknownDocument?rv.fromSegments(i.unknownDocument.path):Op()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return mv.waitFor(r)}))}},{key:"Js",value:function(e,t){var n=this,r=t.store("mutations"),i=Jb(this.Tt),a=new vw(mw.qs,this.Tt.oe);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:pg();zk(n.Tt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),mv.forEach(r,(function(e,r){var o=new Ip(r),u=Zk.ue(n.Tt,o),s=a.getIndexManager(o),c=Pb.ue(o,n.Tt,s,a.referenceDelegate);return new ow(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Ok(t,Av.at),e).next()}))}))}}]),e}();function kw(e){e.createObjectStore("targetDocuments",{keyPath:mk}).createIndex("documentTargetsIndex",gk,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yk,{unique:!0}),e.createObjectStore("targetGlobal")}var bw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ww=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Ue(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ys=a,this.window=o,this.document=u,this.Zs=c,this.Xs=l,this.ti=f,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=function(e){return Promise.resolve()},!e.C())throw new Mp(Lp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Qb(this,i),this.oi=n+"main",this.Tt=new Uk(s),this.ui=new kv(this.oi,this.ti,new gw(this.Tt)),this.Ns=new Vb(this.referenceDelegate,this.Tt),this.remoteDocumentCache=Jb(this.Tt),this.$s=new Yk,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===l&&Ap("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ve(e,[{key:"start",value:function(){var e=this;return this.ai().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Mp(Lp.FAILED_PRECONDITION,bw);return e.hi(),e.li(),e.fi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ns.getHighestSequenceNumber(t)}))})).then((function(t){e.Cs=new Av(t,e.Zs)})).then((function(){e.xs=!0})).catch((function(t){return e.ui&&e.ui.close(),Promise.reject(t)}))}},{key:"di",value:function(e){var t=this;return this.ri=function(){var n=ge(ye().mark((function n(r){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ui.L(function(){var t=ge(ye().mark((function t(n){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget(ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ai();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ai",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return _w(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e._i(t).next((function(t){t||(e.isPrimary=!1,e.Ys.enqueueRetryable((function(){return e.ri(!1)})))}))})).next((function(){return e.wi(t)})).next((function(n){return e.isPrimary&&!n?e.mi(t).next((function(){return!1})):!!n&&e.gi(t).next((function(){return!0}))}))})).catch((function(t){if(xv(t))return Cp("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Cp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ys.enqueueRetryable((function(){return e.ri(t)})),e.isPrimary=t}))}},{key:"_i",value:function(e){var t=this;return xw(e).get("owner").next((function(e){return mv.resolve(t.yi(e))}))}},{key:"pi",value:function(e){return _w(e).delete(this.clientId)}},{key:"Ii",value:function(){var e=ge(ye().mark((function e(){var t,n,r,i,a=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ti(this.ii,18e5)){e.next=6;break}return this.ii=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Rk(e,"clientMetadata");return t.W().next((function(e){var n=a.Ei(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return mv.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ci){n=Be(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ci.removeItem(this.Ai(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fi",value:function(){var e=this;this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ai().then((function(){return e.Ii()})).then((function(){return e.fi()}))}))}},{key:"yi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"wi",value:function(e){var t=this;return this.Xs?mv.resolve(!0):xw(e).get("owner").next((function(n){if(null!==n&&t.Ti(n.leaseTimestampMs,5e3)&&!t.Ri(n.ownerId)){if(t.yi(n)&&t.networkEnabled)return!0;if(!t.yi(n)){if(!n.allowTabSynchronization)throw new Mp(Lp.FAILED_PRECONDITION,bw);return!1}}return!(!t.networkEnabled||!t.inForeground)||_w(e).W().next((function(e){return void 0===t.Ei(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Cp("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ge(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.xs=!1,this.Pi(),this.si&&(this.si.cancel(),this.si=null),this.vi(),this.bi(),e.next=7,this.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Ok(e,Av.at);return t.mi(n).next((function(){return t.pi(n)}))}));case 7:this.ui.close(),this.Vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ei",value:function(e,t){var n=this;return e.filter((function(e){return n.Ti(e.updateTimeMs,t)&&!n.Ri(e.clientId)}))}},{key:"Si",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return _w(t).W().next((function(t){return e.Ei(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.xs}},{key:"getMutationQueue",value:function(e,t){return Pb.ue(e,this.Tt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ns}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Ib(e,this.Tt.oe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Zk.ue(this.Tt,e)}},{key:"getBundleCache",value:function(){return this.$s}},{key:"runTransaction",value:function(e,t,n){var r=this;Cp("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ti)?Dk:14===i?Nk:13===i?Ak:12===i?Ck:11===i?Tk:void Op();return this.ui.runTransaction(e,o,u,(function(i){return a=new Ok(i,r.Cs?r.Cs.next():Av.at),"readwrite-primary"===t?r._i(a).next((function(e){return!!e||r.wi(a)})).next((function(t){if(!t)throw Ap("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ys.enqueueRetryable((function(){return r.ri(!1)})),new Mp(Lp.FAILED_PRECONDITION,dv);return n(a)})).next((function(e){return r.gi(a).next((function(){return e}))})):r.Di(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Di",value:function(e){var t=this;return xw(e).get("owner").next((function(e){if(null!==e&&t.Ti(e.leaseTimestampMs,5e3)&&!t.Ri(e.ownerId)&&!t.yi(e)&&!(t.Xs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Mp(Lp.FAILED_PRECONDITION,bw)}))}},{key:"gi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xw(e).put("owner",t)}},{key:"mi",value:function(e){var t=this,n=xw(e);return n.get("owner").next((function(e){return t.yi(e)?(Cp("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):mv.resolve()}))}},{key:"Ti",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ap("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"hi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=function(){e.Ys.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ai()}))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}},{key:"vi",value:function(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}},{key:"li",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=function(){t.Pi();var e=/(?:Version|Mobile)\/1[456]/;!st()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ys.enterRestrictedMode(!0),t.Ys.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ei))}},{key:"bi",value:function(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}},{key:"Ri",value:function(e){var t;try{var n=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Cp("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ap("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Pi",value:function(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(Rl){Ap("Failed to set zombie client id.",Rl)}}},{key:"Vi",value:function(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch(Rl){}}},{key:"Ai",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return kv.C()}}]),e}();function xw(e){return Rk(e,"owner")}function _w(e){return Rk(e,"clientMetadata")}function Iw(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Ew=function(){function e(t,n,r,i){Ue(this,e),this.targetId=t,this.fromCache=n,this.Ci=r,this.xi=i}return Ve(e,null,[{key:"Ni",value:function(t,n){var r,i=pg(),a=pg(),o=Be(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Sw=function(){function e(){Ue(this,e),this.ki=!1}return Ve(e,[{key:"initialize",value:function(e,t){this.$i=e,this.indexManager=t,this.ki=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Mi(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Fi(e,t)}))}},{key:"Mi",value:function(e,t){var n=this;if(am(t))return mv.resolve(null);var r=lm(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=hm(t,null,"F"),r=lm(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=pg.apply(void 0,Tt(i));return n.$i.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Bi(t,i);return n.Li(t,o,a,r.readTime)?n.Mi(e,hm(t,null,"F")):n.qi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return am(t)||r.isEqual(Jp.min())?this.Fi(e,t):this.$i.getDocuments(e,n).next((function(a){var o=i.Bi(t,a);return i.Li(t,o,n,r)?i.Fi(e,t):(Tp()<=Ot.DEBUG&&Cp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vm(t)),i.qi(e,o,t,cv(r,-1)))}))}},{key:"Bi",value:function(e,t){var n=new By(gm(e));return t.forEach((function(t,r){ym(e,r)&&(n=n.add(r))})),n}},{key:"Li",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fi",value:function(e,t){return Tp()<=Ot.DEBUG&&Cp("QueryEngine","Using full collection scan to execute query:",vm(t)),this.$i.getDocumentsMatchingQuery(e,t,fv.min())}},{key:"qi",value:function(e,t,n,r){return this.$i.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Tw=function(){function e(t,n,r,i){Ue(this,e),this.persistence=t,this.Ui=n,this.Tt=i,this.Ki=new Uy(Qp),this.Gi=new rg((function(e){return Yy(e)}),Xy),this.Qi=new Map,this.ji=t.getRemoteDocumentCache(),this.Ns=t.getTargetCache(),this.$s=t.getBundleCache(),this.zi(r)}return Ve(e,[{key:"zi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ow(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ki)}))}}]),e}();function Cw(e,t,n,r){return new Tw(e,t,n,r)}function Aw(e,t){return Nw.apply(this,arguments)}function Nw(){return Nw=ge(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pp(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.zi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=pg(),s=Be(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Be(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Be(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Be(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Wi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Nw.apply(this,arguments)}function Dw(e,t){var n=Pp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ji.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=mv.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Rp(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=pg(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Ow(e){var t=Pp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ns.getLastRemoteSnapshotVersion(e)}))}function Rw(e,t){var n=Pp(e),r=t.snapshotVersion,i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ns.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ns.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(jv.EMPTY_BYTE_STRING,Jp.min()).withLastLimboFreeSnapshotVersion(Jp.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Ns.updateTargetData(e,c))}}));var u=ag(),s=pg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Pw(e,a,t.documentUpdates).next((function(e){u=e.Hi,s=e.Ji}))),!r.isEqual(Jp.min())){var c=n.Ns.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ns.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return mv.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ki=i,e}))}function Pw(e,t,n){var r=pg(),i=pg();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=ag();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Jp.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Cp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Hi:r,Ji:i}}))}function Lw(e,t){var n=Pp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Mw(e,t){var n=Pp(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ns.getTargetData(e,t).next((function(i){return i?(r=i,mv.resolve(r)):n.Ns.allocateTargetId(e).next((function(i){return r=new Fk(t,i,0,e.currentSequenceNumber),n.Ns.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ki.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(e.targetId,e),n.Gi.set(t,e.targetId)),e}))}function Fw(e,t,n){return Uw.apply(this,arguments)}function Uw(){return Uw=ge(ye().mark((function e(t,n,r){var i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Pp(t),a=i.Ki.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),xv(e.t1)){e.next=12;break}throw e.t1;case 12:Cp("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ki=i.Ki.remove(n),i.Gi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Uw.apply(this,arguments)}function jw(e,t,n){var r=Pp(e),i=Jp.min(),a=pg();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Pp(e),i=r.Gi.get(n);return void 0!==i?mv.resolve(r.Ki.get(i)):r.Ns.getTargetData(t,n)}(r,e,lm(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Ui.getDocumentsMatchingQuery(e,t,n?i:Jp.min(),n?a:pg())})).next((function(e){return qw(r,mm(t),e),{documents:e,Yi:a}}))}))}function Vw(e,t){var n=Pp(e),r=Pp(n.Ns),i=n.Ki.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ie(e,t).next((function(e){return e?e.target:null}))}))}function Bw(e,t){var n=Pp(e),r=n.Qi.get(t)||Jp.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ji.getAllFromCollectionGroup(e,t,cv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return qw(n,t,e),e}))}function qw(e,t,n){var r=e.Qi.get(t)||Jp.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Qi.set(t,r)}function zw(e,t,n,r){return Kw.apply(this,arguments)}function Kw(){return Kw=ge(ye().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Pp(t),o=pg(),u=ag(),s=Be(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Zi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Xi(l)).setReadTime(n.tr(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.ji.newChangeBuffer({trackRemovals:!0}),e.next=7,Mw(a,function(e){return lm(im(ev.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Pw(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Ns.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Ns.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Hi,t.Ji)})).next((function(){return t.Hi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Kw.apply(this,arguments)}function Gw(e,t){return Ww.apply(this,arguments)}function Ww(){return Ww=ge(ye().mark((function e(t,n){var r,i,a,o=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:pg(),e.next=3,Mw(t,lm(Wk(n.bundledQuery)));case 3:return i=e.sent,a=Pp(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Rg(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.$s.saveNamedQuery(e,n);var o=i.withResumeToken(jv.EMPTY_BYTE_STRING,t);return a.Ki=a.Ki.insert(o.targetId,o),a.Ns.updateTargetData(e,o).next((function(){return a.Ns.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ns.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.$s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Ww.apply(this,arguments)}function Hw(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Qw(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function $w(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Yw=function(){function e(t,n,r,i){Ue(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ve(e,[{key:"nr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"er",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Mp(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ap("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Xw=function(){function e(t,n,r){Ue(this,e),this.targetId=t,this.state=n,this.error=r}return Ve(e,[{key:"nr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"er",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Mp(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ap("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Jw=function(){function e(t,n){Ue(this,e),this.clientId=t,this.activeTargetIds=n}return Ve(e,null,[{key:"er",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=yg(),o=0;i&&o<r.activeTargetIds.length;++o)i=Fv(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ap("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Zw=function(){function e(t,n){Ue(this,e),this.clientId=t,this.onlineState=n}return Ve(e,null,[{key:"er",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ap("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),ex=function(){function e(){Ue(this,e),this.activeTargetIds=yg()}return Ve(e,[{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"ir",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"nr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),tx=function(){function e(t,n,r,i,a){Ue(this,e),this.window=t,this.Ys=n,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new Uy(Qp),this.started=!1,this.hr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.lr=Hw(this.persistenceKey,this.rr),this.dr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.rr,new ex),this._r=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.wr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.mr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.gr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.yr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}return Ve(e,[{key:"start",value:function(){var e=ge(ye().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Si();case 2:t=e.sent,n=Be(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.rr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Hw(this.persistenceKey,i)))&&(o=Jw.er(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.pr(),(u=this.storage.getItem(this.gr))&&(s=this.Ir(u))&&this.Tr(s),c=Be(this.hr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.cr(f)}catch(d){c.e(d)}finally{c.f()}this.hr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.dr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Er(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ar(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ar(e,t,n),this.Rr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem($w(this.persistenceKey,e));if(n){var r=Xw.er(e,n);r&&(t=r.state)}}return this.Pr.sr(e),this.pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Pr.ir(e),this.pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Pr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem($w(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.vr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Rr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Cp("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Cp("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Cp("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"cr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Cp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.lr)return void Ap("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable(ge(ye().mark((function e(){var r,i,a,o,u,s,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t._r.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Sr(n.key),e.abrupt("return",t.Dr(r,null));case 6:if(!(i=t.Cr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Dr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.wr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Nr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.kr(a));case 16:e.next=41;break;case 18:if(!t.mr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.$r(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.gr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Ir(n.newValue))){e.next=30;break}return e.abrupt("return",t.Tr(u));case 30:e.next=41;break;case 32:if(n.key!==t.dr){e.next=37;break}s=function(e){var t=Av.at;if(null!=e)try{var n=JSON.parse(e);Rp("number"==typeof n),t=n}catch(e){Ap("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Av.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.yr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.hr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Pr",get:function(){return this.ar.get(this.rr)}},{key:"pr",value:function(){this.setItem(this.lr,this.Pr.nr())}},{key:"Ar",value:function(e,t,n){var r=new Yw(this.currentUser,e,t,n),i=Qw(this.persistenceKey,this.currentUser,e);this.setItem(i,r.nr())}},{key:"Rr",value:function(e){var t=Qw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.rr,onlineState:e};this.storage.setItem(this.gr,JSON.stringify(t))}},{key:"vr",value:function(e,t,n){var r=$w(this.persistenceKey,e),i=new Xw(e,t,n);this.setItem(r,i.nr())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}},{key:"Sr",value:function(e){var t=this._r.exec(e);return t?t[1]:null}},{key:"Cr",value:function(e,t){var n=this.Sr(e);return Jw.er(n,t)}},{key:"Nr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Yw.er(new Ip(i),r,t)}},{key:"$r",value:function(e,t){var n=this.mr.exec(e),r=Number(n[1]);return Xw.er(r,t)}},{key:"Ir",value:function(e){return Zw.er(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"kr",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Br(t.batchId,t.state,t.error));case 2:Cp("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}},{key:"Dr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Er(this.ar),a=this.Er(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.qr(o,u).then((function(){n.ar=r}))}},{key:"Tr",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Er",value:function(e){var t=yg();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),nx=function(){function e(){Ue(this,e),this.Ur=new ex,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ve(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Kr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.ir(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Kr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new ex,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),rx=function(){function e(){Ue(this,e)}return Ve(e,[{key:"Gr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),ix=function(){function e(){var t=this;Ue(this,e),this.Qr=function(){return t.jr()},this.zr=function(){return t.Wr()},this.Hr=[],this.Jr()}return Ve(e,[{key:"Gr",value:function(e){this.Hr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}},{key:"Jr",value:function(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}},{key:"jr",value:function(){Cp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Be(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){Cp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Be(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),ax=null;function ox(){return null===ax?ax=268435456+Math.round(2147483648*Math.random()):ax++,"0x"+ax.toString(16)}var ux={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},sx=function(){function e(t){Ue(this,e),this.Yr=t.Yr,this.Zr=t.Zr}return Ve(e,[{key:"Xr",value:function(e){this.eo=e}},{key:"no",value:function(e){this.so=e}},{key:"onMessage",value:function(e){this.io=e}},{key:"close",value:function(){this.Zr()}},{key:"send",value:function(e){this.Yr(e)}},{key:"ro",value:function(){this.eo()}},{key:"oo",value:function(e){this.so(e)}},{key:"uo",value:function(e){this.io(e)}}]),e}(),cx="WebChannelConnection",lx=function(e){ze(n,e);var t=We(n);function n(e){var r;return Ue(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Ve(n,[{key:"wo",value:function(e,t,n,r){var i=ox();return new Promise((function(a,o){var u=new xp;u.setWithCredentials(!0),u.listenOnce(mp.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case yp.NO_ERROR:var t=u.getResponseJson();Cp(cx,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case yp.TIMEOUT:Cp(cx,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Mp(Lp.DEADLINE_EXCEEDED,"Request time out"));break;case yp.HTTP_ERROR:var n=u.getStatus();if(Cp(cx,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Lp).indexOf(t)>=0?t:Lp.UNKNOWN}(s.status);o(new Mp(c,s.message))}else o(new Mp(Lp.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Mp(Lp.UNAVAILABLE,"Connection failed."));break;default:Op()}}finally{Cp(cx,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Cp(cx,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"yo",value:function(e,t,n){var r=ox(),i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=pp(),o=vp(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new bp({})),this._o(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");Cp(cx,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new sx({Yr:function(t){f?Cp(cx,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(Cp(cx,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),Cp(cx,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Zr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,wp.EventType.OPEN,(function(){f||Cp(cx,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,wp.EventType.CLOSE,(function(){f||(f=!0,Cp(cx,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.oo())})),d(c,wp.EventType.ERROR,(function(t){f||(f=!0,Np(cx,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.oo(new Mp(Lp.UNAVAILABLE,"The operation could not be completed")))})),d(c,wp.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Rp(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Cp(cx,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Ym[e];if(void 0!==t)return ng(t)}(u),l=o.message;void 0===s&&(s=Lp.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.oo(new Mp(s,l)),c.close()}else Cp(cx,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.uo(i)}})),d(o,gp.STAT_EVENT,(function(t){t.stat===kp.PROXY?Cp(cx,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===kp.NOPROXY&&Cp(cx,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.ro()}),0),h}}]),n}(function(){function e(t){Ue(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.co=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ve(e,[{key:"ho",get:function(){return!1}},{key:"lo",value:function(e,t,n,r,i){var a=ox(),o=this.fo(e,t);Cp("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this._o(u,r,i),this.wo(e,o,u,n).then((function(t){return Cp("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Np("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"mo",value:function(e,t,n,r,i,a){return this.lo(e,t,n,r,i)}},{key:"_o",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ep,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"fo",value:function(e,t){var n=ux[e];return"".concat(this.co,"/v1/").concat(t,":").concat(n)}}]),e}());function fx(){return"undefined"!=typeof window?window:null}function hx(){return"undefined"!=typeof document?document:null}function dx(e){return new Ag(e,!0)}var px=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Ue(this,e),this.Ys=t,this.timerId=n,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}return Ve(e,[{key:"reset",value:function(){this.Eo=0}},{key:"Po",value:function(){this.Eo=this.To}},{key:"vo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&Cp("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Eo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,(function(){return t.Ro=Date.now(),e()})),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}},{key:"Vo",value:function(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}},{key:"cancel",value:function(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Eo}}]),e}(),vx=function(){function e(t,n,r,i,a,o,u,s){Ue(this,e),this.Ys=t,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new px(t,n)}return Ve(e,[{key:"$o",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.$o(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.ko.reset()}},{key:"Bo",value:function(){var e=this;this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,(function(){return e.Lo()})))}},{key:"qo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Lo",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"Ko",value:function(){this.No&&(this.No.cancel(),this.No=null)}},{key:"close",value:function(){var e=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,4!==t?this.ko.reset():n&&n.code===Lp.RESOURCE_EXHAUSTED?(Ap(n.toString()),Ap("Using maximum backoff delay to prevent overloading the backend."),this.ko.Po()):n&&n.code===Lp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Go(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.no(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Go",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=_e(t,2),i=r[0],a=r[1];e.Co===n&&e.jo(i,a)}),(function(n){t((function(){var t=new Mp(Lp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.zo(t)}))}))}},{key:"jo",value:function(e,t){var n=this,r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.No=n.Ys.enqueueAfterDelay(n.Do,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.no((function(e){r((function(){return n.zo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.ko.vo(ge(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"zo",value:function(e){return Cp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Qo",value:function(e){var t=this;return function(n){t.Ys.enqueueAndForget((function(){return t.Co===e?n():(Cp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),yx=function(e){ze(n,e);var t=We(n);function n(e,r,i,a,o,u){var s;return Ue(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).Tt=o,s}return Ve(n,[{key:"Wo",value:function(e,t){return this.connection.yo("Listen",e,t)}},{key:"onMessage",value:function(e){this.ko.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Op()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.yt?(Rp(void 0===t||"string"==typeof t),jv.fromBase64String(t||"")):(Rp(void 0===t||t instanceof Uint8Array),jv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Lp.UNKNOWN:ng(e.code);return new Mp(t,e.message||"")}(o);n=new wg(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Fg(e,s.document.name),l=Rg(s.document.updateTime),f=s.document.createTime?Rg(s.document.createTime):Jp.min(),h=new Gy({mapValue:{fields:s.document.fields}}),d=Hy.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new kg(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Fg(e,y.document),g=y.readTime?Rg(y.readTime):Jp.min(),k=Hy.newNoDocument(m,g),b=y.removedTargetIds||[];n=new kg([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=Fg(e,w.document),_=w.removedTargetIds||[];n=new kg([],_,x,null)}else{if(!("filter"in t))return Op();t.filter;var I=t.filter;I.targetId;var E=I.count||0,S=new eg(E),T=I.targetId;n=new bg(T,S)}return n}(this.Tt,e),n=function(e){if(!("targetChange"in e))return Jp.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Jp.min():t.readTime?Rg(t.readTime):Jp.min()}(e);return this.listener.Ho(t,n)}},{key:"Jo",value:function(e){var t={};t.database=Vg(this.Tt),t.addTarget=function(e,t){var n,r=t.target;return(n=Jy(r)?{documents:Hg(e,r)}:{query:Qg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Dg(e,t.resumeToken):t.snapshotVersion.compareTo(Jp.min())>0&&(n.readTime=Ng(e,t.snapshotVersion.toTimestamp())),n}(this.Tt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Op()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.Tt,e);n&&(t.labels=n),this.qo(t)}},{key:"Yo",value:function(e){var t={};t.database=Vg(this.Tt),t.removeTarget=e,this.qo(t)}}]),n}(vx),mx=function(e){ze(n,e);var t=We(n);function n(e,r,i,a,o,u){var s;return Ue(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).Tt=o,s.Zo=!1,s}return Ve(n,[{key:"Xo",get:function(){return this.Zo}},{key:"start",value:function(){this.Zo=!1,this.lastStreamToken=void 0,ur(Ke(n.prototype),"start",this).call(this)}},{key:"Go",value:function(){this.Zo&&this.tu([])}},{key:"Wo",value:function(e,t){return this.connection.yo("Write",e,t)}},{key:"onMessage",value:function(e){if(Rp(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();var t=function(e,t){return e&&e.length>0?(Rp(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Rg(e.updateTime):Rg(t);return n.isEqual(Jp.min())&&(n=Rg(t)),new Mm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Rg(e.commitTime);return this.listener.eu(n,t)}return Rp(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}},{key:"su",value:function(){var e={};e.database=Vg(this.Tt),this.qo(e)}},{key:"tu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Gg(t.Tt,e)}))};this.qo(n)}}]),n}(vx),gx=function(e){ze(n,e);var t=We(n);function n(e,r,i,a){var o;return Ue(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.Tt=a,o.iu=!1,o}return Ve(n,[{key:"ru",value:function(){if(this.iu)throw new Mp(Lp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"lo",value:function(e,t,n){var r=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=_e(i,2),o=a[0],u=a[1];return r.connection.lo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Lp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Mp(Lp.UNKNOWN,e.toString())}))}},{key:"mo",value:function(e,t,n,r){var i=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=_e(a,2),u=o[0],s=o[1];return i.connection.mo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Lp.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Mp(Lp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.iu=!0}}]),n}(function(){return Ve((function e(){Ue(this,e)}))}());var kx=function(){function e(t,n){Ue(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}return Ve(e,[{key:"au",value:function(){var e=this;0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.uu=null,e.lu("Backend didn't respond within 10 seconds."),e.hu("Offline"),Promise.resolve()})))}},{key:"fu",value:function(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.hu("Offline")))}},{key:"set",value:function(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}},{key:"hu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"lu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.cu?(Ap(t),this.cu=!1):Cp("OnlineStateTracker",t)}},{key:"du",value:function(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}]),e}(),bx=Ve((function e(t,n,r,i,a){var o=this;Ue(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr((function(e){r.enqueueAndForget(ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Dx(o),!e.t0){e.next=5;break}return Cp("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Pp(t)).mu.add(4),e.next=4,_x(n);case 4:return n.pu.set("Unknown"),n.mu.delete(4),e.next=8,wx(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.pu=new kx(r,i)}));function wx(e){return xx.apply(this,arguments)}function xx(){return xx=ge(ye().mark((function e(t){var n,r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Dx(t)){e.next=18;break}n=Be(t.gu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),xx.apply(this,arguments)}function _x(e){return Ix.apply(this,arguments)}function Ix(){return Ix=ge(ye().mark((function e(t){var n,r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Be(t.gu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Ix.apply(this,arguments)}function Ex(e,t){var n=Pp(e);n.wu.has(t.targetId)||(n.wu.set(t.targetId,t),Nx(n)?Ax(n):o_(n).Mo()&&Tx(n,t))}function Sx(e,t){var n=Pp(e),r=o_(n);n.wu.delete(t),r.Mo()&&Cx(n,t),0===n.wu.size&&(r.Mo()?r.Bo():Dx(n)&&n.pu.set("Unknown"))}function Tx(e,t){e.Iu.Ot(t.targetId),o_(e).Jo(t)}function Cx(e,t){e.Iu.Ot(t),o_(e).Yo(t)}function Ax(e){e.Iu=new _g({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ie:function(t){return e.wu.get(t)||null}}),o_(e).start(),e.pu.au()}function Nx(e){return Dx(e)&&!o_(e).$o()&&e.wu.size>0}function Dx(e){return 0===Pp(e).mu.size}function Ox(e){e.Iu=void 0}function Rx(e){return Px.apply(this,arguments)}function Px(){return Px=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.wu.forEach((function(e,n){Tx(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Px.apply(this,arguments)}function Lx(e,t){return Mx.apply(this,arguments)}function Mx(){return Mx=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ox(t),Nx(t)?(t.pu.fu(n),Ax(t)):t.pu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Mx.apply(this,arguments)}function Fx(e,t,n){return Ux.apply(this,arguments)}function Ux(){return Ux=ge(ye().mark((function e(t,n,r){var i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.pu.set("Online"),!(n instanceof wg&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ge(ye().mark((function e(t,n){var r,i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Be(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.wu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.wu.delete(o),t.Iu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Cp("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,jx(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof kg?t.Iu.Qt(n):n instanceof bg?t.Iu.Zt(n):t.Iu.Wt(n),r.isEqual(Jp.min())){e.next=29;break}return e.prev=14,e.next=17,Ow(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Iu.ee(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.wu.get(r);i&&e.wu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.wu.get(t);if(n){e.wu.set(t,n.withResumeToken(jv.EMPTY_BYTE_STRING,n.snapshotVersion)),Cx(e,t);var r=new Fk(n.target,t,1,n.sequenceNumber);Tx(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Cp("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,jx(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Ux.apply(this,arguments)}function jx(e,t,n){return Vx.apply(this,arguments)}function Vx(){return Vx=ge(ye().mark((function e(t,n,r){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xv(n)){e.next=2;break}throw n;case 2:return t.mu.add(1),e.next=5,_x(t);case 5:t.pu.set("Offline"),r||(r=function(){return Ow(t.localStore)}),t.asyncQueue.enqueueRetryable(ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cp("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.mu.delete(1),e.next=6,wx(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Vx.apply(this,arguments)}function Bx(e,t){return t().catch((function(n){return jx(e,n,t)}))}function qx(e){return zx.apply(this,arguments)}function zx(){return zx=ge(ye().mark((function e(t){var n,r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Pp(t),r=u_(n),i=n._u.length>0?n._u[n._u.length-1].batchId:-1;case 2:if(!Kx(n)){e.next=19;break}return e.prev=3,e.next=6,Lw(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n._u.length&&r.Bo(),e.abrupt("break",19);case 10:i=a.batchId,Gx(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,jx(n,e.t0);case 17:e.next=2;break;case 19:Wx(n)&&Hx(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),zx.apply(this,arguments)}function Kx(e){return Dx(e)&&e._u.length<10}function Gx(e,t){e._u.push(t);var n=u_(e);n.Mo()&&n.Xo&&n.tu(t.mutations)}function Wx(e){return Dx(e)&&!u_(e).$o()&&e._u.length>0}function Hx(e){u_(e).start()}function Qx(e){return $x.apply(this,arguments)}function $x(){return $x=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u_(t).su();case 1:case"end":return e.stop()}}),e)}))),$x.apply(this,arguments)}function Yx(e){return Xx.apply(this,arguments)}function Xx(){return Xx=ge(ye().mark((function e(t){var n,r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=u_(t),r=Be(t._u);try{for(r.s();!(i=r.n()).done;)a=i.value,n.tu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Xx.apply(this,arguments)}function Jx(e,t,n){return Zx.apply(this,arguments)}function Zx(){return Zx=ge(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t._u.shift(),a=Lk.from(i,n,r),e.next=3,Bx(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,qx(t);case 5:case"end":return e.stop()}}),e)}))),Zx.apply(this,arguments)}function e_(e,t){return t_.apply(this,arguments)}function t_(){return t_=ge(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&u_(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=ge(ye().mark((function e(t,n){var r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!tg(i=n.code)||i===Lp.ABORTED){e.next=7;break}return r=t._u.shift(),u_(t).Fo(),e.next=5,Bx(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,qx(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Wx(t)&&Hx(t);case 5:case"end":return e.stop()}}),e)}))),t_.apply(this,arguments)}function n_(e,t){return r_.apply(this,arguments)}function r_(){return r_=ge(ye().mark((function e(t,n){var r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Pp(t)).asyncQueue.verifyOperationInProgress(),Cp("RemoteStore","RemoteStore received new credentials"),i=Dx(r),r.mu.add(3),e.next=6,_x(r);case 6:return i&&r.pu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.mu.delete(3),e.next=12,wx(r);case 12:case"end":return e.stop()}}),e)}))),r_.apply(this,arguments)}function i_(e,t){return a_.apply(this,arguments)}function a_(){return a_=ge(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Pp(t),!n){e.next=7;break}return r.mu.delete(2),e.next=5,wx(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.mu.add(2),e.next=12,_x(r);case 12:r.pu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),a_.apply(this,arguments)}function o_(e){return e.Tu||(e.Tu=function(e,t,n){var r=Pp(e);return r.ru(),new yx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:Rx.bind(null,e),no:Lx.bind(null,e),Ho:Fx.bind(null,e)}),e.gu.push(function(){var t=ge(ye().mark((function t(n){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Tu.Fo(),Nx(e)?Ax(e):e.pu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Tu.stop();case 6:Ox(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}function u_(e){return e.Eu||(e.Eu=function(e,t,n){var r=Pp(e);return r.ru(),new mx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:Qx.bind(null,e),no:e_.bind(null,e),nu:Yx.bind(null,e),eu:Jx.bind(null,e)}),e.gu.push(function(){var t=ge(ye().mark((function t(n){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Eu.Fo(),t.next=4,qx(e);case 4:t.next=9;break;case 6:return t.next=8,e.Eu.stop();case 8:e._u.length>0&&(Cp("RemoteStore","Stopping write stream with ".concat(e._u.length," pending writes")),e._u=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Eu}var s_=function(){function e(t,n,r,i,a){Ue(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Fp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ve(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Mp(Lp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function c_(e,t){if(Ap("AsyncQueue","".concat(t,": ").concat(e)),xv(e))return new Mp(Lp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var l_=function(){function e(t){Ue(this,e),this.comparator=t?function(e,n){return t(e,n)||rv.comparator(e.key,n.key)}:function(e,t){return rv.comparator(e.key,t.key)},this.keyedMap=ug(),this.sortedSet=new Uy(this.comparator)}return Ve(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),f_=function(){function e(){Ue(this,e),this.Au=new Uy(rv.comparator)}return Ve(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Au.get(t);n?0!==e.type&&3===n.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==n.type?this.Au=this.Au.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Au=this.Au.remove(t):1===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):Op():this.Au=this.Au.insert(t,e)}},{key:"Ru",value:function(){var e=[];return this.Au.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),h_=function(){function e(t,n,r,i,a,o,u,s,c){Ue(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return Ve(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,l_.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),d_=Ve((function e(){Ue(this,e),this.Pu=void 0,this.listeners=[]})),p_=Ve((function e(){Ue(this,e),this.queries=new rg((function(e){return pm(e)}),dm),this.onlineState="Unknown",this.vu=new Set}));function v_(e,t){return y_.apply(this,arguments)}function y_(){return y_=ge(ye().mark((function e(t,n){var r,i,a,o,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Pp(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new d_),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Pu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=c_(e.t0,"Initialization of query '".concat(vm(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Pu&&n.Vu(o.Pu)&&w_(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),y_.apply(this,arguments)}function m_(e,t){return g_.apply(this,arguments)}function g_(){return g_=ge(ye().mark((function e(t,n){var r,i,a,o,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Pp(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),g_.apply(this,arguments)}function k_(e,t){var n,r=Pp(e),i=!1,a=Be(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Be(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Pu=o}}}catch(f){a.e(f)}finally{a.f()}i&&w_(r)}function b_(e,t,n){var r=Pp(e),i=r.queries.get(t);if(i){var a,o=Be(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function w_(e){e.vu.forEach((function(e){e.next()}))}var x_=function(){function e(t,n,r){Ue(this,e),this.query=t,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}return Ve(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Be(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new h_(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Du?this.xu(e)&&(this.Su.next(e),a=!0):this.Nu(e,this.onlineState)&&(this.ku(e),a=!0),this.Cu=e,a}},{key:"onError",value:function(e){this.Su.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}},{key:"Nu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.$u||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"xu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"ku",value:function(e){e=h_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}]),e}(),__=function(){function e(t,n){Ue(this,e),this.Mu=t,this.byteLength=n}return Ve(e,[{key:"Ou",value:function(){return"metadata"in this.Mu}}]),e}(),I_=function(){function e(t){Ue(this,e),this.Tt=t}return Ve(e,[{key:"Zi",value:function(e){return Fg(this.Tt,e)}},{key:"Xi",value:function(e){return e.metadata.exists?zg(this.Tt,e.document,!1):Hy.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}},{key:"tr",value:function(e){return Rg(e)}}]),e}(),E_=function(){function e(t,n,r){Ue(this,e),this.Fu=t,this.localStore=n,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=S_(t)}return Ve(e,[{key:"Bu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;var n=ev.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Lu",value:function(e){var t,n=new Map,r=new I_(this.Tt),i=Be(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Zi(a.metadata.name),s=Be(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||pg()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ge(ye().mark((function e(){var t,n,r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zw(this.localStore,new I_(this.Tt),this.documents,this.Fu.id);case 2:t=e.sent,n=this.Lu(this.documents),r=Be(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Gw(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,qu:this.collectionGroups,Uu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function S_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var T_=Ve((function e(t){Ue(this,e),this.key=t})),C_=Ve((function e(t){Ue(this,e),this.key=t})),A_=function(){function e(t,n){Ue(this,e),this.query=t,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=pg(),this.mutatedKeys=pg(),this.ju=gm(t),this.zu=new l_(this.ju)}return Ve(e,[{key:"Wu",get:function(){return this.Ku}},{key:"Hu",value:function(e,t){var n=this,r=t?t.Ju:new f_,i=t?t.zu:this.zu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=ym(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Yu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.ju(f,s)>0||c&&n.ju(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{zu:o,Ju:r,Li:u,mutatedKeys:a}}},{key:"Yu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;var a=e.Ju.Ru();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Op()}};return n(e)-n(t)}(e.type,t.type)||r.ju(e.doc,t.doc)})),this.Zu(n);var o=t?this.Xu():[],u=0===this.Qu.size&&this.current?1:0,s=u!==this.Gu;return this.Gu=u,0!==a.length||s?{snapshot:new h_(this.query,e.zu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new f_,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}},{key:"ec",value:function(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}},{key:"Zu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ku=t.Ku.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ku=t.Ku.delete(e)})),this.current=e.current)}},{key:"Xu",value:function(){var e=this;if(!this.current)return[];var t=this.Qu;this.Qu=pg(),this.zu.forEach((function(t){e.ec(t.key)&&(e.Qu=e.Qu.add(t.key))}));var n=[];return t.forEach((function(t){e.Qu.has(t)||n.push(new C_(t))})),this.Qu.forEach((function(e){t.has(e)||n.push(new T_(e))})),n}},{key:"nc",value:function(e){this.Ku=e.Yi,this.Qu=pg();var t=this.Hu(e.documents);return this.applyChanges(t,!0)}},{key:"sc",value:function(){return h_.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}]),e}(),N_=Ve((function e(t,n,r){Ue(this,e),this.query=t,this.targetId=n,this.view=r})),D_=Ve((function e(t){Ue(this,e),this.key=t,this.ic=!1})),O_=function(){function e(t,n,r,i,a,o){Ue(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new rg((function(e){return pm(e)}),dm),this.uc=new Map,this.cc=new Set,this.ac=new Uy(rv.comparator),this.hc=new Map,this.lc=new cw,this.fc={},this.dc=new Map,this._c=jb.Sn(),this.onlineState="Unknown",this.wc=void 0}return Ve(e,[{key:"isPrimaryClient",get:function(){return!0===this.wc}}]),e}();function R_(e,t){return P_.apply(this,arguments)}function P_(){return P_=ge(ye().mark((function e(t,n){var r,i,a,o,u,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=SI(t),!(o=r.oc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.sc(),e.next=15;break;case 6:return e.next=8,Mw(r.localStore,lm(n));case 8:return u=e.sent,r.isPrimaryClient&&Ex(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,L_(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),P_.apply(this,arguments)}function L_(e,t,n,r,i){return M_.apply(this,arguments)}function M_(){return M_=ge(ye().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.mc=function(e,n,r){return function(){var e=ge(ye().mark((function e(t,n,r,i){var a,o,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Hu(r),e.t0=a.Li,!e.t0){e.next=6;break}return e.next=5,jw(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Hu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(nI(t,n.targetId,u.tc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,jw(t.localStore,n,!0);case 3:return o=e.sent,u=new A_(n,o.Yi),s=u.Hu(o.documents),c=gg.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),nI(t,r,l.tc),f=new N_(n,r,u),e.abrupt("return",(t.oc.set(n,f),t.uc.has(r)?t.uc.get(r).push(n):t.uc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),M_.apply(this,arguments)}function F_(e,t){return U_.apply(this,arguments)}function U_(){return U_=ge(ye().mark((function e(t,n){var r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Pp(t),i=r.oc.get(n),!((a=r.uc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.uc.set(i.targetId,a.filter((function(e){return!dm(e,n)}))),void r.oc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Fw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Sx(r.remoteStore,i.targetId),eI(r,i.targetId)})).catch(vv);case 9:e.next=14;break;case 11:return eI(r,i.targetId),e.next=14,Fw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),U_.apply(this,arguments)}function j_(e,t,n){return V_.apply(this,arguments)}function V_(){return V_=ge(ye().mark((function e(t,n,r){var i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=TI(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Pp(e),a=Xp.now(),o=t.reduce((function(e,t){return e.add(t.key)}),pg());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=ag(),s=pg();return i.ji.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Be(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=zm(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Wm(c.key,l,Wy(l.value.mapValue),Fm.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:sg(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.fc[e.currentUser.toKey()];r||(r=new Uy(Qp)),r=r.insert(t,n),e.fc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,aI(i,a.changes);case 9:return e.next=11,qx(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=c_(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),V_.apply(this,arguments)}function B_(e,t){return q_.apply(this,arguments)}function q_(){return q_=ge(ye().mark((function e(t,n){var r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pp(t),e.prev=1,e.next=4,Rw(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.hc.get(t);n&&(Rp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ic=!0:e.modifiedDocuments.size>0?Rp(n.ic):e.removedDocuments.size>0&&(Rp(n.ic),n.ic=!1))})),e.next=8,aI(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,vv(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),q_.apply(this,arguments)}function z_(e,t,n){var r=Pp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.oc.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Pp(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Be(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&w_(n)}(r.eventManager,t),i.length&&r.rc.Ho(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function K_(e,t,n){return G_.apply(this,arguments)}function G_(){return G_=ge(ye().mark((function e(t,n,r){var i,a,o,u,s,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Pp(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.hc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Uy(rv.comparator)).insert(o,Hy.newNoDocument(o,Jp.min())),s=pg().add(o),c=new mg(Jp.min(),new Map,new By(Qp),u,s),e.next=9,B_(i,c);case 9:i.ac=i.ac.remove(o),i.hc.delete(n),iI(i),e.next=16;break;case 14:return e.next=16,Fw(i.localStore,n,!1).then((function(){return eI(i,n,r)})).catch(vv);case 16:case"end":return e.stop()}}),e)}))),G_.apply(this,arguments)}function W_(e,t){return H_.apply(this,arguments)}function H_(){return H_=ge(ye().mark((function e(t,n){var r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pp(t),i=n.batch.batchId,e.prev=1,e.next=4,Dw(r.localStore,n);case 4:return a=e.sent,Z_(r,i,null),J_(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,aI(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,vv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),H_.apply(this,arguments)}function Q_(e,t,n){return $_.apply(this,arguments)}function $_(){return $_=ge(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pp(t),e.prev=1,e.next=4,function(e,t){var n=Pp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Rp(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Z_(i,n,r),J_(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,aI(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,vv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),$_.apply(this,arguments)}function Y_(e,t){return X_.apply(this,arguments)}function X_(){return X_=ge(ye().mark((function e(t,n){var r,i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dx((r=Pp(t)).remoteStore)||Cp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Pp(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.dc.get(i)||[]).push(n),r.dc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=c_(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),X_.apply(this,arguments)}function J_(e,t){(e.dc.get(t)||[]).forEach((function(e){e.resolve()})),e.dc.delete(t)}function Z_(e,t,n){var r=Pp(e),i=r.fc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.fc[r.currentUser.toKey()]=i}}function eI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Be(e.uc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.oc.delete(a),n&&e.rc.gc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.uc.delete(t),e.isPrimaryClient&&e.lc.ds(t).forEach((function(t){e.lc.containsKey(t)||tI(e,t)}))}function tI(e,t){e.cc.delete(t.path.canonicalString());var n=e.ac.get(t);null!==n&&(Sx(e.remoteStore,n),e.ac=e.ac.remove(t),e.hc.delete(n),iI(e))}function nI(e,t,n){var r,i=Be(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof T_?(e.lc.addReference(a.key,t),rI(e,a)):a instanceof C_?(Cp("SyncEngine","Document no longer in limbo: "+a.key),e.lc.removeReference(a.key,t),e.lc.containsKey(a.key)||tI(e,a.key)):Op()}}catch(o){i.e(o)}finally{i.f()}}function rI(e,t){var n=t.key,r=n.path.canonicalString();e.ac.get(n)||e.cc.has(r)||(Cp("SyncEngine","New document in limbo: "+n),e.cc.add(r),iI(e))}function iI(e){for(;e.cc.size>0&&e.ac.size<e.maxConcurrentLimboResolutions;){var t=e.cc.values().next().value;e.cc.delete(t);var n=new rv(ev.fromString(t)),r=e._c.next();e.hc.set(r,new D_(n)),e.ac=e.ac.insert(n,r),Ex(e.remoteStore,new Fk(lm(im(n.path)),r,2,Av.at))}}function aI(e,t,n){return oI.apply(this,arguments)}function oI(){return oI=ge(ye().mark((function e(t,n,r){var i,a,o,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Pp(t),a=[],o=[],u=[],e.t0=i.oc.isEmpty(),e.t0){e.next=9;break}return i.oc.forEach((function(e,t){u.push(i.mc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Ew.Ni(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.rc.Ho(a),e.next=9,function(){var e=ge(ye().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pp(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return mv.forEach(n,(function(t){return mv.forEach(t.Ci,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return mv.forEach(t.xi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),xv(e.t0)){e.next=10;break}throw e.t0;case 10:Cp("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Be(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ki.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ki=r.Ki.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),oI.apply(this,arguments)}function uI(e,t){return sI.apply(this,arguments)}function sI(){return sI=ge(ye().mark((function e(t,n){var r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Pp(t)).currentUser.isEqual(n)){e.next=11;break}return Cp("SyncEngine","User change. New user:",n.toKey()),e.next=5,Aw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.dc.forEach((function(e){e.forEach((function(e){e.reject(new Mp(Lp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.dc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,aI(r,i.Wi);case 11:case"end":return e.stop()}}),e)}))),sI.apply(this,arguments)}function cI(e,t){var n=Pp(e),r=n.hc.get(t);if(r&&r.ic)return pg().add(r.key);var i=pg(),a=n.uc.get(t);if(!a)return i;var o,u=Be(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.oc.get(s);i=i.unionWith(c.view.Wu)}}catch(l){u.e(l)}finally{u.f()}return i}function lI(e,t){return fI.apply(this,arguments)}function fI(){return fI=ge(ye().mark((function e(t,n){var r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pp(t),e.next=3,jw(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.nc(i),e.abrupt("return",(r.isPrimaryClient&&nI(r,n.targetId,a.tc),a));case 6:case"end":return e.stop()}}),e)}))),fI.apply(this,arguments)}function hI(e,t){return dI.apply(this,arguments)}function dI(){return dI=ge(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pp(t),e.abrupt("return",Bw(r.localStore,n).then((function(e){return aI(r,e)})));case 2:case"end":return e.stop()}}),e)}))),dI.apply(this,arguments)}function pI(e,t,n,r){return vI.apply(this,arguments)}function vI(){return vI=ge(ye().mark((function e(t,n,r,i){var a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Pp(t),e.next=3,function(e,t){var n=Pp(e),r=Pp(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.An(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):mv.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,qx(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Z_(a,n,i||null),J_(a,n),function(e,t){Pp(Pp(e).mutationQueue).Pn(t)}(a.localStore,n)):Op();case 11:return e.next=13,aI(a,o);case 13:e.next=16;break;case 15:Cp("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),vI.apply(this,arguments)}function yI(e,t){return mI.apply(this,arguments)}function mI(){return mI=ge(ye().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(SI(r=Pp(t)),TI(r),!0!==n||!0===r.wc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,gI(r,i.toArray());case 5:return a=e.sent,r.wc=!0,e.next=9,i_(r.remoteStore,!0);case 9:o=Be(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Ex(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.wc){e.next=25;break}return c=[],l=Promise.resolve(),r.uc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return eI(r,t),Fw(r.localStore,t,!0)})),Sx(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,gI(r,c);case 21:return function(e){var t=Pp(e);t.hc.forEach((function(e,n){Sx(t.remoteStore,n)})),t.lc._s(),t.hc=new Map,t.ac=new Uy(rv.comparator)}(r),r.wc=!1,e.next=25,i_(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),mI.apply(this,arguments)}function gI(e,t,n){return kI.apply(this,arguments)}function kI(){return kI=ge(ye().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Pp(t),a=[],o=[],u=Be(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.uc.get(c))||0===f.length){e.next=34;break}return e.next=11,Mw(i.localStore,lm(f[0]));case 11:l=e.sent,h=Be(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.oc.get(p),e.next=20,lI(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Vw(i.localStore,c);case 36:return m=e.sent,e.next=39,Mw(i.localStore,m);case 39:return l=e.sent,e.next=42,L_(i,bI(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.rc.Ho(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),kI.apply(this,arguments)}function bI(e){return rm(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function wI(e){var t=Pp(e);return Pp(Pp(t.localStore).persistence).Si()}function xI(e,t,n,r){return _I.apply(this,arguments)}function _I(){return _I=ge(ye().mark((function e(t,n,r,i){var a,o,u,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Pp(t)).wc){e.next=3;break}return e.abrupt("return",void Cp("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.uc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Bw(a.localStore,mm(o[0]));case 10:return u=e.sent,s=mg.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,jv.EMPTY_BYTE_STRING),e.next=14,aI(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Fw(a.localStore,n,!0);case 17:return eI(a,n,i),e.abrupt("break",20);case 19:Op();case 20:case"end":return e.stop()}}),e)}))),_I.apply(this,arguments)}function II(e,t,n){return EI.apply(this,arguments)}function EI(){return EI=ge(ye().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=SI(t)).wc){e.next=45;break}a=Be(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.uc.has(u)){e.next=10;break}return Cp("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Vw(i.localStore,u);case 12:return s=e.sent,e.next=15,Mw(i.localStore,s);case 15:return c=e.sent,e.next=18,L_(i,bI(s),c.targetId,!1,c.resumeToken);case 18:Ex(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Be(r),e.prev=30,h=ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.uc.has(t),!e.t0){e.next=5;break}return e.next=5,Fw(i.localStore,t,!1).then((function(){Sx(i.remoteStore,t),eI(i,t)})).catch(vv);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),EI.apply(this,arguments)}function SI(e){var t=Pp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=B_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=K_.bind(null,t),t.rc.Ho=k_.bind(null,t.eventManager),t.rc.gc=b_.bind(null,t.eventManager),t}function TI(e){var t=Pp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=W_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Q_.bind(null,t),t}function CI(e,t,n){var r=Pp(e);(function(){var e=ge(ye().mark((function e(t,n,r){var i,a,o,u,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Pp(e),r=Rg(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.$s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(S_(i)),a=new E_(i,t.localStore,n.Tt),e.next=15,n.yc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Bu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.yc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,aI(t,s.Uu,void 0);case 31:return e.next=33,function(e,t){var n=Pp(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.$s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.qu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Np("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var AI=function(){function e(){Ue(this,e),this.synchronizeTabs=!1}return Ve(e,[{key:"initialize",value:function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Tt=dx(t.databaseInfo.databaseId),this.sharedClientState=this.Ic(t),this.persistence=this.Tc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ec(t),this.gcScheduler=this.Ac(t,this.localStore),this.indexBackfillerScheduler=this.Rc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ac",value:function(e,t){return null}},{key:"Rc",value:function(e,t){return null}},{key:"Ec",value:function(e){return Cw(this.persistence,new Sw,e.initialUser,this.Tt)}},{key:"Tc",value:function(e){return new vw(mw.qs,this.Tt)}},{key:"Ic",value:function(e){return new nx}},{key:"terminate",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),NI=function(e){ze(n,e);var t=We(n);function n(e,r,i){var a;return Ue(this,n),(a=t.call(this)).Pc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ve(n,[{key:"initialize",value:function(){var e=ge(ye().mark((function e(t){var r=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(Ke(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Pc.initialize(this,t);case 4:return e.next=6,TI(this.Pc.syncEngine);case 6:return e.next=8,qx(this.Pc.remoteStore);case 8:return e.next=10,this.persistence.di((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ec",value:function(e){return Cw(this.persistence,new Sw,e.initialUser,this.Tt)}},{key:"Ac",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Wb(n,e.asyncQueue,t)}},{key:"Rc",value:function(e,t){var n=new Cv(t,this.persistence);return new Tv(e.asyncQueue,n)}},{key:"Tc",value:function(e){var t=Iw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Db.withCacheSize(this.cacheSizeBytes):Db.DEFAULT;return new ww(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,fx(),hx(),this.Tt,this.sharedClientState,!!this.forceOwnership)}},{key:"Ic",value:function(e){return new nx}}]),n}(AI),DI=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this,e,r,!1)).Pc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ve(n,[{key:"initialize",value:function(){var e=ge(ye().mark((function e(t){var r,i=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(Ke(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Pc.syncEngine,e.t0=this.sharedClientState instanceof tx,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Br:pI.bind(null,r),Lr:xI.bind(null,r),qr:II.bind(null,r),Si:wI.bind(null,r),Fr:hI.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.di(function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yI(i.Pc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){var t=fx();if(!tx.C(t))throw new Mp(Lp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Iw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tx(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(NI),OI=function(){function e(){Ue(this,e)}return Ve(e,[{key:"initialize",value:function(){var e=ge(ye().mark((function e(t,n){var r=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return z_(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=uI.bind(null,this.syncEngine),e.next=12,i_(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new p_}},{key:"createDatastore",value:function(e){var t,n=dx(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new lx(t));return function(e,t,n,r){return new gx(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return z_(o.syncEngine,e,0)},a=ix.C()?new ix:new rx,new bx(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new O_(e,t,n,r,i,a);return o&&(u.wc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pp(t),Cp("RemoteStore","RemoteStore shutting down."),n.mu.add(5),e.next=5,_x(n);case 5:n.yu.shutdown(),n.pu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function RI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ge(ye().mark((function r(){var i;return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var PI=function(){function e(t){Ue(this,e),this.observer=t,this.muted=!1}return Ve(e,[{key:"next",value:function(e){this.observer.next&&this.vc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.vc(this.observer.error,e):Ap("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"vc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),LI=function(){function e(t,n){var r=this;Ue(this,e),this.Vc=t,this.Tt=n,this.metadata=new Fp,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.Mu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Mu))))}),(function(e){return r.metadata.reject(e)}))}return Ve(e,[{key:"close",value:function(){return this.Vc.cancel()}},{key:"getMetadata",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yc",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Dc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Dc",value:function(){var e=ge(ye().mark((function e(){var t,n,r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Sc.decode(t),r=Number(n),isNaN(r)&&this.xc("length string (".concat(n,") is not valid number")),e.next=9,this.Nc(r);case 9:return i=e.sent,e.abrupt("return",new __(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"kc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Cc",value:function(){var e=ge(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.kc()<0)){e.next=7;break}return e.next=3,this.$c();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.kc())<0&&this.xc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.$c();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.xc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Sc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xc",value:function(e){throw this.Vc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"$c",value:function(){var e=ge(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Vc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),MI=function(){function e(t){Ue(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ve(e,[{key:"lookup",value:function(){var e=ge(ye().mark((function e(t){var n,r=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Mp(Lp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ge(ye().mark((function e(t,n){var r,i,a,o,u,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pp(t),i=Vg(r.Tt)+"/documents",a={documents:n.map((function(e){return Mg(r.Tt,e)}))},e.next=5,r.mo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Kg(r.Tt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Rp(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Jm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ge(ye().mark((function e(){var t,n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=rv.fromPath(t);n.mutations.push(new Zm(r,n.precondition(r)))})),e.next=7,function(){var e=ge(ye().mark((function e(t,n){var r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pp(t),i=Vg(r.Tt)+"/documents",a={writes:n.map((function(e){return Gg(r.Tt,e)}))},e.next=3,r.lo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Op();t=Jp.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Mp(Lp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Jp.min())?Fm.exists(!1):Fm.updateTime(t):Fm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Jp.min()))throw new Mp(Lp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fm.updateTime(t)}return Fm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),FI=function(){function e(t,n,r,i,a){Ue(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Mc=r.maxAttempts,this.ko=new px(this.asyncQueue,"transaction_retry")}return Ve(e,[{key:"run",value:function(){this.Mc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.ko.vo(ge(ye().mark((function t(){var n,r;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new MI(e.datastore),(r=e.Fc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Bc(t)}))}))})).catch((function(t){e.Bc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Fc",value:function(e){try{var t=this.updateFunction(e);return!Lv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Bc",value:function(e){var t=this;this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Lc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!tg(t)}return!1}}]),e}(),UI=function(){function e(t,n,r,i){var a=this;Ue(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ip.UNAUTHENTICATED,this.clientId=Hp.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cp("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Cp("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Ve(e,[{key:"getConfiguration",value:function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Mp(Lp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Fp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ge(ye().mark((function n(){var r;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=c_(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function jI(e,t){return VI.apply(this,arguments)}function VI(){return VI=ge(ye().mark((function e(t,n){var r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Cp("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Aw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),VI.apply(this,arguments)}function BI(e,t){return qI.apply(this,arguments)}function qI(){return qI=ge(ye().mark((function e(t,n){var r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,zI(t);case 3:return r=e.sent,Cp("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return n_(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return n_(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),qI.apply(this,arguments)}function zI(e){return KI.apply(this,arguments)}function KI(){return KI=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Cp("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,jI(t,new AI);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),KI.apply(this,arguments)}function GI(e){return WI.apply(this,arguments)}function WI(){return WI=ge(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Cp("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,BI(t,new OI);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),WI.apply(this,arguments)}function HI(e){return zI(e).then((function(e){return e.persistence}))}function QI(e){return zI(e).then((function(e){return e.localStore}))}function $I(e){return GI(e).then((function(e){return e.remoteStore}))}function YI(e){return GI(e).then((function(e){return e.syncEngine}))}function XI(e){return GI(e).then((function(e){return e.datastore}))}function JI(e){return ZI.apply(this,arguments)}function ZI(){return ZI=ge(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GI(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=R_.bind(null,n.syncEngine),r.onUnlisten=F_.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),ZI.apply(this,arguments)}function eE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Fp;return e.asyncQueue.enqueueAndForget(ge(ye().mark((function i(){return ye().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new PI({next:function(a){t.enqueueAndForget((function(){return m_(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Mp(Lp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Mp(Lp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new x_(im(n.path),a,{includeMetadataChanges:!0,$u:!0});return v_(e,o)},i.next=3,JI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function tE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Fp;return e.asyncQueue.enqueueAndForget(ge(ye().mark((function i(){return ye().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new PI({next:function(n){t.enqueueAndForget((function(){return m_(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Mp(Lp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new x_(n,a,{includeMetadataChanges:!0,$u:!0});return v_(e,o)},i.next=3,JI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var nE=new Map;function rE(e,t,n){if(!n)throw new Mp(Lp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function iE(e,t,n,r){if(!0===t&&!0===r)throw new Mp(Lp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function aE(e){if(!rv.isDocumentKey(e))throw new Mp(Lp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function oE(e){if(rv.isDocumentKey(e))throw new Mp(Lp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function uE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Op()}function sE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Mp(Lp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=uE(e);throw new Mp(Lp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function cE(e,t){if(t<=0)throw new Mp(Lp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var lE=function(){function e(t){var n;if(Ue(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Mp(Lp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Mp(Lp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,iE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Ve(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),fE=function(){function e(t,n,r,i){Ue(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lE({}),this._settingsFrozen=!1}return Ve(e,[{key:"app",get:function(){if(!this._app)throw new Mp(Lp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Mp(Lp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new jp;switch(e.type){case"gapi":var t=e.client;return new zp(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Mp(Lp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=nE.get(e);t&&(Cp("ComponentProvider","Removing Datastore"),nE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function hE(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=sE(e,fE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Np("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Ip.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Je(JSON.stringify({alg:"none",type:"JWT"})),Je(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Mp(Lp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ip(s)}e._authCredentials=new Vp(new Up(o,u))}}var dE=function(){function e(t,n,r){Ue(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ve(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new vE(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),pE=function(){function e(t,n,r){Ue(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ve(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),vE=function(e){ze(n,e);var t=We(n);function n(e,r,i){var a;return Ue(this,n),(a=t.call(this,e,r,im(i)))._path=i,a.type="collection",a}return Ve(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new dE(this.firestore,null,new rv(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(pE);function yE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Et(e),rE("collection","path",t),e instanceof fE){var a=ev.fromString.apply(ev,[t].concat(r));return oE(a),new vE(e,null,a)}if(!(e instanceof dE||e instanceof vE))throw new Mp(Lp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ev.fromString.apply(ev,[t].concat(r)));return oE(o),new vE(e.firestore,null,o)}function mE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Et(e),1===arguments.length&&(t=Hp.R()),rE("doc","path",t),e instanceof fE){var a=ev.fromString.apply(ev,[t].concat(r));return aE(a),new dE(e,null,new rv(a))}if(!(e instanceof dE||e instanceof vE))throw new Mp(Lp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ev.fromString.apply(ev,[t].concat(r)));return aE(o),new dE(e.firestore,e instanceof vE?e.converter:null,new rv(o))}function gE(e,t){return e=Et(e),t=Et(t),(e instanceof dE||e instanceof vE)&&(t instanceof dE||t instanceof vE)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function kE(e,t){return e=Et(e),t=Et(t),e instanceof pE&&t instanceof pE&&e.firestore===t.firestore&&dm(e._query,t._query)&&e.converter===t.converter}var bE=function(){function e(){var t=this;Ue(this,e),this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new px(this,"async_queue_retry"),this.Hc=function(){var e=hx();e&&Cp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ko.Vo()};var n=hx();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Hc)}return Ve(e,[{key:"isShuttingDown",get:function(){return this.Kc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Jc(),this.Yc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;var t=hx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Jc(),this.Kc)return new Promise((function(){}));var n=new Fp;return this.Yc((function(){return t.Kc&&t.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Uc.push(e),t.Zc()}))}},{key:"Zc",value:function(){var e=ge(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Uc.length){e.next=14;break}return e.prev=1,e.next=4,this.Uc[0]();case 4:this.Uc.shift(),this.ko.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),xv(e.t0)){e.next=12;break}throw e.t0;case 12:Cp("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Uc.length>0&&this.ko.vo((function(){return t.Zc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Yc",value:function(e){var t=this,n=this.qc.then((function(){return t.jc=!0,e().catch((function(e){t.Qc=e,t.jc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ap("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.jc=!1,e}))}));return this.qc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);var i=s_.createAndSchedule(this,e,t,n,(function(e){return r.Xc(e)}));return this.Gc.push(i),i}},{key:"Jc",value:function(){this.Qc&&Op()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ta",value:function(){var e=ge(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.qc,e.next=3,t;case 3:if(t!==this.qc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ea",value:function(e){var t,n=Be(this.Gc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"na",value:function(e){var t=this;return this.ta().then((function(){t.Gc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Be(t.Gc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ta()}))}},{key:"sa",value:function(e){this.Wc.push(e)}},{key:"Xc",value:function(e){var t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}]),e}();function wE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Be(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var xE=function(){function e(){Ue(this,e),this._progressObserver={},this._taskCompletionResolver=new Fp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ve(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),_E=function(e){ze(n,e);var t=We(n);function n(e,r,i,a){var o;return Ue(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new bE,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return Ve(n,[{key:"_terminate",value:function(){return this._firestoreClient||EE(this),this._firestoreClient.terminate()}}]),n}(fE);function IE(e){return e._firestoreClient||EE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function EE(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Nv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new UI(e._authCredentials,e._appCheckCredentials,e._queue,r)}function SE(e,t,n){var r=new Fp;return e.asyncQueue.enqueue(ge(ye().mark((function i(){var a;return ye().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,jI(e,n);case 3:return i.next=5,BI(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Lp.FAILED_PRECONDITION||e.code===Lp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:Np("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function TE(e){return function(e){return e.asyncQueue.enqueue(ge(ye().mark((function t(){var n,r;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,HI(e);case 2:return n=t.sent,t.next=5,$I(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Pp(e);return t.mu.delete(0),wx(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(IE(e=sE(e,_E)))}function CE(e){return function(e){return e.asyncQueue.enqueue(ge(ye().mark((function t(){var n,r;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,HI(e);case 2:return n=t.sent,t.next=5,$I(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Pp(t)).mu.add(0),e.next=4,_x(n);case 4:n.pu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(IE(e=sE(e,_E)))}function AE(e,t){var n=IE(e=sE(e,_E)),r=new xE;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new LI(e,t)}(function(e,t){if(e instanceof Uint8Array)return RI(e,t);if(e instanceof ArrayBuffer)return RI(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,dx(t));e.asyncQueue.enqueueAndForget(ge(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=CI,t.next=3,YI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function NE(e,t){return function(e,t){return e.asyncQueue.enqueue(ge(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Pp(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.$s.getNamedQuery(e,t)}))},n.next=3,QI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(IE(e=sE(e,_E)),t).then((function(t){return t?new pE(e,null,t.query):null}))}function DE(e){if(e._initialized||e._terminated)throw new Mp(Lp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var OE=function(){function e(t){Ue(this,e),this._byteString=t}return Ve(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(jv.fromBase64String(t))}catch(t){throw new Mp(Lp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(jv.fromUint8Array(t))}}]),e}(),RE=function(){function e(){Ue(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Mp(Lp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nv(n)}return Ve(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var PE=Ve((function e(t){Ue(this,e),this._methodName=t})),LE=function(){function e(t,n){if(Ue(this,e),!isFinite(t)||t<-90||t>90)throw new Mp(Lp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Mp(Lp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ve(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Qp(this._lat,e._lat)||Qp(this._long,e._long)}}]),e}(),ME=/^__.*__$/,FE=function(){function e(t,n,r){Ue(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ve(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Wm(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gm(e,this.data,t,this.fieldTransforms)}}]),e}(),UE=function(){function e(t,n,r){Ue(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ve(e,[{key:"toMutation",value:function(e,t){return new Wm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function jE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Op()}}var VE=function(){function e(t,n,r,i,a,o){Ue(this,e),this.settings=t,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ve(e,[{key:"path",get:function(){return this.settings.path}},{key:"ra",get:function(){return this.settings.ra}},{key:"oa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ua",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.aa(e),r}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.ia(),r}},{key:"la",value:function(e){return this.oa({path:void 0,ca:!0})}},{key:"fa",value:function(e){return oS(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ia",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.aa(this.path.get(e))}},{key:"aa",value:function(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(jE(this.ra)&&ME.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}]),e}(),BE=function(){function e(t,n,r){Ue(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.Tt=r||dx(t)}return Ve(e,[{key:"wa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new VE({ra:e,methodName:t,_a:n,path:nv.emptyPath(),ca:!1,da:r},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}]),e}();function qE(e){var t=e._freezeSettings(),n=dx(e._databaseId);return new BE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function zE(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.wa(a.merge||a.mergeFields?2:0,t,n,i);nS("Data must be an object, but it was:",o,r);var u,s,c=eS(r,o);if(a.merge)u=new Ky(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Be(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=rS(t,l.value,n);if(!o.contains(d))throw new Mp(Lp.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));uS(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Ky(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new FE(new Gy(c),u,s)}var KE=function(e){ze(n,e);var t=We(n);function n(){return Ue(this,n),t.apply(this,arguments)}return Ve(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ra)throw 1===e.ra?e.fa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.fa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(PE);function GE(e,t,n){return new VE({ra:3,_a:t.settings._a,methodName:e._methodName,ca:n},t.databaseId,t.Tt,t.ignoreUndefinedProperties)}var WE=function(e){ze(n,e);var t=We(n);function n(){return Ue(this,n),t.apply(this,arguments)}return Ve(n,[{key:"_toFieldTransform",value:function(e){return new Lm(e.path,new Tm)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(PE),HE=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this,e)).ma=r,i}return Ve(n,[{key:"_toFieldTransform",value:function(e){var t=GE(this,e,!0),n=this.ma.map((function(e){return ZE(e,t)})),r=new Cm(n);return new Lm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(PE),QE=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this,e)).ma=r,i}return Ve(n,[{key:"_toFieldTransform",value:function(e){var t=GE(this,e,!0),n=this.ma.map((function(e){return ZE(e,t)})),r=new Nm(n);return new Lm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(PE),$E=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this,e)).ga=r,i}return Ve(n,[{key:"_toFieldTransform",value:function(e){var t=new Om(e.Tt,xm(e.Tt,this.ga));return new Lm(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(PE);function YE(e,t,n,r){var i=e.wa(1,t,n);nS("Data must be an object, but it was:",i,r);var a=[],o=Gy.empty();Rv(r,(function(e,r){var u=aS(t,e,n);r=Et(r);var s=i.ha(u);if(r instanceof KE)a.push(u);else{var c=ZE(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Ky(a);return new UE(o,u,i.fieldTransforms)}function XE(e,t,n,r,i,a){var o=e.wa(1,t,n),u=[rS(t,r,n)],s=[i];if(a.length%2!=0)throw new Mp(Lp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(rS(t,a[c])),s.push(a[c+1]);for(var l=[],f=Gy.empty(),h=u.length-1;h>=0;--h)if(!uS(l,u[h])){var d=u[h],p=s[h];p=Et(p);var v=o.ha(d);if(p instanceof KE)l.push(d);else{var y=ZE(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Ky(l);return new UE(f,m,o.fieldTransforms)}function JE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ZE(n,e.wa(r?4:3,t))}function ZE(e,t){if(tS(e=Et(e)))return nS("Unsupported field value:",t,e),eS(e,t);if(e instanceof PE)return function(e,t){if(!jE(t.ra))throw t.fa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.fa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ca&&4!==t.ra)throw t.fa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Be(e);try{for(a.s();!(n=a.n()).done;){var o=ZE(n.value,t.la(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Et(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xm(t.Tt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Xp.fromDate(e);return{timestampValue:Ng(t.Tt,n)}}if(e instanceof Xp){var r=new Xp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ng(t.Tt,r)}}if(e instanceof LE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof OE)return{bytesValue:Dg(t.Tt,e._byteString)};if(e instanceof dE){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.fa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Pg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.fa("Unsupported field value: ".concat(uE(e)))}(e,t)}function eS(e,t){var n={};return Pv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rv(e,(function(e,r){var i=ZE(r,t.ua(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function tS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Xp||e instanceof LE||e instanceof OE||e instanceof dE||e instanceof PE)}function nS(e,t,n){if(!tS(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=uE(n);throw"an object"===r?t.fa(e+" a custom object"):t.fa(e+" "+r)}}function rS(e,t,n){if((t=Et(t))instanceof RE)return t._internalPath;if("string"==typeof t)return aS(e,t);throw oS("Field path arguments must be of type string or ",e,!1,void 0,n)}var iS=new RegExp("[~\\*/\\[\\]]");function aS(e,t,n){if(t.search(iS)>=0)throw oS("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return He(RE,Tt(t.split(".")))._internalPath}catch(r){throw oS("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function oS(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Mp(Lp.INVALID_ARGUMENT,u+e+s)}function uS(e,t){return e.some((function(e){return e.isEqual(t)}))}var sS=function(){function e(t,n,r,i,a){Ue(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ve(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new dE(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new cS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(lS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),cS=function(e){ze(n,e);var t=We(n);function n(){return Ue(this,n),t.apply(this,arguments)}return Ve(n,[{key:"data",value:function(){return ur(Ke(n.prototype),"data",this).call(this)}}]),n}(sS);function lS(e,t){return"string"==typeof t?aS(e,t):t instanceof RE?t._internalPath:t._delegate._internalPath}function fS(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Mp(Lp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hS=Ve((function e(){Ue(this,e)})),dS=function(e){ze(n,e);var t=We(n);function n(){return Ue(this,n),t.apply(this,arguments)}return Ve(n)}(hS);function pS(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof hS&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof yS})).length,n=e.filter((function(e){return e instanceof vS})).length;if(t>1||t>0&&n>0)throw new Mp(Lp.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=Be(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var vS=function(e){ze(n,e);var t=We(n);function n(e,r,i){var a;return Ue(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return Ve(n,[{key:"_apply",value:function(e){var t=this._parse(e);return CS(e._query,t),new pE(e.firestore,e.converter,fm(e._query,t))}},{key:"_parse",value:function(e){var t=qE(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Mp(Lp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){TS(o,a);var s,c=[],l=Be(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(SS(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=SS(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||TS(o,a),u=JE(n,"where",o,"in"===a||"not-in"===a);return gy.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dS);var yS=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return Ve(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:ky.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=Be(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;CS(r,a),r=fm(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new pE(e.firestore,e.converter,fm(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(hS);var mS=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return Ve(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Mp(Lp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Mp(Lp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new My(t,n);return function(e,t){if(null===om(e)){var n=um(e);null!==n&&AS(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new pE(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new nm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(dS);var gS=function(e){ze(n,e);var t=We(n);function n(e,r,i){var a;return Ue(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return Ve(n,[{key:"_apply",value:function(e){return new pE(e.firestore,e.converter,hm(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dS);var kS=function(e){ze(n,e);var t=We(n);function n(e,r,i){var a;return Ue(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Ve(n,[{key:"_apply",value:function(e){var t=ES(e,this.type,this._docOrFields,this._inclusive);return new pE(e.firestore,e.converter,function(e,t){return new nm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dS);function bS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kS._create("startAt",t,!0)}function wS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kS._create("startAfter",t,!1)}var xS=function(e){ze(n,e);var t=We(n);function n(e,r,i){var a;return Ue(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Ve(n,[{key:"_apply",value:function(e){var t=ES(e,this.type,this._docOrFields,this._inclusive);return new pE(e.firestore,e.converter,function(e,t){return new nm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(dS);function _S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xS._create("endBefore",t,!1)}function IS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xS._create("endAt",t,!0)}function ES(e,t,n,r){if(n[0]=Et(n[0]),n[0]instanceof sS)return function(e,t,n,r,i){if(!r)throw new Mp(Lp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Be(cm(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(ny(t,r.key));else{var c=r.data.field(s.field);if(Kv(c))throw new Mp(Lp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Mp(Lp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new py(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=qE(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Mp(Lp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Mp(Lp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!sm(e)&&-1!==c.indexOf("/"))throw new Mp(Lp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(ev.fromString(c));if(!rv.isDocumentKey(l))throw new Mp(Lp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new rv(l);u.push(ny(t,f))}else{var h=JE(n,r,c);u.push(h)}}return new py(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function SS(e,t,n){if("string"==typeof(n=Et(n))){if(""===n)throw new Mp(Lp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sm(t)&&-1!==n.indexOf("/"))throw new Mp(Lp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ev.fromString(n));if(!rv.isDocumentKey(r))throw new Mp(Lp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ny(e,new rv(r))}if(n instanceof dE)return ny(e,n._key);throw new Mp(Lp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(uE(n),"."))}function TS(e,t){if(!Array.isArray(e)||0===e.length)throw new Mp(Lp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function CS(e,t){if(t.isInequality()){var n=um(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Mp(Lp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=om(e);null!==i&&AS(e,r,i)}var a=function(e,t){var n,r=Be(e);try{for(r.s();!(n=r.n()).done;){var i,a=Be(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Mp(Lp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Mp(Lp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function AS(e,t,n){if(!n.isEqual(t))throw new Mp(Lp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var NS=function(){function e(){Ue(this,e)}return Ve(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch($v(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Op()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Rv(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new LE(qv(e.latitude),qv(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Gv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Wv(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Bv(e);return new Xp(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ev.fromString(e);Rp(ik(n));var r=new Dv(n.get(1),n.get(3)),i=new rv(n.popFirst(5));return r.isEqual(t)||Ap("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function DS(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var OS=function(e){ze(n,e);var t=We(n);function n(e){var r;return Ue(this,n),(r=t.call(this)).firestore=e,r}return Ve(n,[{key:"convertBytes",value:function(e){return new OE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new dE(this.firestore,null,t)}}]),n}(NS);var RS=function(){function e(t,n){Ue(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ve(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),PS=function(e){ze(n,e);var t=We(n);function n(e,r,i,a,o,u){var s;return Ue(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ve(n,[{key:"exists",value:function(){return ur(Ke(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new LS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(lS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(sS),LS=function(e){ze(n,e);var t=We(n);function n(){return Ue(this,n),t.apply(this,arguments)}return Ve(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ur(Ke(n.prototype),"data",this).call(this,e)}}]),n}(PS),MS=function(){function e(t,n,r,i){Ue(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new RS(i.hasPendingWrites,i.fromCache),this.query=r}return Ve(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new LS(n._firestore,n._userDataWriter,r.key,r,new RS(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Mp(Lp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new LS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new RS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new LS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new RS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:FS(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function FS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Op()}}function US(e,t){return e instanceof PS&&t instanceof PS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof MS&&t instanceof MS&&e._firestore===t._firestore&&kE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function jS(e){e=sE(e,dE);var t=sE(e.firestore,_E);return eE(IE(t),e._key).then((function(n){return QS(t,e,n)}))}var VS=function(e){ze(n,e);var t=We(n);function n(e){var r;return Ue(this,n),(r=t.call(this)).firestore=e,r}return Ve(n,[{key:"convertBytes",value:function(e){return new OE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new dE(this.firestore,null,t)}}]),n}(NS);function BS(e){e=sE(e,dE);var t=sE(e.firestore,_E),n=IE(t),r=new VS(t);return function(e,t){var n=new Fp;return e.asyncQueue.enqueueAndForget(ge(ye().mark((function r(){return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ge(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Pp(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Mp(Lp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=c_(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,QI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new PS(t,r,e._key,n,new RS(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function qS(e){e=sE(e,pE);var t=sE(e.firestore,_E),n=IE(t),r=new VS(t);return function(e,t){var n=new Fp;return e.asyncQueue.enqueueAndForget(ge(ye().mark((function r(){return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ge(ye().mark((function e(t,n,r){var i,a,o,u,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jw(t,n,!0);case 3:i=e.sent,a=new A_(n,i.Yi),o=a.Hu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=c_(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,QI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new MS(t,r,e,n)}))}function zS(e,t,n){e=sE(e,dE);var r=sE(e.firestore,_E),i=DS(e.converter,t,n);return HS(r,[zE(qE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Fm.none())])}function KS(e,t,n){e=sE(e,dE);for(var r=sE(e.firestore,_E),i=qE(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return HS(r,[("string"==typeof(t=Et(t))||t instanceof RE?XE(i,"updateDoc",e._key,t,n,o):YE(i,"updateDoc",e._key,t)).toMutation(e._key,Fm.exists(!0))])}function GS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Et(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||wE(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(wE(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof dE)l=sE(e.firestore,_E),f=im(e._key.path),c={next:function(t){n[s]&&n[s](QS(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=sE(e,pE);l=sE(p.firestore,_E),f=p._query;var v=new VS(l);c={next:function(e){n[s]&&n[s](new MS(l,v,p,e))},error:n[s+1],complete:n[s+2]},fS(e._query)}return function(e,t,n,r){var i=new PI(r),a=new x_(t,i,n);return e.asyncQueue.enqueueAndForget(ge(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=v_,t.next=3,JI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(ge(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=m_,t.next=3,JI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(IE(l),f,h,c)}function WS(e,t){return function(e,t){var n=new PI(t);return e.asyncQueue.enqueueAndForget(ge(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Pp(e).vu.add(t),t.next()},t.next=3,JI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(ge(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Pp(e).vu.delete(t)},t.next=3,JI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(IE(e=sE(e,_E)),wE(t)?t:{next:t})}function HS(e,t){return function(e,t){var n=new Fp;return e.asyncQueue.enqueueAndForget(ge(ye().mark((function r(){return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=j_,r.next=3,YI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(IE(e),t)}function QS(e,t,n){var r=n.docs.get(t._key),i=new VS(e);return new PS(e,i,t._key,r,new RS(n.hasPendingWrites,n.fromCache),t.converter)}var $S={maxAttempts:5},YS=function(){function e(t,n){Ue(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=qE(t)}return Ve(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=XS(e,this._firestore),i=DS(r.converter,t,n),a=zE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Fm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=XS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Et(t))||t instanceof RE?XE(this._dataReader,"WriteBatch.update",i._key,t,n,o):YE(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Fm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=XS(e,this._firestore);return this._mutations=this._mutations.concat(new Jm(t._key,Fm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Mp(Lp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function XS(e,t){if((e=Et(e)).firestore!==t)throw new Mp(Lp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var JS=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ve(n,[{key:"get",value:function(e){var t=this,r=XS(e,this._firestore),i=new VS(this._firestore);return ur(Ke(n.prototype),"get",this).call(this,e).then((function(e){return new PS(t._firestore,i,r._key,e._document,new RS(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Ue(this,e),this._firestore=t,this._transaction=n,this._dataReader=qE(t)}return Ve(e,[{key:"get",value:function(e){var t=this,n=XS(e,this._firestore),r=new OS(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Op();var i=e[0];if(i.isFoundDocument())return new sS(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new sS(t._firestore,r,n._key,null,n.converter);throw Op()}))}},{key:"set",value:function(e,t,n){var r=XS(e,this._firestore),i=DS(r.converter,t,n),a=zE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=XS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Et(t))||t instanceof RE?XE(this._dataReader,"Transaction.update",i._key,t,n,o):YE(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=XS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function ZS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new HE("arrayUnion",t)}function eT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new QE("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ep=e}(En),gn(new Ct("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new _E(new Bp(e.getProvider("auth-internal")),new Gp(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Mp(Lp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dv(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Dn(_p,"3.9.0",e),Dn(_p,"3.9.0","esm2017")}();var tT="@firebase/firestore-compat",nT="0.3.5";function rT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Mp("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function iT(){if("undefined"===typeof Uint8Array)throw new Mp("unimplemented","Uint8Arrays are not available in this environment.")}function aT(){if("undefined"==typeof atob)throw new Mp("unimplemented","Blobs are unavailable in Firestore in this environment.")}var oT=function(){function e(t){Ue(this,e),this._delegate=t}return Ve(e,[{key:"toBase64",value:function(){return aT(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return iT(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return aT(),new e(OE.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return iT(),new e(OE.fromUint8Array(t))}}]),e}();function uT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Be(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var sT=function(){function e(){Ue(this,e)}return Ve(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){DE(e=sE(e,_E));var n=IE(e),r=e._freezeSettings(),i=new OI;return SE(n,i,new NI(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){DE(e=sE(e,_E));var t=IE(e),n=e._freezeSettings(),r=new OI;return SE(t,r,new DI(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Mp(Lp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Fp;return e._queue.enqueueAndForgetEvenWhileRestricted(ge(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kv.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,kv.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Iw(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),cT=function(){function e(t,n,r){var i=this;Ue(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Dv||(this._appCompat=t)}return Ve(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Np("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};hE(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return TE(this._delegate)}},{key:"disableNetwork",value:function(){return CE(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&iE("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Fp;return e.asyncQueue.enqueueAndForget(ge(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Y_,n.next=3,YI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(IE(e=sE(e,_E)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return WS(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Mp("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new _T(this,yE(this._delegate,e))}catch(t){throw vT(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new pT(this,mE(this._delegate,e))}catch(t){throw vT(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new bT(this,function(e,t){if(e=sE(e,fE),rE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Mp(Lp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new pE(e,null,function(e){return new nm(ev.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw vT(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=sE(e,_E);var r=Object.assign(Object.assign({},$S),n);return function(e){if(e.maxAttempts<1)throw new Mp(Lp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Fp;return e.asyncQueue.enqueueAndForget(ge(ye().mark((function i(){var a;return ye().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,XI(e);case 2:a=i.sent,new FI(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(IE(e),(function(n){return t(new JS(e,n))}),r)}(this._delegate,(function(n){return e(new fT(t,n))}))}},{key:"batch",value:function(){var e=this;return IE(this._delegate),new hT(new YS(this._delegate,(function(t){return HS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return AE(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return NE(this._delegate,e).then((function(e){return e?new bT(t,e):null}))}}]),e}(),lT=function(e){ze(n,e);var t=We(n);function n(e){var r;return Ue(this,n),(r=t.call(this)).firestore=e,r}return Ve(n,[{key:"convertBytes",value:function(e){return new oT(new OE(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return pT.forKey(t,this.firestore,null)}}]),n}(NS);var fT=function(){function e(t,n){Ue(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new lT(t)}return Ve(e,[{key:"get",value:function(e){var t=this,n=IT(e);return this._delegate.get(n).then((function(e){return new gT(t._firestore,new PS(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=IT(e);return n?(rT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=IT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=IT(e);return this._delegate.delete(t),this}}]),e}(),hT=function(){function e(t){Ue(this,e),this._delegate=t}return Ve(e,[{key:"set",value:function(e,t,n){var r=IT(e);return n?(rT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=IT(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=IT(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),dT=function(){function e(t,n,r){Ue(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ve(e,[{key:"fromFirestore",value:function(e,t){var n=new LS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kT(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new lT(t),n),i.set(n,a)),a}}]),e}();dT.INSTANCES=new WeakMap;var pT=function(){function e(t,n){Ue(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new lT(t)}return Ve(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new _T(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new _T(this.firestore,yE(this._delegate,e))}catch(t){throw vT(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Et(e))instanceof dE&&gE(this._delegate,e)}},{key:"set",value:function(e,t){t=rT("DocumentReference.set",t);try{return t?zS(this._delegate,e,t):zS(this._delegate,e)}catch(n){throw vT(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?KS(this._delegate,e):KS.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw vT(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return HS(sE(e.firestore,_E),[new Jm(e._key,Fm.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=yT(n),a=mT(n,(function(t){return new gT(e.firestore,new PS(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return GS(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?BS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=sE(e,dE);var t=sE(e.firestore,_E);return eE(IE(t),e._key,{source:"server"}).then((function(n){return QS(t,e,n)}))}(this._delegate):jS(this._delegate),t.then((function(e){return new gT(n.firestore,new PS(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(dT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Mp("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new dE(n._delegate,r,new rv(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new dE(n._delegate,r,t))}}]),e}();function vT(e,t,n){return e.message=e.message.replace(t,n),e}function yT(e){var t,n=Be(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!uT(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function mT(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=uT(e[0])?e[0]:uT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var gT=function(){function e(t,n){Ue(this,e),this._firestore=t,this._delegate=n}return Ve(e,[{key:"ref",get:function(){return new pT(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return US(this._delegate,e._delegate)}}]),e}(),kT=function(e){ze(n,e);var t=We(n);function n(){return Ue(this,n),t.apply(this,arguments)}return Ve(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Op()}(void 0!==t),t}}]),n}(gT),bT=function(){function e(t,n){Ue(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new lT(t)}return Ve(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,pS(this._delegate,function(e,t,n){var r=t,i=lS("where",e);return vS._create(i,r,n)}(t,n,r)))}catch(i){throw vT(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,pS(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=lS("orderBy",e);return mS._create(n,t)}(t,n)))}catch(r){throw vT(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,pS(this._delegate,function(e){return cE("limit",e),gS._create("limit",e,"F")}(t)))}catch(n){throw vT(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,pS(this._delegate,function(e){return cE("limitToLast",e),gS._create("limitToLast",e,"L")}(t)))}catch(n){throw vT(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,pS(this._delegate,bS.apply(void 0,arguments)))}catch(t){throw vT(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,pS(this._delegate,wS.apply(void 0,arguments)))}catch(t){throw vT(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,pS(this._delegate,_S.apply(void 0,arguments)))}catch(t){throw vT(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,pS(this._delegate,IS.apply(void 0,arguments)))}catch(t){throw vT(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return kE(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?qS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=sE(e,pE);var t=sE(e.firestore,_E),n=IE(t),r=new VS(t);return tE(n,e._query,{source:"server"}).then((function(n){return new MS(t,r,e,n)}))}(this._delegate):function(e){e=sE(e,pE);var t=sE(e.firestore,_E),n=IE(t),r=new VS(t);return fS(e._query),tE(n,e._query).then((function(n){return new MS(t,r,e,n)}))}(this._delegate),t.then((function(e){return new xT(n.firestore,new MS(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=yT(n),a=mT(n,(function(t){return new xT(e.firestore,new MS(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return GS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(dT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),wT=function(){function e(t,n){Ue(this,e),this._firestore=t,this._delegate=n}return Ve(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new kT(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),xT=function(){function e(t,n){Ue(this,e),this._firestore=t,this._delegate=n}return Ve(e,[{key:"query",get:function(){return new bT(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new kT(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new wT(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new kT(n._firestore,r))}))}},{key:"isEqual",value:function(e){return US(this._delegate,e._delegate)}}]),e}(),_T=function(e){ze(n,e);var t=We(n);function n(e,r){var i;return Ue(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ve(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new pT(this.firestore,e):null}},{key:"doc",value:function(e){try{return new pT(this.firestore,void 0===e?mE(this._delegate):mE(this._delegate,e))}catch(t){throw vT(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=sE(e.firestore,_E),r=mE(e),i=DS(e.converter,t);return HS(n,[zE(qE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Fm.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new pT(t.firestore,e)}))}},{key:"isEqual",value:function(e){return gE(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(dT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(bT);function IT(e){return sE(e,dE)}var ET=function(){function e(){Ue(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=He(RE,n)}return Ve(e,[{key:"isEqual",value:function(e){return(e=Et(e))instanceof RE&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(nv.keyField().canonicalString())}}]),e}(),ST=function(){function e(t){Ue(this,e),this._delegate=t}return Ve(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new WE("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new KE("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=ZS.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=eT.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new $E("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),TT={Firestore:cT,GeoPoint:LE,Timestamp:Xp,Blob:oT,Transaction:fT,WriteBatch:hT,DocumentReference:pT,DocumentSnapshot:gT,Query:bT,QueryDocumentSnapshot:kT,QuerySnapshot:xT,CollectionReference:_T,FieldPath:ET,FieldValue:ST,setLogLevel:function(e){!function(e){Sp.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ct("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},TT)))}(e,(function(e,t){return new cT(e,t,new sT)})),e.registerVersion(tT,nT)}(or);var CT=function(e,t){var n="string"==typeof e?e:t||"(default)",r=kn("object"==typeof e?e:Tn(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=it("firestore");i&&hE.apply(void 0,[r].concat(Tt(i)))}return r}(or.initializeApp({apiKey:"AIzaSyC4ovC2q_c5LvL4kpIxB_WWy_28bhhV6tw",authDomain:"yearsapp-262dd.firebaseapp.com",projectId:"yearsapp-262dd",storageBucket:"yearsapp-262dd.appspot.com",messagingSenderId:"384872258672",appId:"1:384872258672:web:4a48090fb0a6a1dca4e8b5",measurementId:"G-VJ52PCD2LB"})),AT=or.auth(),NT=function(e){var n,r;pe(e);var i=_e((0,t.useState)(!1),2),a=i[0],o=i[1],u=_e((0,t.useState)(!1),2),s=u[0],c=u[1],l=Le("(max-width: 765px)"),f=re(),h=function(){var e=(0,De.useMediaQuery)({query:"(prefers-color-scheme: dark)"},void 0),n=_e(Pe(),2),r=n[0],i=n[1],a=(0,t.useMemo)((function(){return void 0===r?!!e:r}),[r,e]);return(0,t.useEffect)((function(){a?document.body.classList.add("dark"):document.body.classList.remove("dark")}),[a]),{isDark:a,setIsDark:i}}(),d=h.isDark,p=h.setIsDark,v=function(){var e=ge(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AT.signOut();case 2:localStorage.removeItem("user"),f.push("/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){o(!!localStorage.getItem("user"))}),[localStorage.getItem("user")]),(0,Se.jsxs)("header",{className:"header",children:[(0,Se.jsx)(de,{className:"logo__link header__link",to:"/",children:"80years"}),(0,Se.jsxs)("div",{className:"header__actions",children:[(0,Se.jsx)(Te,{ariaLabel:"Dark mode toggle",checked:d,onChange:function(e){var t;return p(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.checked)}}),(0,Se.jsxs)("label",{"aria-label":"Collapse or expand the menu",className:"hamburger-button header__button",children:[(0,Se.jsx)("input",{"aria-haspopup":"true","aria-expanded":s,className:"hamburger-button__input",type:"checkbox",onChange:function(){c(!s)}}),(0,Se.jsx)("span",{"aria-hidden":"true",className:"hamburger-button__span"}),(0,Se.jsx)("span",{"aria-hidden":"true",className:"hamburger-button__span"}),(0,Se.jsx)("span",{"aria-hidden":"true",className:"hamburger-button__span"})]})]}),(0,Se.jsx)("div",{className:Ee()("navigation header__navigation",s&&l&&"navigation--opened"),children:(0,Se.jsxs)("div",{className:"navigation__container",children:[a?(0,Se.jsx)("div",{className:"logout-button navigation__item",children:(0,Se.jsx)(Ne,{label:"Log out",onClick:v,variant:"primary"})}):(0,Se.jsxs)("div",{className:"navigation__item",children:[(0,Se.jsx)(de,{className:"login-link header__link link",to:"/login",children:"Log in"}),(0,Se.jsx)(de,{className:"signup-link header__link",to:"/signup",children:"Sign up"})]}),(0,Se.jsx)("div",{className:"navigation__menu navigation__item",children:"/weeks_tracker"!==(null===f||void 0===f||null===(n=f.location)||void 0===n?void 0:n.pathname)&&"/my_account"!==(null===f||void 0===f||null===(r=f.location)||void 0===r?void 0:r.pathname)&&(0,Se.jsx)(de,{className:"header__link link",to:"/weeks_tracker",children:"Try weeks tracker"})})]})})]})},DT=function(e){var t=e.children,n=e.pageClassName,r=void 0===n?"":n;return(0,Se.jsxs)("div",{className:r,children:[(0,Se.jsx)(NT,{}),(0,Se.jsx)("main",{children:t})]})},OT=n.p+"static/media/alarmAnimatedImage.8441694d621e8ad71a56.gif",RT=n.p+"static/media/noImage.21ec918e342865674fda.jpeg",PT=n.p+"static/media/skeletonAnimatedImage.56e1fd18a46495f8b180.gif",LT=function(e){var n=e.label,r=e.type,i=void 0===r?"text":r,a=e.id,o=void 0===a?"":a,u=e.error,s=void 0!==u&&u,c=e.defaultValue,l=e.onChange,f=e.placeholder,h=void 0===f?"":f,d=e.name,p=_e((0,t.useState)(c),2),v=p[0],y=p[1];return(0,t.useEffect)((function(){y(c)}),[c]),(0,Se.jsxs)("label",{className:"text-input-container",children:[n,(0,Se.jsx)("input",Bt(Bt({name:d},o.length>0&&{id:o}),{},{className:Ee()("text-input-container__input",s?"text-input-container__input--error":""),type:i,placeholder:h,value:v,onChange:function(e){var t,n,r;y(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value),l&&l(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value,null===e||void 0===e||null===(r=e.target)||void 0===r?void 0:r.id)}}))]})},MT=function(e){var t=e.inputs,n=e.onSubmit,r=e.onReset,i=e.links,a=e.buttons,o=e.error,u=void 0===o?"":o,s=e.onChange,c=e.formRef,l=e.formClassNames,f=void 0===l?"":l,h=a||[{type:"submit",label:"Submit"}].concat(Tt("undefined"!==typeof r?[{type:"reset",label:"Reset"}]:[]));return(0,Se.jsxs)("form",{className:Ee()("form-container",f),onSubmit:n,onReset:r,ref:c,children:[t.map((function(e,t){return(0,Se.jsx)(LT,{label:null===e||void 0===e?void 0:e.label,type:null===e||void 0===e?void 0:e.type,error:null===e||void 0===e?void 0:e.isError,onChange:(null===e||void 0===e?void 0:e.onChange)||s,name:null===e||void 0===e?void 0:e.name,placeholder:null===e||void 0===e?void 0:e.placeholder,defaultValue:null===e||void 0===e?void 0:e.value,id:null===e||void 0===e?void 0:e.id},t)})),u.length>0&&(0,Se.jsx)("div",{className:"form-container__error-container error-container",children:(0,Se.jsx)("span",{className:"error-container__message",children:u})}),("undefined"!==typeof h||void 0!==typeof i)&&(0,Se.jsxs)("div",{className:"actions form-container__actions",children:["undefined"!==typeof h&&(0,Se.jsx)("div",{className:"actions__buttons",children:null===h||void 0===h?void 0:h.map((function(e,t){return(0,Se.jsx)(Ne,{label:null===e||void 0===e?void 0:e.label,type:null===e||void 0===e?void 0:e.type,variant:"primary",size:"responsive"},t)}))}),"undefined"!==typeof i&&(0,Se.jsx)("div",{className:"actions__links",children:null===i||void 0===i?void 0:i.map((function(e,t){return(0,Se.jsx)(de,{className:"link action__link",to:null===e||void 0===e?void 0:e.path,children:null===e||void 0===e?void 0:e.text},t)}))})]})]})},FT=function(e){var n=e.type,r=void 0===n?"login":n,i=re(),a=_e((0,t.useState)({login:"",password:""}),2),o=a[0],u=a[1],s=_e((0,t.useState)(""),2),c=s[0],l=s[1],f=_e((0,t.useState)(!1),2),h=f[0],d=f[1],p=function(e){e.preventDefault(),u({login:"",password:""})},v=function(){var e;if(o.login.length>0&&(null===(e=o.password)||void 0===e?void 0:e.length)>0&&0===(null===c||void 0===c?void 0:c.length))return l(""),o;l("Fields are required")},y=function(){var e=ge(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(n=v())){e.next=10;break}if("login"!==r){e.next=8;break}return e.next=6,AT.signInWithEmailAndPassword(n.login,n.password).then((function(e){localStorage.setItem("user",JSON.stringify(e.user)),p(t),i.push("/my_account")})).catch((function(e){l(e.message)}));case 6:e.next=10;break;case 8:return e.next=10,AT.createUserWithEmailAndPassword(n.login,n.password).then((function(){d(!0),p(t)})).catch((function(e){l(e.message)}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Se.jsx)(Se.Fragment,{children:"signup"===r&&h?(0,Se.jsxs)("div",{className:"success-message",children:["Congratulations! You are successfully signed up \ud83d\udc4f",(0,Se.jsx)("br",{}),"You can now  ",(0,Se.jsx)(de,{className:"success-message__link",to:"/login",children:"Login"})]}):(0,Se.jsx)(MT,{inputs:Object.entries(o).map((function(e){var t=_e(e,2),n=t[0];return{value:t[1],placeholder:n,id:n,isError:c.length>0,type:"password"===n?"password":"email"}})),onSubmit:y,onReset:p,onChange:function(e,t){l(""),u(Bt(Bt({},o),{},Fe({},t,e)))},error:c,links:"login"===r?[{path:"/signup",text:"If you have not an account yet, please sign up"}]:[]})})},UT=function(e){var n=e.defaultBirthDate,r=void 0===n?"":n,i=e.defaultTotalYears,a=void 0===i?80:i,o=e.onSubmit,u=e.formClassNames,s=void 0===u?"":u,c=_e((0,t.useState)(r),2),l=c[0],f=c[1],h=_e((0,t.useState)(a.toString()),2),d=h[0],p=h[1],v=_e((0,t.useState)(!1),2),y=v[0],m=v[1];(0,t.useEffect)((function(){f(r),p(a.toString())}),[r,a]);var g=(0,t.useRef)();return(0,Se.jsx)(Se.Fragment,{children:(0,Se.jsx)(MT,{formClassNames:s,inputs:[{value:l,placeholder:"DD/MM/YYYY",name:"birthDate",onChange:function(){m(!1);var e=new FormData(g.current).get("birthDate"),t=e.length;2===t&&f("".concat(e,"/")),5===t&&f("".concat(e,"/"))},isError:y},{value:d,name:"totalYears",isError:y}],formRef:g,onSubmit:function(e){e.preventDefault();var t=new FormData(g.current),n={birthDate:t.get("birthDate"),totalYears:Number(t.get("totalYears"))};!function(e){if(!e.match(/^(0?[1-9]|[1-2][0-9]|3[01])[\/](0?[1-9]|1[0-2])/))return!1;var t=[];e.split("/").length>1&&(t=e.split("/"));var n=parseInt(t[0]),r=parseInt(t[1]),i=parseInt(t[2]);if(r>12)return!1;if(1==r||r>2){if(n>[31,28,31,30,31,30,31,31,30,31,30,31][r-1])return!1}else if(2==r){var a=!1;if((i%4||!(i%100))&&i%400||(a=!0),0==a&&n>=29)return!1;if(1==a&&n>29)return!1}return!0}(n.birthDate)?m(!0):o(n)},error:y&&"Invalid date format"})})},jT=function(){var e;switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"){case"primary":e="custom-checkbox--primary";break;case"secondary":e="custom-checkbox--secondary";break;default:e=""}return e},VT=function(e){var n=e.isDefaultActive,r=void 0!==n&&n,i=e.color,a=void 0===i?"default":i,o=e.id,u=e.onChange,s=_e((0,t.useState)(r),2),c=s[0],l=s[1];return(0,t.useEffect)((function(){l(r)}),[r]),(0,Se.jsxs)("label",{className:Ee()("custom-checkbox",jT(a)),children:[(0,Se.jsx)("input",{id:o,className:"custom-checkbox__input",type:"checkbox",checked:c,onChange:function(){u&&u(),l(!c)},disabled:!0}),(0,Se.jsx)("span",{className:"custom-checkbox__checkmark"})]})},BT=n(892),qT=n.n(BT),zT=n(253),KT=n.n(zT);qT().extend(KT());var GT=function(e){var t=e.yearWeeks;return(0,Se.jsx)("div",{className:"one-year-container",children:t.map((function(e,t){return(0,Se.jsx)(VT,{id:t,disabled:e.checked,isDefaultActive:e.checked},t)}))})},WT=n(636),HT=n.n(WT),QT=n(929),$T=n.n(QT),YT=n(808),XT=n.n(YT);qT().extend(HT()),qT().extend($T()),qT().extend(XT());var JT=function(e){return qT()(e,"DD/MM/YYYY").toDate()},ZT=function(e){return Array.from(Array(e).keys())},eC=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=qT()(e).year(),i=ZT(t),a=0;return i.map((function(e){var t=qT()().year(r+e).isoWeeksInYear(),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return JSON.parse(JSON.stringify(e)).map((function(e){return{checked:e+t+1<=n}}))}(ZT(t),a,n);return a+=t,i}))},tC=function(e){var t=null===e||void 0===e?void 0:e.filter((function(e){return e.checked}));return(null===t||void 0===t?void 0:t.length)>0?(null===t||void 0===t?void 0:t.length)/(null===e||void 0===e?void 0:e.length)*100:0},nC=function(e){var n=e.birthDate,r=e.totalYears,i=_e((0,t.useState)(0),2),a=(i[0],i[1]),o=_e((0,t.useState)([]),2),u=o[0],s=o[1],c=Le("(max-width: 765px)");return(0,t.useEffect)((function(){a((function(){var e=function(e){var t=new Date,n=JT(e),r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.round(Math.floor((i-r)/864e5)/7)}(n);return s(eC(JT(n),r,e)),e}))}),[n,r]),(0,Se.jsx)("div",{className:"years__wrapper",children:n.length>0&&(0,Se.jsxs)(Se.Fragment,{children:[c&&(0,Se.jsx)("div",{className:"years__head"}),(0,Se.jsx)("div",{className:"years-container years__container",children:u.map((function(e,t){return c?(0,Se.jsx)("div",{className:"progress-bar years-container__progress-bar",children:(0,Se.jsx)("div",{className:"progress-bar__item",style:{width:"".concat(tC(e),"%")}})},t):(0,Se.jsx)(GT,{yearWeeks:e},t)}))})]})})},rC=function(e){var n=e.isAuth,r=void 0!==n&&n,i=e.isNewUser,a=void 0===i||i,o=e.handleSubmit,u=e.defaultTotalYears,s=void 0===u?80:u,c=e.defaultBirthDate,l=void 0===c?"":c,f=_e((0,t.useState)(l),2),h=f[0],d=f[1],p=_e((0,t.useState)(s),2),v=p[0],y=p[1],m=_e((0,t.useState)(!r||!a),2),g=m[0],k=m[1];(0,t.useEffect)((function(){d(l),y(s),k(!r||!a)}),[l,s,a]);return(0,Se.jsxs)("section",{className:"page-section page__section",children:[(0,Se.jsxs)("div",{className:"data-form__container page-section__form",children:[(0,Se.jsxs)("button",{className:Ee()("form-toggle data-form__toggle",g&&"form-toggle--toggled"),onClick:function(){k((function(e){return!e}))},children:["Your data",(0,Se.jsx)("svg",{className:Ee()("toggle-svg form-toggle__svg",g&&"toggle-svg--rotated"),width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Se.jsx)("path",{d:"M11.0148 1.56389C11.0148 1.48354 10.9746 1.39314 10.9143 1.33287L10.4121 0.830636C10.3518 0.770368 10.2614 0.73019 10.1811 0.73019C10.1007 0.73019 10.0103 0.770368 9.95006 0.830636L6.00251 4.77818L2.05497 0.830636C1.9947 0.770368 1.9043 0.73019 1.82394 0.73019C1.73354 0.73019 1.65318 0.770368 1.59291 0.830636L1.09068 1.33287C1.03041 1.39314 0.990234 1.48354 0.990234 1.56389C0.990234 1.64425 1.03041 1.73465 1.09068 1.79492L5.77148 6.47573C5.83175 6.53599 5.92215 6.57617 6.00251 6.57617C6.08287 6.57617 6.17327 6.53599 6.23354 6.47573L10.9143 1.79492C10.9746 1.73465 11.0148 1.64425 11.0148 1.56389Z",fill:"currentColor"})})]}),g&&(0,Se.jsx)(UT,{formClassNames:"data-form__form",onSubmit:function(e){k(!1),d(e.birthDate),y(e.totalYears),"undefined"!==typeof o&&o(e.birthDate,e.totalYears)},defaultTotalYears:v,defaultBirthDate:h})]}),(0,Se.jsx)(nC,{birthDate:h,totalYears:v})]})},iC="Home",aC="Sign up",oC="Log in",uC="User Account",sC="Try Weeks Tracker",cC=[{key:"router-login",title:oC,tooltip:oC,path:"/login",enabled:!0,component:function(){return(0,Se.jsxs)("div",{className:"login-container",children:[(0,Se.jsx)("h1",{className:"login-container__title",children:"Login Form"}),(0,Se.jsx)(FT,{})]})},appendDivider:!0,type:"guest"},{key:"router-signup",title:aC,tooltip:aC,path:"/signup",enabled:!0,component:function(){return(0,Se.jsxs)("div",{className:"sign-up-container",children:[(0,Se.jsx)("h1",{className:"sign-up-container__title",children:"Sign up Form"}),(0,Se.jsx)(FT,{type:"signup"})]})},appendDivider:!0,type:"guest"},{key:"router-weeks-tracker",title:sC,tooltip:sC,path:"/weeks_tracker",enabled:!0,component:function(e){return pe(e),(0,Se.jsx)(Se.Fragment,{children:(0,Se.jsx)(DT,{pageClassName:"page-container",children:(0,Se.jsx)(rC,{})})})},appendDivider:!0,type:"guest"},{key:"router-account",title:uC,tooltip:uC,path:"/my_account",enabled:!0,component:function(e){pe(e);var n=re(),r=_e((0,t.useState)(!1),2),i=r[0],a=r[1],o=_e((0,t.useState)(""),2),u=o[0],s=o[1],c=_e((0,t.useState)(80),2),l=c[0],f=c[1],h=function(){var e=ge(ye().mark((function e(){var t,n,r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.uid,r=mE(CT,"usersData",n),e.next=4,jS(r);case 4:(i=e.sent).exists()?(s(i.data().data.birthDate),f(i.data().data.totalYears)):console.log("No such document!");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){var e=!!localStorage.getItem("user");e?a(e):n.push("/"),i&&h()}),[localStorage.getItem("user"),i]);var d=function(){var e=ge(ye().mark((function e(t,n){var r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null===(r=JSON.parse(localStorage.getItem("user")))||void 0===r?void 0:r.uid,a={uid:i,birthDate:t,totalYears:n},s(t),f(n),e.prev=4,e.next=7,zS(mE(yE(CT,"usersData"),i),{data:a});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error("Error adding document: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,Se.jsx)(Se.Fragment,{children:(0,Se.jsx)(DT,{pageClassName:"page-container",children:(0,Se.jsx)(rC,{isAuth:i,handleSubmit:d,defaultBirthDate:u,defaultTotalYears:l})})})},appendDivider:!0,type:"private"},{key:"router-home",title:iC,tooltip:iC,path:"/",enabled:!0,component:function(e){return pe(e),(0,Se.jsx)(Se.Fragment,{children:(0,Se.jsxs)(DT,{children:[(0,Se.jsxs)("div",{className:"home-container",children:[(0,Se.jsx)("h1",{children:"About project"}),(0,Se.jsx)("p",{children:"Have you ever decided to start running straight from next Monday, but then suddenly reconsidered and postponed your new life forward a week? Then this app is for you!"}),(0,Se.jsx)("img",{src:OT,alt:"Gif with alarm clock"}),(0,Se.jsx)("h2",{children:"With 80years\u2019 Weeks Tracker*"}),(0,Se.jsx)("p",{children:"You can actually see how many weeks you have got till you \u201cexpected\u201d end. It has never been so easy! All you need is to insert your birthdate and number of years you hope you will spend on this side to our form and et voil\xe0: you will see crystal clear how much longer you can skip your workout."}),(0,Se.jsx)("h3",{children:"No more..."}),(0,Se.jsx)("img",{src:RT,alt:"Funny no image"}),(0,Se.jsxs)("ul",{children:[(0,Se.jsx)("li",{children:"meaningless dates"}),(0,Se.jsx)("li",{children:"tomorrow diets"}),(0,Se.jsx)("li",{children:"overtimes"})]}),(0,Se.jsx)("h3",{children:"Special bonus"}),(0,Se.jsx)("p",{children:"You can change numbers of years everytime you return home after doctor appointment!"}),(0,Se.jsx)("p",{children:"Memento mori and call already your mother!**"}),(0,Se.jsx)("img",{src:PT,alt:"Funny gif with skeleton"}),(0,Se.jsxs)("p",{className:"home-container__additions",children:["*Careful, this App can be addictive and increase your anxiety level by 100%,",(0,Se.jsx)("br",{}),"**You can also check your mothers\u2019s \u201clife progress\u201d"]})]}),(0,Se.jsx)(Ne,{buttonClassName:"home-container__button",label:"Try it!",variant:"third",link:"/weeks_tracker"})]})})},appendDivider:!0,type:"guest"}],lC=function(){return(0,Se.jsx)("div",{children:"No Component Defined."})};var fC=function(){return(0,Se.jsx)(Se.Fragment,{children:(0,Se.jsx)(ie,{children:(0,Se.jsx)(te,{children:cC.map((function(e){return e.subRoutes?e.subRoutes.map((function(e){return(0,Se.jsx)($,{path:"".concat(e.path),component:e.component||lC},"".concat(e.key))})):(0,Se.jsx)($,{path:"".concat(e.path),component:e.component||lC},"".concat(e.key))}))})})})};r.render((0,Se.jsx)(t.StrictMode,{children:(0,Se.jsx)(fC,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.3b56fbf7.js.map